{
  "_meta": {
    "version": "1.0.0",
    "description": "BHPé‡Œç¨‹ç¢‘æ¿€åŠ±é…ç½® - ç›´æ¥åŠ è½½åˆ°äº‹ä»¶å¼•æ“",
    "updated": "2026-02-09",
    "integrates_with": ["point_events.json", "promotion_rules.json"]
  },

  "milestones": [
    {
      "key": "FIRST_LOGIN",
      "trigger": {
        "type": "event",
        "event": "user_registered",
        "condition": null
      },
      "display": {
        "day_label": "é¦–æ¬¡",
        "name": "åˆè§ Â· ç§å­ä»ªå¼",
        "emoji": "ğŸŒ±",
        "metaphor": "seed",
        "color": "#10B981"
      },
      "rewards": {
        "credits": 15,
        "points": [
          {"type": "growth", "amount": 15, "action": "milestone_first_login"}
        ],
        "badges": ["badge_first_step"],
        "unlocks": ["micro_assessment_entry", "observer_7step_entry"],
        "items": [
          {"type": "avatar_frame", "asset": "frame_seed", "rarity": "common"},
          {"type": "behavior_card", "asset": "random_micro_behavior", "count": 1}
        ]
      },
      "ritual": {
        "animation": "seed_sprout",
        "duration_ms": 3000,
        "sound": "gentle_sprout",
        "fullscreen": true
      },
      "nudge": {
        "type": "immediate",
        "message": "ä½ ç§ä¸‹äº†ä¸€é¢—ç§å­ã€‚30ç§’è®¤è¯†ä¸€ä¸‹è‡ªå·±ï¼Ÿ",
        "action": "open_micro_assessment",
        "delay_ms": 3000
      }
    },
    {
      "key": "DAY_3",
      "trigger": {
        "type": "streak",
        "event": "daily_checkin",
        "streak_days": 3
      },
      "display": {
        "day_label": "ç¬¬3å¤©",
        "name": "èŒèŠ½ Â· å˜é‡æƒŠå–œ",
        "emoji": "ğŸŒ¿",
        "metaphor": "sprout",
        "color": "#059669"
      },
      "rewards": {
        "credits": 25,
        "points": [
          {"type": "growth", "amount": 25, "action": "milestone_day3"},
          {"type": "growth", "amount": 5, "action": "streak_bonus_3d"}
        ],
        "badges": ["badge_3day_flame"],
        "unlocks": ["behavior_chain_card", "community_browse"],
        "items": [
          {"type": "flip_card_reward", "pool": "day3_rewards", "pick": 1, "show": 3}
        ]
      },
      "ritual": {
        "animation": "seed_to_sprout",
        "duration_ms": 2500,
        "sound": "nature_grow",
        "fullscreen": false
      },
      "nudge": {
        "type": "morning_push",
        "time": "08:00",
        "title": "ğŸŒ¿ ä½ çš„ç§å­å·²èŒèŠ½",
        "message": "è¿ç»­3å¤©ï¼Œä½ å·²è¶…è¿‡{percentile}%çš„æ–°ç”¨æˆ·",
        "variables": {"percentile": {"source": "redis_rank", "metric": "streak_3d"}},
        "action": "open_app"
      },
      "social_proof": {
        "enabled": true,
        "template": "æœ¬å‘¨å·²æœ‰{count}é¢—ç§å­èŒèŠ½",
        "metric": "weekly_day3_count"
      }
    },
    {
      "key": "DAY_7",
      "trigger": {
        "type": "streak",
        "event": "daily_checkin",
        "streak_days": 7
      },
      "display": {
        "day_label": "ç¬¬7å¤©",
        "name": "æ‰æ ¹ Â· å‘¨å›é¡¾",
        "emoji": "ğŸŒ³",
        "metaphor": "rooting",
        "color": "#047857"
      },
      "rewards": {
        "credits": 40,
        "points": [
          {"type": "growth", "amount": 30, "action": "milestone_day7"},
          {"type": "growth", "amount": 10, "action": "streak_bonus_7d"}
        ],
        "badges": ["badge_week_star"],
        "unlocks": ["micro_behavior_challenge", "companion_invite"],
        "items": [
          {"type": "data_poster", "template": "week1_review", "shareable": true},
          {"type": "elective_unlock", "count": 1, "category": "any"}
        ]
      },
      "ritual": {
        "animation": "roots_spread",
        "duration_ms": 3000,
        "sound": "earth_deep",
        "fullscreen": false,
        "generates": "week1_data_poster"
      },
      "nudge": {
        "type": "scheduled_push",
        "time": "20:00",
        "title": "ğŸŒ³ ä½ çš„ç¬¬ä¸€å‘¨å›é¡¾å·²ç”Ÿæˆ",
        "message": "å®Œæˆç¬¬ä¸€å‘¨çš„äººï¼Œ78%ä¼šåšæŒåˆ°30å¤©",
        "action": "open_week_review"
      },
      "data_poster": {
        "template": "week1_infographic",
        "fields": ["behavior_attempts", "growth_points_curve", "streak_rank"],
        "share_channels": ["wechat_moments", "save_image"]
      }
    },
    {
      "key": "DAY_14",
      "trigger": {
        "type": "streak",
        "event": "daily_checkin",
        "streak_days": 14
      },
      "display": {
        "day_label": "ç¬¬14å¤©",
        "name": "å¼€èŠ± Â· è·¯å¾„é€‰æ‹©",
        "emoji": "ğŸŒ¸",
        "metaphor": "blooming",
        "color": "#DB2777"
      },
      "rewards": {
        "credits": 50,
        "points": [
          {"type": "growth", "amount": 35, "action": "milestone_day14"},
          {"type": "contribution", "amount": 15, "action": "milestone_day14_contrib"}
        ],
        "badges": ["badge_half_month"],
        "unlocks": ["behavior_chain_awareness", "cgm_baseline", "growth_archive"],
        "items": [
          {"type": "avatar_evolution", "from": "sprout", "to": "flower", "choices": 3},
          {"type": "companion_invite_token", "count": 1}
        ]
      },
      "ritual": {
        "animation": "tree_bloom",
        "duration_ms": 4000,
        "sound": "bloom_gentle",
        "fullscreen": true,
        "interactive": true,
        "interaction": {
          "type": "choose_flower",
          "description": "æ ¹æ®è¡Œä¸ºæ•°æ®æ¨è3ç§èŠ±å‹(ä»£è¡¨3ç§æˆé•¿è·¯å¾„)",
          "options_source": "behavior_analysis",
          "option_count": 3
        }
      },
      "nudge": {
        "type": "in_app",
        "title": "ğŸŒ¸ ä½ çš„æ”¹å˜ï¼Œæ•°æ®çœ‹å¾—è§",
        "message": "å±•ç¤ºå·²å‘ç”Ÿçš„å¾®å˜åŒ–æ•°æ®",
        "data_fields": ["sleep_change", "exercise_change", "diet_change"],
        "show_if_any_improved": true
      }
    },
    {
      "key": "DAY_21",
      "trigger": {
        "type": "streak",
        "event": "daily_checkin",
        "streak_days": 21
      },
      "display": {
        "day_label": "ç¬¬21å¤©",
        "name": "ç»“æœ Â· æ”¶è·æ—¥",
        "emoji": "ğŸ",
        "metaphor": "fruiting",
        "color": "#EA580C"
      },
      "rewards": {
        "credits": 60,
        "points": [
          {"type": "growth", "amount": 40, "action": "milestone_day21"},
          {"type": "contribution", "amount": 20, "action": "milestone_day21_contrib"}
        ],
        "badges": ["badge_21day_gold"],
        "unlocks": ["community_post", "content_share", "advanced_electives"],
        "items": [
          {"type": "story_template", "template": "my_21day_story", "publishable": true},
          {"type": "companion_invite_token", "count": 3}
        ]
      },
      "ritual": {
        "animation": "fruit_grow",
        "duration_ms": 4000,
        "sound": "harvest_warm",
        "fullscreen": true,
        "generates": "growth_timeline"
      },
      "nudge": {
        "type": "in_app",
        "title": "ğŸ ä½ ç§çš„æ ‘ç»“äº†ç¬¬ä¸€é¢—æœ",
        "message": "åˆ†äº«ä½ çš„21å¤©æ•…äº‹ï¼Ÿ",
        "action": "open_story_editor",
        "identity_shift": true,
        "shift_message": "ä»è®°å½•è€…â†’è¡¨è¾¾è€…"
      }
    },
    {
      "key": "DAY_30",
      "trigger": {
        "type": "streak",
        "event": "daily_checkin",
        "streak_days": 30
      },
      "display": {
        "day_label": "ç¬¬30å¤©",
        "name": "æ–°ç”Ÿ Â· è¶å˜ä»ªå¼",
        "emoji": "ğŸ¦‹",
        "metaphor": "butterfly",
        "color": "#7C3AED"
      },
      "rewards": {
        "credits": 80,
        "points": [
          {"type": "growth", "amount": 50, "action": "milestone_day30"},
          {"type": "growth", "amount": 50, "action": "behavior_stable_30d"},
          {"type": "contribution", "amount": 30, "action": "milestone_day30_contrib"},
          {"type": "influence", "amount": 10, "action": "milestone_day30_influence"}
        ],
        "badges": ["badge_30day_diamond", "badge_butterfly"],
        "unlocks": ["promotion_L0_to_L1_channel"],
        "items": [
          {"type": "data_art", "template": "butterfly_wings", "data_source": "30day_behavior_data", "unique": true},
          {"type": "ai_documentary", "template": "growth_film", "data_source": "milestone_history"},
          {"type": "memorial_date", "field": "butterfly_day", "permanent": true}
        ]
      },
      "ritual": {
        "animation": "butterfly_emerge",
        "duration_ms": 8000,
        "sound": "metamorphosis",
        "fullscreen": true,
        "replay_journey": true,
        "journey_stages": ["seed", "sprout", "rooting", "blooming", "fruiting", "butterfly"]
      },
      "nudge": {
        "type": "in_app",
        "title": "ğŸ¦‹ è¶å˜å®Œæˆ",
        "message": "ä½ å·²å‡†å¤‡å¥½å¸®åŠ©ä¸‹ä¸€é¢—ç§å­",
        "action": "open_promotion_check",
        "companion_prompt": true,
        "prompt_message": "é‚€è¯·ä½ çš„ç¬¬ä¸€ä½åŒé“è€…"
      }
    }
  ],

  "flip_card_pools": {
    "day3_rewards": {
      "description": "ç¬¬3å¤©ç¿»ç‰Œå¥–åŠ±æ± (å±•ç¤º3å¼ ,é€‰1å¼ )",
      "items": [
        {"id": "fc_extra_credits", "label": "+10é¢å¤–å­¦åˆ†", "type": "credits", "amount": 10, "weight": 40},
        {"id": "fc_wallpaper", "label": "èŒèŠ½ä¸“å±å£çº¸", "type": "asset", "asset": "wallpaper_sprout", "weight": 35},
        {"id": "fc_behavior_card", "label": "ç¨€æœ‰å¾®è¡Œä¸ºå¡", "type": "behavior_card", "rarity": "rare", "weight": 25}
      ]
    }
  },

  "streak_recovery": {
    "_description": "æ–­ç­¾æ¢å¤æœºåˆ¶â€”â€”ä¸è®©ä¸€æ¬¡ä¸­æ–­æ¯æ‰å…¨éƒ¨",
    "grace_period_hours": 36,
    "recovery_options": [
      {"type": "free_recovery", "available_per_month": 1, "label": "å…è´¹è¡¥ç­¾(æ¯æœˆ1æ¬¡)"},
      {"type": "credit_recovery", "cost_credits": 10, "label": "æ¶ˆè€—10å­¦åˆ†è¡¥ç­¾"},
      {"type": "friend_rescue", "requires": "companion_relation", "label": "åŒé“è€…åŠ©åŠ›è¡¥ç­¾"}
    ]
  }
}
