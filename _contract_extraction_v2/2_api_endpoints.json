{
  "endpoints": [
    {
      "method": "GET",
      "path": "/api/v1/",
      "function": "read_root",
      "file": "main.py",
      "line": 113,
      "module": "main",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "根路径 - 状态检查",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/health",
      "function": "health_check",
      "file": "main.py",
      "line": 128,
      "module": "main",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "基础健康检查（快速）",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/health",
      "function": "comprehensive_health",
      "file": "main.py",
      "line": 139,
      "module": "health",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "综合健康检查（检测所有依赖）",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/intervene",
      "function": "get_intervention",
      "file": "main.py",
      "line": 150,
      "module": "main",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "接收数据并生成干预建议\n\n[v14-ENHANCED] 增加事件路由和安全检查",
      "is_async": true,
      "parameters": [
        {
          "name": "data",
          "type": "HealthDataInput"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/latest_status",
      "function": "get_latest",
      "file": "main.py",
      "line": 205,
      "module": "main",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "供前端轮询最新状态",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/chat",
      "function": "chat_with_coach",
      "file": "main.py",
      "line": 211,
      "module": "main",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "AI 教练对话（SSE 流式返回）",
      "is_async": true,
      "parameters": [
        {
          "name": "data",
          "type": "dict"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/chat_sync",
      "function": "chat_with_coach_sync",
      "file": "main.py",
      "line": 232,
      "module": "main",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "AI 教练对话（非流式，兼容旧前端）\n\n[v11] 优先调用 Dify，Dify 不可用时自动回退 Ollama 本地模型\n[v14-ENHANCED] 增加安全检查",
      "is_async": true,
      "parameters": [
        {
          "name": "data",
          "type": "dict"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v2/",
      "function": "root",
      "file": "run_quality_service.py",
      "line": 79,
      "module": "run_quality_service",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v2/health",
      "function": "health",
      "file": "run_quality_service.py",
      "line": 89,
      "module": "run_quality_service",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/admin/overview",
      "function": "get_overview",
      "file": "api/admin_analytics_api.py",
      "line": 50,
      "module": "admin_analytics",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "平台概览 KPI",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/admin/user-growth",
      "function": "get_user_growth",
      "file": "api/admin_analytics_api.py",
      "line": 91,
      "module": "admin_analytics",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户增长趋势 (bar + line)",
      "is_async": false,
      "parameters": [
        {
          "name": "months",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/admin/role-distribution",
      "function": "get_role_distribution",
      "file": "api/admin_analytics_api.py",
      "line": 125,
      "module": "admin_analytics",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "角色分布 (pie)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/admin/stage-distribution",
      "function": "get_stage_distribution",
      "file": "api/admin_analytics_api.py",
      "line": 148,
      "module": "admin_analytics",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "全平台行为阶段分布 (bar)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/admin/risk-distribution",
      "function": "get_risk_distribution",
      "file": "api/admin_analytics_api.py",
      "line": 170,
      "module": "admin_analytics",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "风险等级分布 (donut) — 取每用户最新评估",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/admin/coach-leaderboard",
      "function": "get_coach_leaderboard",
      "file": "api/admin_analytics_api.py",
      "line": 207,
      "module": "admin_analytics",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练绩效排行 (horizontal bar)",
      "is_async": false,
      "parameters": [
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/admin/challenge-effectiveness",
      "function": "get_challenge_effectiveness",
      "file": "api/admin_analytics_api.py",
      "line": 265,
      "module": "admin_analytics",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "挑战活动效果 (grouped bar)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent/list",
      "function": "list_agents",
      "file": "api/agent_api.py",
      "line": 306,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "resolve_tenant_ctx",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取所有已注册Agent列表 (优先从模板缓存读取)",
      "is_async": true,
      "parameters": [
        {
          "name": "current_user",
          "type": "Any"
        },
        {
          "name": "tenant_ctx",
          "type": "Optional[Dict]"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent/run",
      "function": "run_agent",
      "file": "api/agent_api.py",
      "line": 341,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "resolve_tenant_ctx",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "运行Agent任务 (v6 + tenant_ctx 优先, v0 降级)",
      "is_async": true,
      "parameters": [
        {
          "name": "req",
          "type": "AgentRunRequest"
        },
        {
          "name": "current_user",
          "type": "Any"
        },
        {
          "name": "tenant_ctx",
          "type": "Optional[Dict]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent/pending-reviews",
      "function": "get_pending_reviews",
      "file": "api/agent_api.py",
      "line": 352,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取待审核的Agent输出",
      "is_async": true,
      "parameters": [
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent/feedback",
      "function": "submit_feedback",
      "file": "api/agent_api.py",
      "line": 358,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交Agent输出反馈（审核/评分）",
      "is_async": true,
      "parameters": [
        {
          "name": "req",
          "type": "FeedbackRequest"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent/stats/{agent_id}",
      "function": "get_agent_stats",
      "file": "api/agent_api.py",
      "line": 383,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取Agent执行统计",
      "is_async": true,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent/history",
      "function": "get_history",
      "file": "api/agent_api.py",
      "line": 410,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取Agent执行历史",
      "is_async": true,
      "parameters": [
        {
          "name": "agent_id",
          "type": "Optional[str]"
        },
        {
          "name": "user_id",
          "type": "Optional[str]"
        },
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent/pending-reviews/inject",
      "function": "inject_pending_review",
      "file": "api/agent_api.py",
      "line": 439,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "注入待审案例（仿真测试数据）",
      "is_async": true,
      "parameters": [
        {
          "name": "data",
          "type": "Dict[str, Any]"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent/events/inject",
      "function": "inject_behavior_event",
      "file": "api/agent_api.py",
      "line": 470,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "注入行为事件（仿真测试数据）",
      "is_async": true,
      "parameters": [
        {
          "name": "data",
          "type": "Dict[str, Any]"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content-governance/audit-log/inject",
      "function": "inject_governance_log",
      "file": "api/agent_api.py",
      "line": 488,
      "module": "content-governance",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "注入治理评分日志（仿真测试数据）",
      "is_async": true,
      "parameters": [
        {
          "name": "data",
          "type": "Dict[str, Any]"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent/status",
      "function": "agent_system_status",
      "file": "api/agent_api.py",
      "line": 509,
      "module": "agent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取多Agent系统整体状态",
      "is_async": true,
      "parameters": [
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-ecosystem/marketplace",
      "function": "browse_marketplace",
      "file": "api/agent_ecosystem_api.py",
      "line": 60,
      "module": "agent_ecosystem",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "浏览 Agent 模板市场",
      "is_async": false,
      "parameters": [
        {
          "name": "category",
          "type": "Optional[str]"
        },
        {
          "name": "search",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-ecosystem/marketplace/publish",
      "function": "publish_template",
      "file": "api/agent_ecosystem_api.py",
      "line": 82,
      "module": "marketplace",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "发布 Agent 模板到市场",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "PublishRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-ecosystem/marketplace/pending",
      "function": "pending_listings",
      "file": "api/agent_ecosystem_api.py",
      "line": 117,
      "module": "marketplace",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "待审核市场发布",
      "is_async": false,
      "parameters": [
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-ecosystem/marketplace/{listing_id}/approve",
      "function": "approve_listing",
      "file": "api/agent_ecosystem_api.py",
      "line": 137,
      "module": "marketplace",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核通过市场发布",
      "is_async": false,
      "parameters": [
        {
          "name": "listing_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "ReviewRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-ecosystem/marketplace/{listing_id}/reject",
      "function": "reject_listing",
      "file": "api/agent_ecosystem_api.py",
      "line": 155,
      "module": "marketplace",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核拒绝市场发布",
      "is_async": false,
      "parameters": [
        {
          "name": "listing_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "ReviewRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-ecosystem/marketplace/{listing_id}/install",
      "function": "install_template",
      "file": "api/agent_ecosystem_api.py",
      "line": 173,
      "module": "marketplace",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "安装市场模板",
      "is_async": false,
      "parameters": [
        {
          "name": "listing_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "InstallRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-ecosystem/marketplace/recommended",
      "function": "recommended_marketplace",
      "file": "api/agent_ecosystem_api.py",
      "line": 197,
      "module": "marketplace",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "按专家领域推荐市场 Agent",
      "is_async": false,
      "parameters": [
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-ecosystem/compositions",
      "function": "list_compositions",
      "file": "api/agent_ecosystem_api.py",
      "line": 234,
      "module": "agent_ecosystem",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出 Agent 组合",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-ecosystem/compositions",
      "function": "create_composition",
      "file": "api/agent_ecosystem_api.py",
      "line": 255,
      "module": "agent_ecosystem",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建 Agent 组合",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "CompositionCreate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-ecosystem/compositions/{composition_id}",
      "function": "get_composition",
      "file": "api/agent_ecosystem_api.py",
      "line": 280,
      "module": "compositions",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "组合详情",
      "is_async": false,
      "parameters": [
        {
          "name": "composition_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-ecosystem/growth-points",
      "function": "my_growth_points",
      "file": "api/agent_ecosystem_api.py",
      "line": 297,
      "module": "agent_ecosystem",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "我的 Agent 成长积分",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-ecosystem/growth-points/config",
      "function": "growth_points_config",
      "file": "api/agent_ecosystem_api.py",
      "line": 309,
      "module": "growth-points",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "积分事件配置",
      "is_async": false,
      "parameters": [
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-feedback/submit",
      "function": "submit_feedback",
      "file": "api/agent_feedback_api.py",
      "line": 58,
      "module": "agent_feedback",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交 Agent 反馈",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "FeedbackSubmit"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-feedback/list",
      "function": "list_feedback",
      "file": "api/agent_feedback_api.py",
      "line": 90,
      "module": "agent_feedback",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查询反馈记录",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "Optional[str]"
        },
        {
          "name": "feedback_type",
          "type": "Optional[str]"
        },
        {
          "name": "tenant_id",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-feedback/growth/{agent_id}",
      "function": "agent_growth_report",
      "file": "api/agent_feedback_api.py",
      "line": 108,
      "module": "growth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "Agent 成长报告",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-feedback/summary",
      "function": "agents_summary",
      "file": "api/agent_feedback_api.py",
      "line": 122,
      "module": "agent_feedback",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "所有 Agent 成长摘要",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-feedback/metrics/{agent_id}",
      "function": "agent_metrics",
      "file": "api/agent_feedback_api.py",
      "line": 135,
      "module": "metrics",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "Agent 日维度指标",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-feedback/prompt-version",
      "function": "create_prompt_version_endpoint",
      "file": "api/agent_feedback_api.py",
      "line": 170,
      "module": "agent_feedback",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建新的 Prompt 版本",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "PromptVersionCreate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-feedback/prompt-versions/{agent_id}",
      "function": "list_prompt_versions_endpoint",
      "file": "api/agent_feedback_api.py",
      "line": 202,
      "module": "prompt-versions",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "Agent Prompt 版本历史",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-feedback/aggregate",
      "function": "trigger_aggregation",
      "file": "api/agent_feedback_api.py",
      "line": 216,
      "module": "agent_feedback",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "手动触发日指标聚合",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-templates/list",
      "function": "list_templates",
      "file": "api/agent_template_api.py",
      "line": 90,
      "module": "agent_template",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_type",
          "type": "Optional[str]"
        },
        {
          "name": "is_enabled",
          "type": "Optional[bool]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-templates/presets",
      "function": "list_presets",
      "file": "api/agent_template_api.py",
      "line": 113,
      "module": "agent_template",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-templates/domains",
      "function": "list_domains",
      "file": "api/agent_template_api.py",
      "line": 125,
      "module": "agent_template",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "_admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/agent-templates/{agent_id}",
      "function": "get_template",
      "file": "api/agent_template_api.py",
      "line": 131,
      "module": "agent_template",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-templates/create",
      "function": "create_template",
      "file": "api/agent_template_api.py",
      "line": 144,
      "module": "agent_template",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "AgentTemplateCreate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/agent-templates/{agent_id}",
      "function": "update_template",
      "file": "api/agent_template_api.py",
      "line": 183,
      "module": "agent_template",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "AgentTemplateUpdate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/agent-templates/{agent_id}",
      "function": "delete_template",
      "file": "api/agent_template_api.py",
      "line": 206,
      "module": "agent_template",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-templates/{agent_id}/toggle",
      "function": "toggle_template",
      "file": "api/agent_template_api.py",
      "line": 225,
      "module": "{agent_id}",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-templates/{agent_id}/clone",
      "function": "clone_template",
      "file": "api/agent_template_api.py",
      "line": 243,
      "module": "{agent_id}",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "new_agent_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/agent-templates/refresh-cache",
      "function": "refresh_cache",
      "file": "api/agent_template_api.py",
      "line": 287,
      "module": "agent_template",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/coach/risk-trend",
      "function": "get_risk_trend",
      "file": "api/analytics_api.py",
      "line": 52,
      "module": "analytics",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "学员风险等级趋势 (stacked area)",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/coach/micro-action-trend",
      "function": "get_micro_action_trend",
      "file": "api/analytics_api.py",
      "line": 84,
      "module": "analytics",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "微行动完成率趋势 (line + area)",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/coach/domain-performance",
      "function": "get_domain_performance",
      "file": "api/analytics_api.py",
      "line": 115,
      "module": "analytics",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "领域完成率对比 (radar)",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/coach/alert-frequency",
      "function": "get_alert_frequency",
      "file": "api/analytics_api.py",
      "line": 144,
      "module": "analytics",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "预警频率分布 (horizontal bar)",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/coach/challenge-stats",
      "function": "get_challenge_stats",
      "file": "api/analytics_api.py",
      "line": 174,
      "module": "analytics",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "挑战报名 vs 完成 (grouped bar)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/analytics/coach/stage-distribution",
      "function": "get_stage_distribution",
      "file": "api/analytics_api.py",
      "line": 199,
      "module": "analytics",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "学员阶段分布 (donut)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/assessment/recent/{user_id}",
      "function": "get_recent_assessments",
      "file": "api/assessment_api.py",
      "line": 67,
      "module": "recent",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户最近的评估记录\n\nArgs:\n    user_id: 用户ID\n    limit: 返回数量限制（默认5条）\n\nReturns:\n    评估记录列表",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/assessment/history/{user_id}",
      "function": "get_assessment_history",
      "file": "api/assessment_api.py",
      "line": 114,
      "module": "history",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户评估历史（分页）\n\nArgs:\n    user_id: 用户ID\n    page: 页码（从1开始）\n    page_size: 每页数量\n\nReturns:\n    评估记录列表",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/assessment/{assessment_id}",
      "function": "get_assessment_result",
      "file": "api/assessment_api.py",
      "line": 166,
      "module": "assessment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取单个评估结果详情\n\nArgs:\n    assessment_id: 评估ID (ASS-xxx格式)\n\nReturns:\n    评估结果详情",
      "is_async": false,
      "parameters": [
        {
          "name": "assessment_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/assessment/submit",
      "function": "submit_assessment",
      "file": "api/assessment_api.py",
      "line": 214,
      "module": "assessment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交新的评估数据\n\n接收用户输入，调用L2评估引擎处理，存储结果到数据库\n\nArgs:\n    data: 评估输入数据，包含:\n        - text_content: 用户描述文本（可选）\n        - glucose_values: 血糖值列表（可选）\n        - hrv_values: HRV值列表（可选）\n        - activity_data: 活动数据（可",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "dict"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/assessment/user/latest",
      "function": "get_latest_assessment",
      "file": "api/assessment_api.py",
      "line": 396,
      "module": "user",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户最新的评估记录",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/assessment-assignments/assign",
      "function": "assign_assessment",
      "file": "api/assessment_assignment_api.py",
      "line": 101,
      "module": "assessment_assignment",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练推送评估给学员（支持量表 + 高频题目 + 上限3验证）",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "AssignRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/assessment-assignments/my-pending",
      "function": "get_my_pending_assignments",
      "file": "api/assessment_assignment_api.py",
      "line": 196,
      "module": "assessment_assignment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "学员查看待完成的评估任务",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/assessment-assignments/{assignment_id}/submit",
      "function": "submit_assessment",
      "file": "api/assessment_assignment_api.py",
      "line": 225,
      "module": "{assignment_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "学员提交评估答案，触发管道生成处方",
      "is_async": true,
      "parameters": [
        {
          "name": "assignment_id",
          "type": "int"
        },
        {
          "name": "request",
          "type": "SubmitRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/assessment-assignments/review-list",
      "function": "get_review_list",
      "file": "api/assessment_assignment_api.py",
      "line": 461,
      "module": "assessment_assignment",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练查看待审核的评估（status=completed）",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/assessment-assignments/review-items/{item_id}",
      "function": "update_review_item",
      "file": "api/assessment_assignment_api.py",
      "line": 504,
      "module": "review-items",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练审核单条内容",
      "is_async": true,
      "parameters": [
        {
          "name": "item_id",
          "type": "int"
        },
        {
          "name": "request",
          "type": "ReviewItemUpdate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/assessment-assignments/{assignment_id}/push",
      "function": "push_reviewed_result",
      "file": "api/assessment_assignment_api.py",
      "line": 539,
      "module": "{assignment_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练推送审核结果给学员",
      "is_async": true,
      "parameters": [
        {
          "name": "assignment_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/assessment-assignments/{assignment_id}/result",
      "function": "get_assignment_result",
      "file": "api/assessment_assignment_api.py",
      "line": 590,
      "module": "{assignment_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "学员查看已推送的结果",
      "is_async": true,
      "parameters": [
        {
          "name": "assignment_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/assessment-assignments/pushed-list",
      "function": "get_pushed_list",
      "file": "api/assessment_assignment_api.py",
      "line": 653,
      "module": "assessment_assignment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "学员查看所有已推送的评估结果列表",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/assessment/evaluate",
      "function": "evaluate_full_pipeline",
      "file": "api/assessment_pipeline_api.py",
      "line": 76,
      "module": "assessment_pipeline",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "完整评估流水线\n\n流程:\n1. BAPS 评分 (TTM7必填 + BIG5/BPT6/CAPACITY/SPI选填)\n2. BehavioralProfileService 生成/更新画像\n3. StageRuntimeBuilder 判定阶段\n4. InterventionMatcher 匹配干预\n5. PolicyGate 过闸\n6. 返回: 画像摘要 + 干预计划\n\n首次评估: 提交全部5",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "EvaluateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/assessment/profile/me",
      "function": "get_my_behavioral_profile",
      "file": "api/assessment_pipeline_api.py",
      "line": 212,
      "module": "profile",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户自己的行为画像 (去诊断化)",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/assessment/profile/{user_id}",
      "function": "get_behavioral_profile",
      "file": "api/assessment_pipeline_api.py",
      "line": 224,
      "module": "profile",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户行为画像\n\n- 普通用户只能查看自己的画像 (去诊断化)\n- 教练/管理员可查看任何用户 (完整视图)",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/assessment/intervention-plan/{user_id}",
      "function": "get_intervention_plan",
      "file": "api/assessment_pipeline_api.py",
      "line": 252,
      "module": "intervention-plan",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户当前干预计划\n\n基于最新行为画像实时生成干预匹配",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/auth/register",
      "function": "register",
      "file": "api/auth_api.py",
      "line": 151,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "TokenResponse",
      "return_type": null,
      "docstring": "用户注册\n\n创建新用户并返回认证token",
      "is_async": false,
      "parameters": [
        {
          "name": "request",
          "type": "RegisterRequest"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/auth/login",
      "function": "login",
      "file": "api/auth_api.py",
      "line": 221,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "TokenResponse",
      "return_type": null,
      "docstring": "用户登录\n\n使用用户名/邮箱和密码登录（OAuth2 Password Flow）",
      "is_async": false,
      "parameters": [
        {
          "name": "request",
          "type": "Request"
        },
        {
          "name": "form_data",
          "type": "OAuth2PasswordRequestForm"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/auth/me",
      "function": "get_current_user_info",
      "file": "api/auth_api.py",
      "line": 310,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户信息\n\n需要认证",
      "is_async": true,
      "parameters": [
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/auth/refresh",
      "function": "refresh_token",
      "file": "api/auth_api.py",
      "line": 331,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "刷新访问令牌\n\n使用 refresh_token 获取新的 access_token",
      "is_async": false,
      "parameters": [
        {
          "name": "refresh_token",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/auth/password",
      "function": "change_password",
      "file": "api/auth_api.py",
      "line": 381,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "修改密码",
      "is_async": true,
      "parameters": [
        {
          "name": "old_password",
          "type": "str"
        },
        {
          "name": "new_password",
          "type": "str"
        },
        {
          "name": "current_user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/auth/logout",
      "function": "logout",
      "file": "api/auth_api.py",
      "line": 417,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "security",
          "role": "custom"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户登出\n\n将token加入黑名单",
      "is_async": true,
      "parameters": [
        {
          "name": "credentials",
          "type": "HTTPAuthorizationCredentials"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/",
      "function": "root",
      "file": "api/baps_api.py",
      "line": 145,
      "module": "baps",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "API根路径",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/health",
      "function": "health_check",
      "file": "api/baps_api.py",
      "line": 161,
      "module": "baps",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "健康检查",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/questionnaires",
      "function": "list_questionnaires",
      "file": "api/baps_api.py",
      "line": 169,
      "module": "baps",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取所有可用问卷列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/questionnaires/{questionnaire_type}",
      "function": "get_questionnaire",
      "file": "api/baps_api.py",
      "line": 185,
      "module": "questionnaires",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取指定问卷的详细信息和题目",
      "is_async": true,
      "parameters": [
        {
          "name": "questionnaire_type",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/questionnaires/{questionnaire_type}/items",
      "function": "get_questionnaire_items",
      "file": "api/baps_api.py",
      "line": 211,
      "module": "questionnaires",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取问卷题目列表",
      "is_async": true,
      "parameters": [
        {
          "name": "questionnaire_type",
          "type": "str"
        },
        {
          "name": "dimension",
          "type": "Optional[str]"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/assess/big_five",
      "function": "assess_big_five",
      "file": "api/baps_api.py",
      "line": 235,
      "module": "assess",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "大五人格评估\n\n提交50题答案，返回五维度得分和人格画像",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "BigFiveAnswers"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/assess/bpt6",
      "function": "assess_bpt6",
      "file": "api/baps_api.py",
      "line": 250,
      "module": "assess",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "BPT-6行为模式分型评估\n\n提交18题答案，返回行为类型分类和干预建议",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "BPT6Answers"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/assess/capacity",
      "function": "assess_capacity",
      "file": "api/baps_api.py",
      "line": 265,
      "module": "assess",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "CAPACITY改变潜力诊断\n\n提交32题答案，返回8维度改变潜力评估",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "CAPACITYAnswers"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/assess/spi",
      "function": "assess_spi",
      "file": "api/baps_api.py",
      "line": 280,
      "module": "assess",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "SPI成功可能性评估\n\n提交50题答案，返回SPI指数和成功预测",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "SPIAnswers"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/assess/ttm7",
      "function": "assess_ttm7",
      "file": "api/baps_api.py",
      "line": 295,
      "module": "assess",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "TTM7改变阶段评估\n\n提交21题答案，返回行为改变阶段(S0-S6)判定和子维度分析\n结果包含去诊断化的友好展示名称",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "TTM7Answers"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/assess/comprehensive",
      "function": "assess_comprehensive",
      "file": "api/baps_api.py",
      "line": 310,
      "module": "assess",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "综合评估\n\n提交四份问卷全部答案，返回综合评估报告",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ComprehensiveAnswers"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/assess/comprehensive/markdown",
      "function": "assess_comprehensive_markdown",
      "file": "api/baps_api.py",
      "line": 334,
      "module": "assess",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "综合评估（Markdown格式）\n\n返回Markdown格式的综合评估报告",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ComprehensiveAnswers"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/assess/quick",
      "function": "quick_assess",
      "file": "api/baps_api.py",
      "line": 355,
      "module": "assess",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "快速评估\n\n通用评估接口，根据assessment_type自动路由",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "QuickAssessmentRequest"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/openapi-tools.json",
      "function": "get_dify_tools_schema",
      "file": "api/baps_api.py",
      "line": 387,
      "module": "baps",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取Dify自定义工具Schema\n\n在Dify中创建自定义工具时，导入此Schema",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/test/sample-answers/{questionnaire_type}",
      "function": "get_sample_answers",
      "file": "api/baps_api.py",
      "line": 487,
      "module": "test",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取问卷的示例答案（用于测试）",
      "is_async": true,
      "parameters": [
        {
          "name": "questionnaire_type",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/test/full-assessment",
      "function": "test_full_assessment",
      "file": "api/baps_api.py",
      "line": 513,
      "module": "test",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "完整评估测试\n\n使用模拟数据进行四份问卷的完整评估",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/knowledge/batch-upload",
      "function": "batch_upload",
      "file": "api/batch_ingestion_api.py",
      "line": 25,
      "module": "batch_ingestion",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "批量上传知识文件(multipart)",
      "is_async": true,
      "parameters": [
        {
          "name": "file",
          "type": "UploadFile"
        },
        {
          "name": "scope",
          "type": "str"
        },
        {
          "name": "domain_id",
          "type": "Optional[str]"
        },
        {
          "name": "tenant_id",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/knowledge/batch-jobs",
      "function": "list_batch_jobs",
      "file": "api/batch_ingestion_api.py",
      "line": 76,
      "module": "batch_ingestion",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出批量灌注任务",
      "is_async": false,
      "parameters": [
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/knowledge/batch-jobs/{job_id}",
      "function": "get_batch_job",
      "file": "api/batch_ingestion_api.py",
      "line": 109,
      "module": "batch-jobs",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取批量灌注任务进度",
      "is_async": false,
      "parameters": [
        {
          "name": "job_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/knowledge/batch-jobs/{job_id}",
      "function": "cancel_batch_job",
      "file": "api/batch_ingestion_api.py",
      "line": 138,
      "module": "batch-jobs",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "取消/删除批量灌注任务",
      "is_async": false,
      "parameters": [
        {
          "name": "job_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/challenges",
      "function": "list_challenges",
      "file": "api/challenge_api.py",
      "line": 191,
      "module": "challenge",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "挑战列表",
      "is_async": true,
      "parameters": [
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "category",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/challenges/my-enrollments",
      "function": "my_enrollments",
      "file": "api/challenge_api.py",
      "line": 206,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "我的挑战列表",
      "is_async": true,
      "parameters": [
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/challenges/{challenge_id}",
      "function": "get_challenge",
      "file": "api/challenge_api.py",
      "line": 232,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "挑战详情（含推送内容）",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges",
      "function": "create_challenge",
      "file": "api/challenge_api.py",
      "line": 245,
      "module": "challenge",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建挑战模板（L3+）",
      "is_async": true,
      "parameters": [
        {
          "name": "req",
          "type": "ChallengeCreateRequest"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/challenges/{challenge_id}",
      "function": "update_challenge",
      "file": "api/challenge_api.py",
      "line": 261,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新挑战模板",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "req",
          "type": "ChallengeUpdateRequest"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/import/{config_key}",
      "function": "import_challenge",
      "file": "api/challenge_api.py",
      "line": 278,
      "module": "challenges",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "从JSON配置导入挑战（admin）",
      "is_async": true,
      "parameters": [
        {
          "name": "config_key",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/challenges/{challenge_id}",
      "function": "delete_challenge",
      "file": "api/challenge_api.py",
      "line": 294,
      "module": "challenges",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除挑战模板（admin）",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/challenges/{challenge_id}/pushes",
      "function": "get_pushes",
      "file": "api/challenge_api.py",
      "line": 322,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取全部推送内容",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/challenges/{challenge_id}/pushes/day/{day_number}",
      "function": "get_day_pushes",
      "file": "api/challenge_api.py",
      "line": 333,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取指定天推送",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "day_number",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/{challenge_id}/pushes",
      "function": "add_push",
      "file": "api/challenge_api.py",
      "line": 345,
      "module": "challenges",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "添加推送内容",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "req",
          "type": "PushCreateRequest"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/challenges/pushes/{push_id}",
      "function": "update_push",
      "file": "api/challenge_api.py",
      "line": 358,
      "module": "challenges",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新推送内容",
      "is_async": true,
      "parameters": [
        {
          "name": "push_id",
          "type": "int"
        },
        {
          "name": "req",
          "type": "PushUpdateRequest"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/challenges/pushes/{push_id}",
      "function": "delete_push",
      "file": "api/challenge_api.py",
      "line": 373,
      "module": "challenges",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除推送内容",
      "is_async": true,
      "parameters": [
        {
          "name": "push_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/{challenge_id}/submit-review",
      "function": "submit_review",
      "file": "api/challenge_api.py",
      "line": 388,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交审核",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/{challenge_id}/review",
      "function": "review",
      "file": "api/challenge_api.py",
      "line": 404,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "专家审核",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "req",
          "type": "ReviewRequest"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/{challenge_id}/enroll",
      "function": "enroll_challenge",
      "file": "api/challenge_api.py",
      "line": 428,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "报名挑战",
      "is_async": true,
      "parameters": [
        {
          "name": "challenge_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/enrollments/{enrollment_id}/start",
      "function": "start_challenge",
      "file": "api/challenge_api.py",
      "line": 442,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "开始挑战",
      "is_async": true,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/enrollments/{enrollment_id}/advance",
      "function": "advance_challenge_day",
      "file": "api/challenge_api.py",
      "line": 459,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "推进到下一天",
      "is_async": true,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/challenges/enrollments/{enrollment_id}/today",
      "function": "get_today_pushes",
      "file": "api/challenge_api.py",
      "line": 476,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "今日推送内容",
      "is_async": true,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/enrollments/{enrollment_id}/read/{push_id}",
      "function": "mark_read",
      "file": "api/challenge_api.py",
      "line": 501,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "标记推送已读",
      "is_async": true,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "int"
        },
        {
          "name": "push_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/challenges/enrollments/{enrollment_id}/progress",
      "function": "get_progress",
      "file": "api/challenge_api.py",
      "line": 516,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "进度详情",
      "is_async": true,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/challenges/enrollments/{enrollment_id}/survey/{push_id}",
      "function": "submit_survey",
      "file": "api/challenge_api.py",
      "line": 539,
      "module": "challenges",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交问卷回答",
      "is_async": true,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "int"
        },
        {
          "name": "push_id",
          "type": "int"
        },
        {
          "name": "req",
          "type": "SurveySubmitRequest"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/coach/challenges/assign",
      "function": "coach_assign",
      "file": "api/challenge_api.py",
      "line": 569,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练为学员报名挑战",
      "is_async": true,
      "parameters": [
        {
          "name": "req",
          "type": "CoachAssignRequest"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/challenges/students/{student_id}",
      "function": "coach_view_student_challenges",
      "file": "api/challenge_api.py",
      "line": 587,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练查看学员挑战列表",
      "is_async": true,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Any"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/chat/sessions",
      "function": "list_sessions",
      "file": "api/chat_rest_api.py",
      "line": 63,
      "module": "chat_rest",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户的聊天会话列表",
      "is_async": false,
      "parameters": [
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/chat/sessions",
      "function": "create_session",
      "file": "api/chat_rest_api.py",
      "line": 96,
      "module": "chat_rest",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建新的聊天会话",
      "is_async": false,
      "parameters": [
        {
          "name": "request",
          "type": "CreateSessionRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/chat/sessions/{session_id}/messages",
      "function": "get_messages",
      "file": "api/chat_rest_api.py",
      "line": 129,
      "module": "sessions",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取会话消息历史",
      "is_async": false,
      "parameters": [
        {
          "name": "session_id",
          "type": "str"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "before_id",
          "type": "Optional[int]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/chat/sessions/{session_id}/messages",
      "function": "send_message",
      "file": "api/chat_rest_api.py",
      "line": 169,
      "module": "sessions",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "发送消息并获取AI回复\n\n1. 保存用户消息\n2. 调用AI助手\n3. 保存AI回复\n4. 返回完整对话",
      "is_async": true,
      "parameters": [
        {
          "name": "session_id",
          "type": "str"
        },
        {
          "name": "request",
          "type": "SendMessageRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/chat/sessions/{session_id}",
      "function": "delete_session",
      "file": "api/chat_rest_api.py",
      "line": 333,
      "module": "sessions",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除会话（软删除）",
      "is_async": false,
      "parameters": [
        {
          "name": "session_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/dashboard",
      "function": "get_coach_dashboard",
      "file": "api/coach_api.py",
      "line": 62,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练工作台 - 聚合数据\n\n返回: coach 信息、今日统计、待跟进学员列表",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students",
      "function": "list_my_students",
      "file": "api/coach_api.py",
      "line": 232,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前教练的学员列表",
      "is_async": false,
      "parameters": [
        {
          "name": "search",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students/{student_id}",
      "function": "get_student_detail",
      "file": "api/coach_api.py",
      "line": 286,
      "module": "students",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取学员详情",
      "is_async": false,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/performance",
      "function": "get_my_performance",
      "file": "api/coach_api.py",
      "line": 330,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取教练绩效数据",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students/{student_id}/behavioral-profile",
      "function": "get_student_behavioral_profile",
      "file": "api/coach_api.py",
      "line": 375,
      "module": "students",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取学员行为画像（教练完整视图）\n\n返回:\n- 行为阶段、稳定性、置信度\n- 行为类型 (BPT6) + 人格特征 (BIG5)\n- 心理层级 + 交互模式\n- 领域干预矩阵 (每个领域: 策略/语气/推荐/禁忌)\n- 改变潜力 (CAPACITY 8维度)\n- 风险标记\n- 推荐教练动作",
      "is_async": false,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students/{student_id}/assessment-detail",
      "function": "get_student_assessment_detail",
      "file": "api/coach_api.py",
      "line": 443,
      "module": "students",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "学员测评交互 - 完整测评数据\n\n返回: 学员概览, 测评记录(含详情), 前后对比, 教练消息/随访",
      "is_async": false,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/my-certification",
      "function": "get_my_certification",
      "file": "api/coach_api.py",
      "line": 773,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练认证信息\n\n返回: 当前等级、升级进度、升级要求(基于真实数据)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/my-tools-stats",
      "function": "get_my_tools_stats",
      "file": "api/coach_api.py",
      "line": 876,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练工具使用统计\n\n返回: 各工具使用次数(基于消息类型/操作类型聚合)、最近活动",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students/{student_id}/glucose",
      "function": "get_student_glucose",
      "file": "api/coach_api.py",
      "line": 1040,
      "module": "students",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练查看学员血糖数据",
      "is_async": false,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students/{student_id}/sleep",
      "function": "get_student_sleep",
      "file": "api/coach_api.py",
      "line": 1080,
      "module": "students",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练查看学员睡眠数据",
      "is_async": false,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students/{student_id}/activity",
      "function": "get_student_activity",
      "file": "api/coach_api.py",
      "line": 1124,
      "module": "students",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练查看学员运动数据",
      "is_async": false,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students/{student_id}/vitals",
      "function": "get_student_vitals",
      "file": "api/coach_api.py",
      "line": 1165,
      "module": "students",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练查看学员体征数据（体重、血压等）",
      "is_async": false,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "data_type",
          "type": "Optional[str]"
        },
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/directory",
      "function": "coach_directory",
      "file": "api/coach_api.py",
      "line": 1222,
      "module": "coach",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "公开教练/专家目录 (无需登录)\n\n返回角色为 coach 及以上的公开信息列表",
      "is_async": false,
      "parameters": [
        {
          "name": "keyword",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/coach/messages",
      "function": "send_message",
      "file": "api/coach_message_api.py",
      "line": 37,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练发消息给学员",
      "is_async": true,
      "parameters": [
        {
          "name": "body",
          "type": "SendMessageRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/messages/{student_id}",
      "function": "get_conversation",
      "file": "api/coach_message_api.py",
      "line": 65,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练查看与学员的消息历史",
      "is_async": true,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/students-with-messages",
      "function": "get_students_with_messages",
      "file": "api/coach_message_api.py",
      "line": 97,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取教练的学员列表（带最近消息和未读数）",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/messages/inbox",
      "function": "get_inbox",
      "file": "api/coach_message_api.py",
      "line": 155,
      "module": "messages",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户查看收到的教练消息",
      "is_async": true,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/messages/{message_id}/read",
      "function": "mark_read",
      "file": "api/coach_message_api.py",
      "line": 191,
      "module": "messages",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "标记消息已读",
      "is_async": true,
      "parameters": [
        {
          "name": "message_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/messages/unread-count",
      "function": "get_unread_count",
      "file": "api/coach_message_api.py",
      "line": 215,
      "module": "messages",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取未读消息数",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/push-queue/",
      "function": "list_queue_items",
      "file": "api/coach_push_queue_api.py",
      "line": 52,
      "module": "coach_push_queue",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取待审批推送列表",
      "is_async": false,
      "parameters": [
        {
          "name": "student_id",
          "type": "Optional[int]"
        },
        {
          "name": "source_type",
          "type": "Optional[str]"
        },
        {
          "name": "priority",
          "type": "Optional[str]"
        },
        {
          "name": "status",
          "type": "str"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach/push-queue/stats",
      "function": "queue_stats",
      "file": "api/coach_push_queue_api.py",
      "line": 76,
      "module": "coach_push_queue",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "各状态数量统计",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/coach/push-queue/{item_id}",
      "function": "update_queue_item",
      "file": "api/coach_push_queue_api.py",
      "line": 85,
      "module": "coach_push_queue",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "修改待审批条目的内容/时间",
      "is_async": false,
      "parameters": [
        {
          "name": "item_id",
          "type": "int"
        },
        {
          "name": "body",
          "type": "UpdateItemBody"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/coach/push-queue/{item_id}/approve",
      "function": "approve_queue_item",
      "file": "api/coach_push_queue_api.py",
      "line": 106,
      "module": "{item_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审批通过",
      "is_async": false,
      "parameters": [
        {
          "name": "item_id",
          "type": "int"
        },
        {
          "name": "body",
          "type": "ApproveBody"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/coach/push-queue/{item_id}/reject",
      "function": "reject_queue_item",
      "file": "api/coach_push_queue_api.py",
      "line": 128,
      "module": "{item_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "拒绝推送",
      "is_async": false,
      "parameters": [
        {
          "name": "item_id",
          "type": "int"
        },
        {
          "name": "body",
          "type": "RejectBody"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/coach/push-queue/batch-approve",
      "function": "batch_approve_items",
      "file": "api/coach_push_queue_api.py",
      "line": 148,
      "module": "coach_push_queue",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "批量审批通过",
      "is_async": false,
      "parameters": [
        {
          "name": "body",
          "type": "BatchApproveBody"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/companions/my-mentees",
      "function": "get_my_mentees",
      "file": "api/companion_api.py",
      "line": 22,
      "module": "companion",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取我带教的同道者列表",
      "is_async": false,
      "parameters": [
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/companions/my-mentors",
      "function": "get_my_mentors",
      "file": "api/companion_api.py",
      "line": 56,
      "module": "companion",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取我的导师列表",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/companions/stats",
      "function": "get_companion_stats",
      "file": "api/companion_api.py",
      "line": 84,
      "module": "companion",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取我的同道者统计",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/companions/invite",
      "function": "invite_mentee",
      "file": "api/companion_api.py",
      "line": 104,
      "module": "companion",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "邀请同道者(建立带教关系)",
      "is_async": false,
      "parameters": [
        {
          "name": "mentee_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/companions/all",
      "function": "admin_list_all_relations",
      "file": "api/companion_api.py",
      "line": 146,
      "module": "companion",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "管理员/教练查看所有同道者关系",
      "is_async": false,
      "parameters": [
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "mentor_id",
          "type": "Optional[int]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/companions/{relation_id}/graduate",
      "function": "graduate_mentee",
      "file": "api/companion_api.py",
      "line": 186,
      "module": "{relation_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "标记同道者毕业",
      "is_async": false,
      "parameters": [
        {
          "name": "relation_id",
          "type": "str"
        },
        {
          "name": "quality_score",
          "type": "Optional[float]"
        },
        {
          "name": "notes",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/recommended",
      "function": "get_recommended_content",
      "file": "api/content_api.py",
      "line": 245,
      "module": "content",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取推荐内容（按热度排序）",
      "is_async": false,
      "parameters": [
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/course/{course_id}",
      "function": "get_course_detail",
      "file": "api/content_api.py",
      "line": 264,
      "module": "course",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取课程详情（含等级门控）",
      "is_async": false,
      "parameters": [
        {
          "name": "course_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/course/{course_id}/enroll",
      "function": "enroll_course",
      "file": "api/content_api.py",
      "line": 287,
      "module": "course",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "报名课程",
      "is_async": false,
      "parameters": [
        {
          "name": "course_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/course/{course_id}/progress",
      "function": "update_course_progress",
      "file": "api/content_api.py",
      "line": 318,
      "module": "course",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新课程学习进度",
      "is_async": false,
      "parameters": [
        {
          "name": "course_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "LearningProgressUpdate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/video/{video_id}",
      "function": "get_video_detail",
      "file": "api/content_api.py",
      "line": 367,
      "module": "video",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取视频详情",
      "is_async": false,
      "parameters": [
        {
          "name": "video_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/video/{video_id}/quiz",
      "function": "get_video_quiz",
      "file": "api/content_api.py",
      "line": 384,
      "module": "video",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取视频配套测试",
      "is_async": false,
      "parameters": [
        {
          "name": "video_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/video/{video_id}/quiz/submit",
      "function": "submit_video_quiz",
      "file": "api/content_api.py",
      "line": 420,
      "module": "video",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交视频测试",
      "is_async": false,
      "parameters": [
        {
          "name": "video_id",
          "type": "int"
        },
        {
          "name": "submission",
          "type": "QuizSubmission"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/cases",
      "function": "get_case_list",
      "file": "api/content_api.py",
      "line": 507,
      "module": "content",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取案例列表",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "keyword",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/case/{case_id}",
      "function": "get_case_detail",
      "file": "api/content_api.py",
      "line": 546,
      "module": "case",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取案例详情",
      "is_async": false,
      "parameters": [
        {
          "name": "case_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/case",
      "function": "create_case_share",
      "file": "api/content_api.py",
      "line": 566,
      "module": "content",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建案例分享",
      "is_async": false,
      "parameters": [
        {
          "name": "case",
          "type": "CaseShareCreate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/case/{case_id}/like",
      "function": "like_case",
      "file": "api/content_api.py",
      "line": 604,
      "module": "case",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "点赞案例（复用通用 like 逻辑）",
      "is_async": false,
      "parameters": [
        {
          "name": "case_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/case/{case_id}/helpful",
      "function": "mark_case_helpful",
      "file": "api/content_api.py",
      "line": 630,
      "module": "case",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "标记案例有帮助（复用收藏逻辑）",
      "is_async": false,
      "parameters": [
        {
          "name": "case_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/user/learning-progress",
      "function": "get_user_learning_progress",
      "file": "api/content_api.py",
      "line": 660,
      "module": "user",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户学习进度",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/user/learning-progress",
      "function": "record_learning_progress",
      "file": "api/content_api.py",
      "line": 759,
      "module": "user",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "记录学习进度",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "LearningProgressUpdate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/user/learning-history",
      "function": "get_learning_history",
      "file": "api/content_api.py",
      "line": 820,
      "module": "user",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取学习历史",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "type",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/review/queue",
      "function": "get_review_queue",
      "file": "api/content_api.py",
      "line": 862,
      "module": "review",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取审核队列",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "type",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/review/submit",
      "function": "submit_review",
      "file": "api/content_api.py",
      "line": 893,
      "module": "review",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交审核决定",
      "is_async": false,
      "parameters": [
        {
          "name": "decision",
          "type": "ReviewDecision"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/detail/{content_type}/{content_id}",
      "function": "get_content_detail",
      "file": "api/content_api.py",
      "line": 921,
      "module": "detail",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取内容详情（统一接口）",
      "is_async": false,
      "parameters": [
        {
          "name": "content_type",
          "type": "str"
        },
        {
          "name": "content_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/{content_id}/comments",
      "function": "get_content_comments",
      "file": "api/content_api.py",
      "line": 952,
      "module": "{content_id}",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取内容评论",
      "is_async": false,
      "parameters": [
        {
          "name": "content_id",
          "type": "int"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "sort_by",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/{content_id}/comment",
      "function": "add_content_comment",
      "file": "api/content_api.py",
      "line": 996,
      "module": "{content_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "添加评论",
      "is_async": false,
      "parameters": [
        {
          "name": "content_id",
          "type": "int"
        },
        {
          "name": "content",
          "type": "str"
        },
        {
          "name": "rating",
          "type": "Optional[int]"
        },
        {
          "name": "parent_id",
          "type": "Optional[int]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/feed/related",
      "function": "get_related_feed",
      "file": "api/content_api.py",
      "line": 1036,
      "module": "feed",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取相关动态（最近发布的内容）",
      "is_async": false,
      "parameters": [
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "content_id",
          "type": "Optional[int]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/recommendations",
      "function": "get_content_recommendations",
      "file": "api/content_api.py",
      "line": 1067,
      "module": "content",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取推荐内容",
      "is_async": false,
      "parameters": [
        {
          "name": "content_id",
          "type": "Optional[int]"
        },
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/{content_id}/like",
      "function": "like_content",
      "file": "api/content_api.py",
      "line": 1103,
      "module": "{content_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "点赞/取消点赞内容 (toggle)",
      "is_async": false,
      "parameters": [
        {
          "name": "content_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/{content_id}/collect",
      "function": "collect_content",
      "file": "api/content_api.py",
      "line": 1135,
      "module": "{content_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "收藏/取消收藏内容 (toggle)",
      "is_async": false,
      "parameters": [
        {
          "name": "content_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content/{content_id}/share",
      "function": "share_content",
      "file": "api/content_api.py",
      "line": 1163,
      "module": "{content_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "生成分享数据",
      "is_async": false,
      "parameters": [
        {
          "name": "content_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/user/{user_id}/progress/{content_id}",
      "function": "get_user_content_progress",
      "file": "api/content_api.py",
      "line": 1188,
      "module": "user",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户对特定内容的学习进度",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "content_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content/stream/{content_id}",
      "function": "stream_content_updates",
      "file": "api/content_api.py",
      "line": 1233,
      "module": "stream",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "内容更新流（SSE）— 实时评论/统计更新",
      "is_async": true,
      "parameters": [
        {
          "name": "content_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/contributions/submit",
      "function": "submit_contribution",
      "file": "api/content_contribution_api.py",
      "line": 94,
      "module": "content_contribution",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "投稿知识内容 (grower+)",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "ContributionCreate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/contributions/my",
      "function": "list_my_contributions",
      "file": "api/content_contribution_api.py",
      "line": 132,
      "module": "content_contribution",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出我的投稿 (grower+)",
      "is_async": false,
      "parameters": [
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/contributions/my/{doc_id}",
      "function": "get_my_contribution",
      "file": "api/content_contribution_api.py",
      "line": 144,
      "module": "my",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取投稿详情 (grower+)",
      "is_async": false,
      "parameters": [
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/contributions/my/{doc_id}",
      "function": "update_my_contribution",
      "file": "api/content_contribution_api.py",
      "line": 161,
      "module": "my",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新草稿投稿 (grower+, 仅 draft/error)",
      "is_async": false,
      "parameters": [
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "ContributionUpdate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/contributions/review/pending",
      "function": "list_pending",
      "file": "api/content_contribution_api.py",
      "line": 202,
      "module": "review",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出待审核投稿 (coach+)",
      "is_async": false,
      "parameters": [
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/contributions/review/{doc_id}/approve",
      "function": "approve",
      "file": "api/content_contribution_api.py",
      "line": 213,
      "module": "review",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核通过投稿 (coach+)",
      "is_async": false,
      "parameters": [
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/contributions/review/{doc_id}/reject",
      "function": "reject",
      "file": "api/content_contribution_api.py",
      "line": 227,
      "module": "review",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核拒绝投稿 (coach+)",
      "is_async": false,
      "parameters": [
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content-manage/create",
      "function": "create_content",
      "file": "api/content_manage_api.py",
      "line": 66,
      "module": "content_manage",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建内容条目",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "ContentCreateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content-manage/batch-create",
      "function": "batch_create_content",
      "file": "api/content_manage_api.py",
      "line": 94,
      "module": "content_manage",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "批量创建内容 (JSON数组)",
      "is_async": false,
      "parameters": [
        {
          "name": "items",
          "type": "List[ContentCreateRequest]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/content-manage/list",
      "function": "list_content",
      "file": "api/content_manage_api.py",
      "line": 124,
      "module": "content_manage",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出内容",
      "is_async": false,
      "parameters": [
        {
          "name": "content_type",
          "type": "Optional[str]"
        },
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/content-manage/{item_id}",
      "function": "update_content",
      "file": "api/content_manage_api.py",
      "line": 148,
      "module": "content_manage",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "编辑内容",
      "is_async": false,
      "parameters": [
        {
          "name": "item_id",
          "type": "int"
        },
        {
          "name": "req",
          "type": "ContentUpdateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content-manage/{item_id}/publish",
      "function": "publish_content",
      "file": "api/content_manage_api.py",
      "line": 181,
      "module": "{item_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "发布单个内容",
      "is_async": false,
      "parameters": [
        {
          "name": "item_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/content-manage/batch-publish",
      "function": "batch_publish",
      "file": "api/content_manage_api.py",
      "line": 198,
      "module": "content_manage",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "批量发布",
      "is_async": false,
      "parameters": [
        {
          "name": "item_ids",
          "type": "List[int]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/content-manage/{item_id}",
      "function": "delete_content",
      "file": "api/content_manage_api.py",
      "line": 216,
      "module": "content_manage",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除内容（标记归档）",
      "is_async": false,
      "parameters": [
        {
          "name": "item_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/credits/modules",
      "function": "list_course_modules",
      "file": "api/credits_api.py",
      "line": 58,
      "module": "credits",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取课程模块列表",
      "is_async": false,
      "parameters": [
        {
          "name": "module_type",
          "type": "Optional[str]"
        },
        {
          "name": "tier",
          "type": "Optional[str]"
        },
        {
          "name": "target_role",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/credits/my",
      "function": "get_my_credits",
      "file": "api/credits_api.py",
      "line": 93,
      "module": "credits",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户学分汇总",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/credits/my/records",
      "function": "get_my_credit_records",
      "file": "api/credits_api.py",
      "line": 120,
      "module": "my",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户学分明细",
      "is_async": false,
      "parameters": [
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/credits/admin/modules",
      "function": "admin_list_modules",
      "file": "api/credits_api.py",
      "line": 143,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "管理员查看所有课程模块（含停用）",
      "is_async": false,
      "parameters": [
        {
          "name": "include_inactive",
          "type": "bool"
        },
        {
          "name": "module_type",
          "type": "Optional[str]"
        },
        {
          "name": "target_role",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/credits/admin/modules",
      "function": "admin_create_module",
      "file": "api/credits_api.py",
      "line": 184,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "管理员创建课程模块",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "ModuleCreateSchema"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/credits/admin/modules/{module_id}",
      "function": "admin_update_module",
      "file": "api/credits_api.py",
      "line": 215,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "管理员更新课程模块",
      "is_async": false,
      "parameters": [
        {
          "name": "module_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "ModuleUpdateSchema"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/credits/admin/modules/{module_id}",
      "function": "admin_delete_module",
      "file": "api/credits_api.py",
      "line": 236,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "管理员停用课程模块（软删除）",
      "is_async": false,
      "parameters": [
        {
          "name": "module_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/credits/admin/stats",
      "function": "admin_credit_stats",
      "file": "api/credits_api.py",
      "line": 253,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "管理员学分统计概览",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/alerts/my",
      "function": "get_my_alerts",
      "file": "api/device_alert_api.py",
      "line": 29,
      "module": "device_alert",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户查看自己的预警（分页）",
      "is_async": true,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "severity",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/alerts/coach",
      "function": "get_coach_alerts",
      "file": "api/device_alert_api.py",
      "line": 60,
      "module": "device_alert",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练查看学员预警（分页）",
      "is_async": true,
      "parameters": [
        {
          "name": "unread_only",
          "type": "bool"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/alerts/{alert_id}/read",
      "function": "mark_alert_read",
      "file": "api/device_alert_api.py",
      "line": 99,
      "module": "{alert_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "标记预警已读（区分 user_read / coach_read）",
      "is_async": true,
      "parameters": [
        {
          "name": "alert_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/alerts/{alert_id}/resolve",
      "function": "resolve_alert",
      "file": "api/device_alert_api.py",
      "line": 122,
      "module": "{alert_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练标记预警已处理",
      "is_async": true,
      "parameters": [
        {
          "name": "alert_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/devices",
      "function": "list_devices",
      "file": "api/device_data.py",
      "line": 211,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": "Dict[str, Any]",
      "return_type": null,
      "docstring": "获取用户已绑定的设备列表",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/devices/bind",
      "function": "bind_device",
      "file": "api/device_data.py",
      "line": 242,
      "module": "devices",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "绑定新设备",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "DeviceBindRequest"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/devices/{device_id}",
      "function": "unbind_device",
      "file": "api/device_data.py",
      "line": 297,
      "module": "devices",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "解绑设备",
      "is_async": true,
      "parameters": [
        {
          "name": "device_id",
          "type": "str"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/device/glucose/manual",
      "function": "record_glucose_manual",
      "file": "api/device_data.py",
      "line": 331,
      "module": "glucose",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "手动记录血糖",
      "is_async": true,
      "parameters": [
        {
          "name": "reading",
          "type": "GlucoseReadingInput"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/glucose",
      "function": "get_glucose_readings",
      "file": "api/device_data.py",
      "line": 378,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取血糖数据",
      "is_async": true,
      "parameters": [
        {
          "name": "start_date",
          "type": "Optional[str]"
        },
        {
          "name": "end_date",
          "type": "Optional[str]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/glucose/current",
      "function": "get_current_glucose",
      "file": "api/device_data.py",
      "line": 438,
      "module": "glucose",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取最新血糖读数",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/glucose/chart/daily",
      "function": "get_glucose_daily_chart",
      "file": "api/device_data.py",
      "line": 472,
      "module": "glucose",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取每日血糖图表数据",
      "is_async": true,
      "parameters": [
        {
          "name": "date",
          "type": "str"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/device/weight",
      "function": "record_weight",
      "file": "api/device_data.py",
      "line": 532,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "记录体重",
      "is_async": true,
      "parameters": [
        {
          "name": "data",
          "type": "WeightInput"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/weight",
      "function": "get_weight_records",
      "file": "api/device_data.py",
      "line": 573,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取体重记录",
      "is_async": true,
      "parameters": [
        {
          "name": "start_date",
          "type": "Optional[str]"
        },
        {
          "name": "end_date",
          "type": "Optional[str]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/device/blood-pressure",
      "function": "record_blood_pressure",
      "file": "api/device_data.py",
      "line": 635,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "记录血压",
      "is_async": true,
      "parameters": [
        {
          "name": "data",
          "type": "BloodPressureInput"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/blood-pressure",
      "function": "get_blood_pressure_records",
      "file": "api/device_data.py",
      "line": 684,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取血压记录",
      "is_async": true,
      "parameters": [
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/dashboard/today",
      "function": "get_today_dashboard",
      "file": "api/device_data.py",
      "line": 734,
      "module": "dashboard",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": "DashboardResponse",
      "return_type": null,
      "docstring": "获取今日健康概览",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/device/sync",
      "function": "sync_device_data",
      "file": "api/device_data.py",
      "line": 860,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "同步设备数据 (通用接口)",
      "is_async": true,
      "parameters": [
        {
          "name": "device_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "Dict[str, Any]"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/device/sync/batch",
      "function": "sync_device_data_batch",
      "file": "api/device_data.py",
      "line": 942,
      "module": "sync",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "批量同步设备数据 (增强版)\n\n支持多种数据类型:\n- glucose: 血糖数据\n- heart_rate: 心率数据\n- hrv: HRV数据\n- sleep: 睡眠数据\n- activity: 活动数据\n- workout: 运动记录",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "SyncRequest"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/sync/status/{device_id}",
      "function": "get_sync_status",
      "file": "api/device_data.py",
      "line": 1233,
      "module": "sync",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取设备同步状态",
      "is_async": true,
      "parameters": [
        {
          "name": "device_id",
          "type": "str"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/sleep",
      "function": "get_sleep_records",
      "file": "api/device_data.py",
      "line": 1282,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取睡眠记录",
      "is_async": true,
      "parameters": [
        {
          "name": "start_date",
          "type": "Optional[str]"
        },
        {
          "name": "end_date",
          "type": "Optional[str]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/sleep/last-night",
      "function": "get_last_night_sleep",
      "file": "api/device_data.py",
      "line": 1344,
      "module": "sleep",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取昨晚睡眠数据",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/activity",
      "function": "get_activity_records",
      "file": "api/device_data.py",
      "line": 1403,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取活动数据",
      "is_async": true,
      "parameters": [
        {
          "name": "date",
          "type": "Optional[str]"
        },
        {
          "name": "start_date",
          "type": "Optional[str]"
        },
        {
          "name": "end_date",
          "type": "Optional[str]"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/heart-rate",
      "function": "get_heart_rate_data",
      "file": "api/device_data.py",
      "line": 1469,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取心率数据",
      "is_async": true,
      "parameters": [
        {
          "name": "date",
          "type": "Optional[str]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/device/hrv",
      "function": "get_hrv_data",
      "file": "api/device_data.py",
      "line": 1524,
      "module": "device_data",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_current_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取 HRV 数据",
      "is_async": true,
      "parameters": [
        {
          "name": "start_date",
          "type": "Optional[str]"
        },
        {
          "name": "end_date",
          "type": "Optional[str]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/devices",
      "function": "list_devices",
      "file": "api/device_rest_api.py",
      "line": 256,
      "module": "device_rest",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "List[DeviceOut]",
      "return_type": null,
      "docstring": "Return all devices bound to the current user.\nOptionally filter by device_type or status.",
      "is_async": false,
      "parameters": [
        {
          "name": "device_type",
          "type": "Optional[DeviceType]"
        },
        {
          "name": "status_filter",
          "type": "Optional[DeviceStatus]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/devices/bind",
      "function": "bind_device",
      "file": "api/device_rest_api.py",
      "line": 286,
      "module": "devices",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "DeviceOut",
      "return_type": null,
      "docstring": "Bind a new device to the current user.\n\n- If a serial_number is provided, checks it is not already bound.\n- Generates a unique device_id automatically.\n- Initial status is PAIRING.",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "DeviceBindRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/devices/{device_id}/sync",
      "function": "trigger_device_sync",
      "file": "api/device_rest_api.py",
      "line": 346,
      "module": "devices",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "DeviceSyncResponse",
      "return_type": null,
      "docstring": "Trigger a data sync for the specified device.\n\n- Only CONNECTED or PAIRING devices may be synced.\n- Updates last_sync_at and sets status to CONNECTED.",
      "is_async": false,
      "parameters": [
        {
          "name": "device_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/devices/{device_id}",
      "function": "unbind_device",
      "file": "api/device_rest_api.py",
      "line": 400,
      "module": "devices",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "Unbind (delete) the specified device.\nOnly devices belonging to the current user may be deleted.",
      "is_async": false,
      "parameters": [
        {
          "name": "device_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/health-data/glucose",
      "function": "get_glucose_readings",
      "file": "api/device_rest_api.py",
      "line": 442,
      "module": "health-data",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "List[GlucoseOut]",
      "return_type": null,
      "docstring": "Retrieve glucose readings for the current user within the specified\nnumber of days, ordered by recorded_at descending.",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "source",
          "type": "Optional[str]"
        },
        {
          "name": "meal_tag",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/health-data/glucose",
      "function": "create_glucose_reading",
      "file": "api/device_rest_api.py",
      "line": 481,
      "module": "health-data",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "GlucoseOut",
      "return_type": null,
      "docstring": "Manually record a single glucose reading.\n\n- source is always set to \"manual\".\n- If recorded_at is omitted, the current UTC time is used.",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "GlucoseCreateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/health-data/sleep",
      "function": "get_sleep_records",
      "file": "api/device_rest_api.py",
      "line": 544,
      "module": "health-data",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "List[SleepOut]",
      "return_type": null,
      "docstring": "Retrieve sleep records for the current user within the specified\nnumber of days, ordered by sleep_date descending.",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/health-data/activity",
      "function": "get_activity_records",
      "file": "api/device_rest_api.py",
      "line": 580,
      "module": "health-data",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "List[ActivityOut]",
      "return_type": null,
      "docstring": "Retrieve daily activity records for the current user within the\nspecified number of days, ordered by activity_date descending.",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/health-data/vitals",
      "function": "get_vital_signs",
      "file": "api/device_rest_api.py",
      "line": 616,
      "module": "health-data",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "List[VitalSignOut]",
      "return_type": null,
      "docstring": "Retrieve vital sign records (weight, blood pressure, temperature, SpO2)\nfor the current user, ordered by recorded_at descending.\n\n- Omit data_type to return all types.\n- Defaults to the last 30 days, ",
      "is_async": false,
      "parameters": [
        {
          "name": "data_type",
          "type": "Optional[str]"
        },
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/health-data/vitals",
      "function": "create_vital_sign",
      "file": "api/device_rest_api.py",
      "line": 666,
      "module": "health-data",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "VitalSignOut",
      "return_type": null,
      "docstring": "Manually record a single vital sign measurement.\n\nPopulate the relevant fields based on data_type:\n- weight: weight_kg, bmi, body_fat_percent, etc.\n- blood_pressure: systolic, diastolic, pulse\n- tempe",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "VitalSignCreateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/health-data/summary",
      "function": "get_health_summary",
      "file": "api/device_rest_api.py",
      "line": 721,
      "module": "health-data",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "DashboardSummary",
      "return_type": null,
      "docstring": "Aggregate the user's key health metrics into a single dashboard payload:\n\n- **latest_glucose** - most recent glucose reading (value, unit, trend, time)\n- **sleep_score** - most recent night's sleep sc",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/device/cgm/sync",
      "function": "handle_cgm_sync",
      "file": "api/device_trigger.py",
      "line": 12,
      "module": "device",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": true,
      "parameters": [
        {
          "name": "payload",
          "type": "dict"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/certification/exams/{exam_id}",
      "function": "get_exam",
      "file": "api/exam_api.py",
      "line": 111,
      "module": "exam",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取考试详情",
      "is_async": false,
      "parameters": [
        {
          "name": "exam_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/certification/exams/{exam_id}",
      "function": "update_exam",
      "file": "api/exam_api.py",
      "line": 124,
      "module": "exam",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新考试",
      "is_async": false,
      "parameters": [
        {
          "name": "exam_id",
          "type": "str"
        },
        {
          "name": "req",
          "type": "ExamUpdateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/certification/exams/{exam_id}",
      "function": "delete_exam",
      "file": "api/exam_api.py",
      "line": 148,
      "module": "exam",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除考试(归档)",
      "is_async": false,
      "parameters": [
        {
          "name": "exam_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/certification/exams/{exam_id}/questions",
      "function": "assign_questions",
      "file": "api/exam_api.py",
      "line": 164,
      "module": "{exam_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "分配题目到考试",
      "is_async": false,
      "parameters": [
        {
          "name": "exam_id",
          "type": "str"
        },
        {
          "name": "question_ids",
          "type": "List[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/certification/exams/{exam_id}/publish",
      "function": "publish_exam",
      "file": "api/exam_api.py",
      "line": 181,
      "module": "{exam_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "发布考试",
      "is_async": false,
      "parameters": [
        {
          "name": "exam_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/certification/sessions/start",
      "function": "start_exam",
      "file": "api/exam_session_api.py",
      "line": 27,
      "module": "exam_session",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "开始考试: 返回题目列表(不含答案)",
      "is_async": false,
      "parameters": [
        {
          "name": "exam_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/certification/sessions/submit",
      "function": "submit_exam",
      "file": "api/exam_session_api.py",
      "line": 72,
      "module": "exam_session",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交考试 → 自动评分",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "ExamSubmitRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/certification/sessions/{result_id}/result",
      "function": "get_result",
      "file": "api/exam_session_api.py",
      "line": 162,
      "module": "{result_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取考试结果",
      "is_async": false,
      "parameters": [
        {
          "name": "result_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/certification/sessions/my-results",
      "function": "my_results",
      "file": "api/exam_session_api.py",
      "line": 207,
      "module": "exam_session",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "我的考试历史",
      "is_async": false,
      "parameters": [
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/tenants/{tenant_id}/my-agents",
      "function": "create_agent",
      "file": "api/expert_agent_api.py",
      "line": 93,
      "module": "tenants",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建专家自定义 Agent (dynamic_llm 模板 + TenantAgentMapping)",
      "is_async": true,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "req",
          "type": "CreateAgentRequest"
        },
        {
          "name": "current_user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/my-agents",
      "function": "list_my_agents",
      "file": "api/expert_agent_api.py",
      "line": 172,
      "module": "tenants",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出专家自己的 Agent (含预置 + 自建)",
      "is_async": true,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "current_user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/tenants/{tenant_id}/my-agents/{agent_id}",
      "function": "update_agent",
      "file": "api/expert_agent_api.py",
      "line": 210,
      "module": "tenants",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新 Agent 的 prompt/keywords/correlations",
      "is_async": true,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "req",
          "type": "UpdateAgentRequest"
        },
        {
          "name": "current_user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/tenants/{tenant_id}/my-agents/{agent_id}/toggle",
      "function": "toggle_agent",
      "file": "api/expert_agent_api.py",
      "line": 256,
      "module": "tenants",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "启用/停用 Agent (crisis 不可停用)",
      "is_async": true,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "current_user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/tenants/{tenant_id}/my-agents/test-routing",
      "function": "test_routing",
      "file": "api/expert_agent_api.py",
      "line": 297,
      "module": "tenants",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "测试路由 (dry-run): 对比平台默认 vs 租户定制路由结果",
      "is_async": true,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "req",
          "type": "TestRoutingRequest"
        },
        {
          "name": "current_user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/tenants/{tenant_id}/my-agents/{agent_id}",
      "function": "delete_agent",
      "file": "api/expert_agent_api.py",
      "line": 357,
      "module": "tenants",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除专家自建 Agent (仅非预置)",
      "is_async": true,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "current_user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/content/documents",
      "function": "api_list_documents",
      "file": "api/expert_content_api.py",
      "line": 109,
      "module": "expert_content",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出知识文档",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "keyword",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/tenants/{tenant_id}/content/documents",
      "function": "api_create_document",
      "file": "api/expert_content_api.py",
      "line": 128,
      "module": "expert_content",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建草稿文档",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "DocumentCreate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}",
      "function": "api_get_document",
      "file": "api/expert_content_api.py",
      "line": 167,
      "module": "documents",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取文档详情（含 raw_content）",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}",
      "function": "api_update_document",
      "file": "api/expert_content_api.py",
      "line": 182,
      "module": "documents",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新草稿文档",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "DocumentUpdate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}/publish",
      "function": "api_publish_document",
      "file": "api/expert_content_api.py",
      "line": 222,
      "module": "documents",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "发布文档（分块 + 嵌入）",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}/unpublish",
      "function": "api_unpublish_document",
      "file": "api/expert_content_api.py",
      "line": 244,
      "module": "documents",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "撤回文档",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}",
      "function": "api_delete_document",
      "file": "api/expert_content_api.py",
      "line": 260,
      "module": "documents",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除文档",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "doc_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/content/challenges",
      "function": "api_list_challenges",
      "file": "api/expert_content_api.py",
      "line": 280,
      "module": "expert_content",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出本专家创建的挑战模板",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/expert-registration/domains",
      "function": "get_domains",
      "file": "api/expert_registration_api.py",
      "line": 191,
      "module": "expert_registration",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取领域列表 + 推荐 Agent (公开)",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/expert-registration/upload-credential",
      "function": "upload_credential_image",
      "file": "api/expert_registration_api.py",
      "line": 213,
      "module": "expert_registration",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "上传资质证书图片，返回 URL",
      "is_async": true,
      "parameters": [
        {
          "name": "file",
          "type": "UploadFile"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/expert-registration/apply",
      "function": "apply_registration",
      "file": "api/expert_registration_api.py",
      "line": 238,
      "module": "expert_registration",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交专家入驻申请",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "ApplyRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/expert-registration/my-application",
      "function": "get_my_application",
      "file": "api/expert_registration_api.py",
      "line": 366,
      "module": "expert_registration",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查询当前用户的入驻申请状态",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/expert-registration/my-application",
      "function": "update_my_application",
      "file": "api/expert_registration_api.py",
      "line": 396,
      "module": "expert_registration",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "修改入驻申请 (仅 pending_review 可改)",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "ApplicationUpdateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/expert-registration/admin/applications",
      "function": "list_applications",
      "file": "api/expert_registration_api.py",
      "line": 453,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "列出专家入驻申请",
      "is_async": false,
      "parameters": [
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/expert-registration/admin/applications/{tenant_id}",
      "function": "get_application_detail",
      "file": "api/expert_registration_api.py",
      "line": 480,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查看申请详情",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/expert-registration/admin/applications/{tenant_id}/approve",
      "function": "approve_application",
      "file": "api/expert_registration_api.py",
      "line": 514,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核通过入驻申请",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/expert-registration/admin/applications/{tenant_id}/reject",
      "function": "reject_application",
      "file": "api/expert_registration_api.py",
      "line": 572,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核拒绝入驻申请",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "RejectRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/food/recognize",
      "function": "recognize_food",
      "file": "api/food_recognition_api.py",
      "line": 93,
      "module": "food_recognition",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "食物拍照识别\n\n上传食物图片，AI 分析营养成分并给出饮食建议。\n- 支持 jpg/png/webp/bmp，最大 5MB\n- meal_type 可选: breakfast / lunch / dinner / snack",
      "is_async": true,
      "parameters": [
        {
          "name": "file",
          "type": "UploadFile"
        },
        {
          "name": "meal_type",
          "type": "Optional[str]"
        },
        {
          "name": "current_user",
          "type": "Any"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/food/history",
      "function": "food_history",
      "file": "api/food_recognition_api.py",
      "line": 198,
      "module": "food_recognition",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户的食物分析历史",
      "is_async": true,
      "parameters": [
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "offset",
          "type": "int"
        },
        {
          "name": "current_user",
          "type": "Any"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/high-freq-questions/presets",
      "function": "list_presets",
      "file": "api/high_freq_api.py",
      "line": 27,
      "module": "high_freq",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "列出可用的高频题目预设",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/high-freq-questions/all",
      "function": "get_all_questions",
      "file": "api/high_freq_api.py",
      "line": 33,
      "module": "high_freq",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取所有171题（供自选模式使用）",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/high-freq-questions/by-ids",
      "function": "get_questions_by_ids",
      "file": "api/high_freq_api.py",
      "line": 40,
      "module": "high_freq",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "根据题目ID列表获取完整题目信息",
      "is_async": true,
      "parameters": [
        {
          "name": "ids",
          "type": "List[str]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/high-freq-questions/{preset}",
      "function": "get_preset_items",
      "file": "api/high_freq_api.py",
      "line": 47,
      "module": "high_freq",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取某预设的完整题目列表（含题目文本+选项）",
      "is_async": true,
      "parameters": [
        {
          "name": "preset",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/knowledge/docs",
      "function": "list_documents",
      "file": "api/knowledge.py",
      "line": 38,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "文档列表",
      "is_async": true,
      "parameters": [
        {
          "name": "scope",
          "type": "Optional[str]"
        },
        {
          "name": "domain_id",
          "type": "Optional[str]"
        },
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/knowledge/docs/upload",
      "function": "upload_document",
      "file": "api/knowledge.py",
      "line": 50,
      "module": "docs",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "上传并入库文档",
      "is_async": true,
      "parameters": [
        {
          "name": "file",
          "type": "UploadFile"
        },
        {
          "name": "scope",
          "type": "str"
        },
        {
          "name": "domain_id",
          "type": "str"
        },
        {
          "name": "tenant_id",
          "type": "Optional[str]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/knowledge/docs/{doc_id}",
      "function": "get_document",
      "file": "api/knowledge.py",
      "line": 63,
      "module": "docs",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "文档详情",
      "is_async": true,
      "parameters": [
        {
          "name": "doc_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/knowledge/docs/{doc_id}",
      "function": "delete_document",
      "file": "api/knowledge.py",
      "line": 69,
      "module": "docs",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "删除文档",
      "is_async": true,
      "parameters": [
        {
          "name": "doc_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/knowledge/search",
      "function": "search_knowledge",
      "file": "api/knowledge.py",
      "line": 75,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "SearchResponse",
      "return_type": null,
      "docstring": "语义检索",
      "is_async": true,
      "parameters": [
        {
          "name": "q",
          "type": "str"
        },
        {
          "name": "scope",
          "type": "Optional[str]"
        },
        {
          "name": "domain_id",
          "type": "Optional[str]"
        },
        {
          "name": "top_k",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/knowledge/domains",
      "function": "list_domains",
      "file": "api/knowledge.py",
      "line": 86,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "领域列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/knowledge/stats",
      "function": "knowledge_stats",
      "file": "api/knowledge.py",
      "line": 99,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "知识库统计",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/knowledge-sharing/contribute",
      "function": "contribute_knowledge",
      "file": "api/knowledge_sharing_api.py",
      "line": 48,
      "module": "knowledge_sharing",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交知识共享申请 — 将私有文档贡献到领域共享池",
      "is_async": false,
      "parameters": [
        {
          "name": "data",
          "type": "ContributeRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/knowledge-sharing/my-contributions",
      "function": "my_contributions",
      "file": "api/knowledge_sharing_api.py",
      "line": 80,
      "module": "knowledge_sharing",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查询我的知识贡献记录",
      "is_async": false,
      "parameters": [
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/knowledge-sharing/{contribution_id}/revoke",
      "function": "revoke_contribution",
      "file": "api/knowledge_sharing_api.py",
      "line": 108,
      "module": "{contribution_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "撤回已共享的知识 — 恢复为私有",
      "is_async": false,
      "parameters": [
        {
          "name": "contribution_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/knowledge-sharing/review-queue",
      "function": "review_queue",
      "file": "api/knowledge_sharing_api.py",
      "line": 131,
      "module": "knowledge_sharing",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取待审核贡献队列",
      "is_async": false,
      "parameters": [
        {
          "name": "domain_id",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/knowledge-sharing/{contribution_id}/approve",
      "function": "approve_contribution_endpoint",
      "file": "api/knowledge_sharing_api.py",
      "line": 152,
      "module": "{contribution_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核通过知识贡献 — 文档 scope 从 tenant → domain",
      "is_async": false,
      "parameters": [
        {
          "name": "contribution_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "ReviewRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/knowledge-sharing/{contribution_id}/reject",
      "function": "reject_contribution_endpoint",
      "file": "api/knowledge_sharing_api.py",
      "line": 175,
      "module": "{contribution_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核拒绝知识贡献",
      "is_async": false,
      "parameters": [
        {
          "name": "contribution_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "ReviewRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/knowledge-sharing/domain-pool",
      "function": "domain_pool",
      "file": "api/knowledge_sharing_api.py",
      "line": 200,
      "module": "knowledge_sharing",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查询领域共享知识库",
      "is_async": false,
      "parameters": [
        {
          "name": "domain_id",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/knowledge-sharing/stats",
      "function": "sharing_stats",
      "file": "api/knowledge_sharing_api.py",
      "line": 221,
      "module": "knowledge_sharing",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "知识共享统计",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/knowledge-sharing/domains",
      "function": "list_domains",
      "file": "api/knowledge_sharing_api.py",
      "line": 233,
      "module": "knowledge_sharing",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "可用知识领域列表",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/coach/points/{user_id}",
      "function": "get_coach_points",
      "file": "api/learning_api.py",
      "line": 183,
      "module": "coach",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取教练积分详情（三积分体系）",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/coach/points/{user_id}/history",
      "function": "get_coach_points_history",
      "file": "api/learning_api.py",
      "line": 246,
      "module": "coach",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取教练积分历史",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "category",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/learning/coach/points/add",
      "function": "add_coach_points",
      "file": "api/learning_api.py",
      "line": 284,
      "module": "coach",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "添加教练积分",
      "is_async": false,
      "parameters": [
        {
          "name": "event",
          "type": "LearningEvent"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/grower/stats/{user_id}",
      "function": "get_grower_stats",
      "file": "api/learning_api.py",
      "line": 325,
      "module": "grower",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取成长者学习统计（时长+积分分开）",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/grower/time/{user_id}",
      "function": "get_grower_time",
      "file": "api/learning_api.py",
      "line": 395,
      "module": "grower",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取成长者学习时长（单独）",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/grower/points/{user_id}",
      "function": "get_grower_points",
      "file": "api/learning_api.py",
      "line": 459,
      "module": "grower",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取成长者学习积分（测试积分，单独）",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/learning/grower/points/add",
      "function": "add_grower_quiz_points",
      "file": "api/learning_api.py",
      "line": 508,
      "module": "grower",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "添加成长者测试积分",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "quiz_id",
          "type": "str"
        },
        {
          "name": "score",
          "type": "int"
        },
        {
          "name": "correct_count",
          "type": "int"
        },
        {
          "name": "total_count",
          "type": "int"
        },
        {
          "name": "is_first_try",
          "type": "bool"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/grower/time/{user_id}/history",
      "function": "get_grower_time_history",
      "file": "api/learning_api.py",
      "line": 562,
      "module": "grower",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取成长者学习时长历史",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "start_date",
          "type": "Optional[str]"
        },
        {
          "name": "end_date",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/learning/grower/time/add",
      "function": "add_grower_time",
      "file": "api/learning_api.py",
      "line": 617,
      "module": "grower",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "添加成长者学习时长",
      "is_async": false,
      "parameters": [
        {
          "name": "event",
          "type": "LearningEvent"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/grower/streak/{user_id}",
      "function": "get_grower_streak",
      "file": "api/learning_api.py",
      "line": 652,
      "module": "grower",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取成长者连续学习记录",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/rewards/{user_id}",
      "function": "get_user_rewards",
      "file": "api/learning_api.py",
      "line": 687,
      "module": "rewards",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户奖励列表",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "user_type",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/learning/rewards/claim",
      "function": "claim_reward",
      "file": "api/learning_api.py",
      "line": 750,
      "module": "rewards",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "领取奖励",
      "is_async": false,
      "parameters": [
        {
          "name": "claim",
          "type": "RewardClaim"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/leaderboard/coaches",
      "function": "get_coach_leaderboard",
      "file": "api/learning_api.py",
      "line": 777,
      "module": "leaderboard",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练积分排行榜",
      "is_async": false,
      "parameters": [
        {
          "name": "period",
          "type": "str"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/learning/leaderboard/growers",
      "function": "get_grower_leaderboard",
      "file": "api/learning_api.py",
      "line": 821,
      "module": "leaderboard",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "成长者学习时长排行榜",
      "is_async": false,
      "parameters": [
        {
          "name": "period",
          "type": "str"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/learning/event",
      "function": "handle_learning_event",
      "file": "api/learning_api.py",
      "line": 851,
      "module": "learning",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "处理学习事件（统一入口）— 写入真实 DB",
      "is_async": false,
      "parameters": [
        {
          "name": "event",
          "type": "LearningEvent"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/chat",
      "function": "chat_endpoint",
      "file": "api/main-old.py",
      "line": 79,
      "module": "chat",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": true,
      "parameters": [
        {
          "name": "message",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/health",
      "function": "health_check",
      "file": "api/main-old.py",
      "line": 91,
      "module": "main-old",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/dispatch",
      "function": "dispatch_request",
      "file": "api/main.py",
      "line": 587,
      "module": "dispatch",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "行健行为教练分发中心：根据模式选择路由",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "str"
        },
        {
          "name": "message",
          "type": "str"
        },
        {
          "name": "mode",
          "type": "str"
        },
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "tenant_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/health",
      "function": "health",
      "file": "api/main.py",
      "line": 661,
      "module": "main",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "基础健康检查（快速）",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/health",
      "function": "comprehensive_health",
      "file": "api/main.py",
      "line": 667,
      "module": "health",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "综合健康检查（检测所有依赖）",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/experts",
      "function": "get_experts",
      "file": "api/main.py",
      "line": 675,
      "module": "experts",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取可用专家列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/dashboard/{user_id}",
      "function": "get_dashboard",
      "file": "api/main.py",
      "line": 687,
      "module": "dashboard",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户个人看板数据",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/decompose",
      "function": "decompose_tasks",
      "file": "api/main.py",
      "line": 718,
      "module": "decompose",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "根据用户消息和效能感分解任务",
      "is_async": true,
      "parameters": [
        {
          "name": "message",
          "type": "str"
        },
        {
          "name": "efficacy_score",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/orchestrator/process",
      "function": "orchestrator_process",
      "file": "api/main.py",
      "line": 754,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "OrchestratorResponse",
      "return_type": null,
      "docstring": "Master Agent 核心处理接口\n\n完整 9 步流程:\n1. Input Handler - 输入处理\n2. Profile Manager - 画像管理\n3. Risk Analyzer - 风险分析\n4. Agent Router - Agent 路由\n5. Multi-Agent Coordinator - 多 Agent 协调\n6. Intervention Planner - 干预",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "OrchestratorRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/orchestrator/briefing",
      "function": "get_daily_briefing",
      "file": "api/main.py",
      "line": 822,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取每日简报\n\n返回格式:\n{\n  \"user_id\": \"U12345\",\n  \"date\": \"2026-01-23\",\n  \"tasks\": [\"今晚22:30前上床\", ...],\n  \"coach_message\": \"今晚我们先从规律作息开始...\"\n}",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "DailyBriefingRequest"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/orchestrator/briefing/{user_id}/message",
      "function": "get_daily_message",
      "file": "api/main.py",
      "line": 846,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取格式化的每日推送消息",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/orchestrator/agent-task",
      "function": "execute_agent_task",
      "file": "api/main.py",
      "line": 860,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "执行单个 Agent 任务\n\n支持的 Agent 类型:\n- SleepAgent: 睡眠分析\n- GlucoseAgent: 血糖分析\n- StressAgent: 压力分析\n- NutritionAgent: 营养分析\n- MentalHealthAgent: 心理健康",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "AgentTaskRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/orchestrator/action-plan",
      "function": "create_action_plan",
      "file": "api/main.py",
      "line": 891,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "创建行动计划\n\n返回阶段性干预方案，包含:\n- goal: 干预目标\n- phase: 当前阶段\n- actions: 行动项列表\n- evaluation: 评估标准",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ActionPlanRequest"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/orchestrator/action-plan/{user_id}/phased",
      "function": "get_phased_plan",
      "file": "api/main.py",
      "line": 926,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取多阶段行动计划",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "str"
        },
        {
          "name": "goal",
          "type": "str"
        },
        {
          "name": "weeks",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/orchestrator/profile/{user_id}",
      "function": "get_user_profile",
      "file": "api/main.py",
      "line": 946,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户画像",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/orchestrator/device-sync",
      "function": "sync_device_data",
      "file": "api/main.py",
      "line": 960,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "同步穿戴设备数据",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "str"
        },
        {
          "name": "device_data",
          "type": "DeviceDataInput"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/orchestrator/coordinate",
      "function": "coordinate_agents",
      "file": "api/main.py",
      "line": 999,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "协调多个 Agent 结果 - 冲突消解 + 权重融合\n\n输入: 多个 Agent 的分析结果\n输出: 融合后的统一分析\n\n示例请求:\n{\n  \"agent_results\": [\n    {\"agent\": \"GlucoseAgent\", \"analysis\": \"血糖偏高\", \"risk_level\": \"medium\", \"suggestions\": [\"控制饮食\"]},\n    {\"age",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "CoordinateRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/orchestrator/route",
      "function": "route_agents",
      "file": "api/main.py",
      "line": 1032,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "Agent 路由 - 选择最合适的 Agent 组合\n\n返回格式:\n[\n  {\"agent\": \"GlucoseAgent\", \"priority\": 1},\n  {\"agent\": \"SleepAgent\", \"priority\": 2}\n]",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "RouteRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/orchestrator/route/detailed",
      "function": "route_agents_detailed",
      "file": "api/main.py",
      "line": 1076,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "Agent 路由 (详细版) - 返回完整路由信息",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "RouteRequest"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/orchestrator/status",
      "function": "orchestrator_status",
      "file": "api/main.py",
      "line": 1114,
      "module": "orchestrator",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取 Orchestrator 状态",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/brain/evaluate",
      "function": "brain_evaluate",
      "file": "api/main.py",
      "line": 1197,
      "module": "brain",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "TTM 阶段跃迁判定入口\n\n- X-Source-UI: UI-1 → SOP 6.2 防火墙静默\n- X-Source-UI: UI-3 等 → 进入大脑判定 + L6 叙事重写\n- 数据库写入通过 BackgroundTasks 异步执行，不阻塞响应",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "BrainEvaluateRequest"
        },
        {
          "name": "background_tasks",
          "type": "BackgroundTasks"
        },
        {
          "name": "x_source_ui",
          "type": "Optional[str]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/micro-actions/today",
      "function": "get_today_tasks",
      "file": "api/micro_action_api.py",
      "line": 45,
      "module": "micro_action",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取今日微行动任务列表\n\n如果今日还没有任务，会自动基于用户的干预计划生成",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/micro-actions/{task_id}/complete",
      "function": "complete_task",
      "file": "api/micro_action_api.py",
      "line": 63,
      "module": "{task_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "完成一个微行动任务",
      "is_async": true,
      "parameters": [
        {
          "name": "task_id",
          "type": "int"
        },
        {
          "name": "body",
          "type": "CompleteRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/micro-actions/{task_id}/skip",
      "function": "skip_task",
      "file": "api/micro_action_api.py",
      "line": 86,
      "module": "{task_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "跳过一个微行动任务",
      "is_async": true,
      "parameters": [
        {
          "name": "task_id",
          "type": "int"
        },
        {
          "name": "body",
          "type": "SkipRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/micro-actions/history",
      "function": "get_task_history",
      "file": "api/micro_action_api.py",
      "line": 108,
      "module": "micro_action",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取微行动历史记录（分页，按日期筛选）",
      "is_async": true,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "date_from",
          "type": "Optional[str]"
        },
        {
          "name": "date_to",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/micro-actions/stats",
      "function": "get_task_stats",
      "file": "api/micro_action_api.py",
      "line": 125,
      "module": "micro_action",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取统计数据：连续天数/完成率/领域分布",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/micro-actions/facts",
      "function": "get_behavior_facts",
      "file": "api/micro_action_api.py",
      "line": 134,
      "module": "micro_action",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取行为事实（供 StageRuntime 使用）",
      "is_async": true,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/mp/task/today",
      "function": "get_today_task",
      "file": "api/miniprogram.py",
      "line": 389,
      "module": "task",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": "TodayTaskResponse",
      "return_type": null,
      "docstring": "获取今日任务与状态\n\n返回当前阶段、天数、任务、焦点等信息",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/mp/task/feedback",
      "function": "submit_task_feedback",
      "file": "api/miniprogram.py",
      "line": 433,
      "module": "task",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": "TaskFeedbackResponse",
      "return_type": null,
      "docstring": "提交任务反馈\n\n触发状态机流转，返回Agent响应和下一阶段",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "TaskFeedbackRequest"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/mp/agent/respond",
      "function": "agent_respond",
      "file": "api/miniprogram.py",
      "line": 513,
      "module": "agent",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": "AgentResponse",
      "return_type": null,
      "docstring": "Agent AI响应\n\n根据阶段和事件生成个性化响应\n支持 LLM (Ollama) 和模板回退",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "AgentRequest"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/mp/user/state",
      "function": "get_user_state_api",
      "file": "api/miniprogram.py",
      "line": 605,
      "module": "user",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": "UserStateResponse",
      "return_type": null,
      "docstring": "获取用户状态",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/mp/user/mode",
      "function": "set_user_mode",
      "file": "api/miniprogram.py",
      "line": 633,
      "module": "user",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "设置用户模式\n\n- pilot: 正常模式\n- training: 训练模式（显示Prompt逻辑）",
      "is_async": true,
      "parameters": [
        {
          "name": "mode",
          "type": "str"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/mp/progress/summary",
      "function": "get_progress_summary",
      "file": "api/miniprogram.py",
      "line": 656,
      "module": "progress",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取进度摘要",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/mp/risk/status",
      "function": "get_risk_status",
      "file": "api/miniprogram.py",
      "line": 680,
      "module": "risk",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取风险状态",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/mp/llm/health",
      "function": "llm_health_check",
      "file": "api/miniprogram.py",
      "line": 728,
      "module": "llm",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "检查 LLM 服务健康状态\n\n返回 Ollama 和 Dify 服务状态",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/mp/chat",
      "function": "chat_with_agent",
      "file": "api/miniprogram.py",
      "line": 784,
      "module": "miniprogram",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": "ChatResponse",
      "return_type": null,
      "docstring": "与 AI 健康教练对话\n\n非流式响应，支持 Dify / Ollama 双模式路由和历史记录持久化",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ChatRequest"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/mp/chat/stream",
      "function": "chat_stream",
      "file": "api/miniprogram.py",
      "line": 894,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "与 AI 健康教练对话（流式）\n\n返回 SSE 流，支持 Dify / Ollama 双模式路由",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ChatRequest"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/mp/chat/history/{session_id}",
      "function": "get_chat_history",
      "file": "api/miniprogram.py",
      "line": 1003,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取聊天历史记录\n\nArgs:\n    session_id: 会话ID\n    limit: 返回消息数量限制",
      "is_async": true,
      "parameters": [
        {
          "name": "session_id",
          "type": "str"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/mp/chat/sessions",
      "function": "get_user_chat_sessions",
      "file": "api/miniprogram.py",
      "line": 1039,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户的所有聊天会话",
      "is_async": true,
      "parameters": [
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/mp/chat/session/{session_id}",
      "function": "delete_chat_session",
      "file": "api/miniprogram.py",
      "line": 1069,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除聊天会话",
      "is_async": true,
      "parameters": [
        {
          "name": "session_id",
          "type": "str"
        },
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/mp/chat/history",
      "function": "clear_user_chat_history",
      "file": "api/miniprogram.py",
      "line": 1089,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_mp_user",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "清空用户所有聊天历史",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach-levels/levels",
      "function": "get_coach_levels",
      "file": "api/paths_api.py",
      "line": 74,
      "module": "paths",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取行为健康教练六级四同道者体系",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/coach-levels/modules",
      "function": "get_coach_learning_modules",
      "file": "api/paths_api.py",
      "line": 239,
      "module": "paths",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取教练学习模块",
      "is_async": true,
      "parameters": [
        {
          "name": "level",
          "type": "Optional[int]"
        },
        {
          "name": "category",
          "type": "Optional[str]"
        },
        {
          "name": "user_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach-levels/progress",
      "function": "get_coach_progress",
      "file": "api/paths_api.py",
      "line": 305,
      "module": "paths",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取教练成长进度（六级四同道者体系）— 真实 DB",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach-levels/practice-records",
      "function": "get_practice_records",
      "file": "api/paths_api.py",
      "line": 396,
      "module": "paths",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取实践记录 — 真实 DB（基于学习时长日志）",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach-levels/companions",
      "function": "get_companions_progress",
      "file": "api/paths_api.py",
      "line": 438,
      "module": "paths",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取四同道者培养进度 — 真实 DB",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/coach-levels/overview",
      "function": "get_six_level_overview",
      "file": "api/paths_api.py",
      "line": 525,
      "module": "paths",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取六级体系概览",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/policy/rules",
      "function": "list_rules",
      "file": "api/policy_api.py",
      "line": 66,
      "module": "policy",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查询策略规则列表",
      "is_async": false,
      "parameters": [
        {
          "name": "rule_type",
          "type": "Optional[str]"
        },
        {
          "name": "tenant_id",
          "type": "Optional[str]"
        },
        {
          "name": "is_enabled",
          "type": "bool"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "per_page",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/policy/rules",
      "function": "create_rule",
      "file": "api/policy_api.py",
      "line": 117,
      "module": "policy",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建新策略规则",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "RuleCreateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/policy/rules/{rule_id}",
      "function": "update_rule",
      "file": "api/policy_api.py",
      "line": 132,
      "module": "rules",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新策略规则",
      "is_async": false,
      "parameters": [
        {
          "name": "rule_id",
          "type": "int"
        },
        {
          "name": "req",
          "type": "RuleUpdateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/policy/rules/{rule_id}",
      "function": "delete_rule",
      "file": "api/policy_api.py",
      "line": 151,
      "module": "rules",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除策略规则",
      "is_async": false,
      "parameters": [
        {
          "name": "rule_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/policy/rules/{rule_id}/test",
      "function": "test_rule",
      "file": "api/policy_api.py",
      "line": 173,
      "module": "rules",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "测试规则: 给定上下文, 返回匹配结果",
      "is_async": false,
      "parameters": [
        {
          "name": "rule_id",
          "type": "int"
        },
        {
          "name": "req",
          "type": "RuleTestRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/policy/simulate",
      "function": "simulate_policy",
      "file": "api/policy_api.py",
      "line": 190,
      "module": "policy",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "完整策略模拟: 给定Event和Context, 返回ExecutionPlan\n不实际执行Agent, 仅返回决策结果",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "SimulateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/policy/traces/user/{user_id}",
      "function": "get_user_traces",
      "file": "api/policy_api.py",
      "line": 239,
      "module": "traces",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查询用户的决策历史",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "offset",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/policy/traces/{trace_id}",
      "function": "get_trace_detail",
      "file": "api/policy_api.py",
      "line": 256,
      "module": "traces",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取可解释的决策追踪详情 (含自然语言说明)",
      "is_async": false,
      "parameters": [
        {
          "name": "trace_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/policy/traces/agent/{agent_id}/stats",
      "function": "get_agent_trace_stats",
      "file": "api/policy_api.py",
      "line": 274,
      "module": "traces",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查询某Agent的决策统计 — 专家用: '为什么我的Agent没被触发?'",
      "is_async": false,
      "parameters": [
        {
          "name": "agent_id",
          "type": "str"
        },
        {
          "name": "tenant_id",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/policy/cost/report",
      "function": "get_cost_report",
      "file": "api/policy_api.py",
      "line": 294,
      "module": "cost",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取成本使用报告",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "user_id",
          "type": "Optional[int]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/policy/rules/refresh",
      "function": "refresh_rules",
      "file": "api/policy_api.py",
      "line": 314,
      "module": "rules",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "触发规则热刷新 (无需重启服务)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/policy/rules/seed",
      "function": "seed_rules",
      "file": "api/policy_api.py",
      "line": 332,
      "module": "rules",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "注入默认种子规则 (首次部署使用)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/programs/templates",
      "function": "list_templates",
      "file": "api/program_api.py",
      "line": 62,
      "module": "program",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "category",
          "type": "Optional[str]"
        },
        {
          "name": "tenant_id",
          "type": "Optional[int]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/programs/templates",
      "function": "create_template",
      "file": "api/program_api.py",
      "line": 73,
      "module": "program",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "request",
          "type": "CreateTemplateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/programs/templates/{template_id}",
      "function": "get_template",
      "file": "api/program_api.py",
      "line": 83,
      "module": "templates",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "template_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/programs/templates/{template_id}",
      "function": "update_template",
      "file": "api/program_api.py",
      "line": 96,
      "module": "templates",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "template_id",
          "type": "str"
        },
        {
          "name": "request",
          "type": "UpdateTemplateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/programs/enroll",
      "function": "enroll_program",
      "file": "api/program_api.py",
      "line": 113,
      "module": "program",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "request",
          "type": "EnrollRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/programs/my",
      "function": "get_my_programs",
      "file": "api/program_api.py",
      "line": 132,
      "module": "program",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/programs/my/{enrollment_id}/today",
      "function": "get_today_content",
      "file": "api/program_api.py",
      "line": 141,
      "module": "my",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/programs/my/{enrollment_id}/interact",
      "function": "submit_interaction",
      "file": "api/program_api.py",
      "line": 154,
      "module": "my",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "str"
        },
        {
          "name": "request",
          "type": "InteractionRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/programs/my/{enrollment_id}/timeline",
      "function": "get_timeline",
      "file": "api/program_api.py",
      "line": 176,
      "module": "my",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/programs/my/{enrollment_id}/progress",
      "function": "get_progress_radar",
      "file": "api/program_api.py",
      "line": 189,
      "module": "my",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/programs/my/{enrollment_id}/status",
      "function": "update_enrollment_status",
      "file": "api/program_api.py",
      "line": 202,
      "module": "my",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "enrollment_id",
          "type": "str"
        },
        {
          "name": "request",
          "type": "PauseResumeRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/programs/admin/analytics",
      "function": "admin_analytics",
      "file": "api/program_api.py",
      "line": 223,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "template_id",
          "type": "Optional[str]"
        },
        {
          "name": "category",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/programs/admin/enrollments",
      "function": "admin_enrollments",
      "file": "api/program_api.py",
      "line": 234,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "template_id",
          "type": "Optional[str]"
        },
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "coach_id",
          "type": "Optional[int]"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/promotion/progress",
      "function": "get_promotion_progress",
      "file": "api/promotion_api.py",
      "line": 31,
      "module": "promotion",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户晋级进度（四维雷达数据）",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/promotion/rules",
      "function": "get_promotion_rules",
      "file": "api/promotion_api.py",
      "line": 59,
      "module": "promotion",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取所有晋级规则配置",
      "is_async": false,
      "parameters": [
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/promotion/check",
      "function": "check_eligibility",
      "file": "api/promotion_api.py",
      "line": 67,
      "module": "promotion",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "校验当前用户晋级资格（不提交申请）",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/promotion/apply",
      "function": "apply_for_promotion",
      "file": "api/promotion_api.py",
      "line": 77,
      "module": "promotion",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "提交晋级申请（自动校验条件）",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/promotion/applications",
      "function": "list_promotion_applications",
      "file": "api/promotion_api.py",
      "line": 167,
      "module": "promotion",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查看晋级申请列表（教练/管理员）",
      "is_async": false,
      "parameters": [
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/promotion/review/{application_id}",
      "function": "review_promotion",
      "file": "api/promotion_api.py",
      "line": 190,
      "module": "review",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "审核晋级申请",
      "is_async": false,
      "parameters": [
        {
          "name": "application_id",
          "type": "str"
        },
        {
          "name": "action",
          "type": "str"
        },
        {
          "name": "comment",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/push-recommendations/{student_id}",
      "function": "get_student_recommendation",
      "file": "api/push_recommendation_api.py",
      "line": 42,
      "module": "push_recommendation",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取某个学员的推送建议",
      "is_async": true,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/push-recommendations/{student_id}/apply",
      "function": "apply_recommendation",
      "file": "api/push_recommendation_api.py",
      "line": 55,
      "module": "{student_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "一键应用建议（返回预填的推送表单数据）\n\n前端收到后可直接填入推送抽屉表单",
      "is_async": true,
      "parameters": [
        {
          "name": "student_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/certification/questions/{question_id}",
      "function": "get_question",
      "file": "api/question_api.py",
      "line": 111,
      "module": "question",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取题目详情",
      "is_async": false,
      "parameters": [
        {
          "name": "question_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/certification/questions/{question_id}",
      "function": "update_question",
      "file": "api/question_api.py",
      "line": 124,
      "module": "question",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新题目",
      "is_async": false,
      "parameters": [
        {
          "name": "question_id",
          "type": "str"
        },
        {
          "name": "req",
          "type": "QuestionUpdateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/certification/questions/{question_id}",
      "function": "delete_question",
      "file": "api/question_api.py",
      "line": 148,
      "module": "question",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除题目",
      "is_async": false,
      "parameters": [
        {
          "name": "question_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/reminders",
      "function": "list_reminders",
      "file": "api/reminder_api.py",
      "line": 60,
      "module": "reminders",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户的提醒列表",
      "is_async": true,
      "parameters": [
        {
          "name": "active_only",
          "type": "bool"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/reminders",
      "function": "create_reminder",
      "file": "api/reminder_api.py",
      "line": 78,
      "module": "reminders",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建提醒",
      "is_async": true,
      "parameters": [
        {
          "name": "body",
          "type": "CreateReminderRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/reminders/{reminder_id}",
      "function": "update_reminder",
      "file": "api/reminder_api.py",
      "line": 110,
      "module": "reminders",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新提醒",
      "is_async": true,
      "parameters": [
        {
          "name": "reminder_id",
          "type": "int"
        },
        {
          "name": "body",
          "type": "UpdateReminderRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/reminders/{reminder_id}",
      "function": "delete_reminder",
      "file": "api/reminder_api.py",
      "line": 146,
      "module": "reminders",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除提醒",
      "is_async": true,
      "parameters": [
        {
          "name": "reminder_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/coach/reminders",
      "function": "create_coach_reminder",
      "file": "api/reminder_api.py",
      "line": 169,
      "module": "coach",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练为学员创建提醒",
      "is_async": true,
      "parameters": [
        {
          "name": "body",
          "type": "CoachReminderRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/health",
      "function": "health_check",
      "file": "api/routes.py",
      "line": 96,
      "module": "routes",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "HealthCheckResponse",
      "return_type": null,
      "docstring": "健康检查端点",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/experts",
      "function": "list_experts",
      "file": "api/routes.py",
      "line": 120,
      "module": "routes",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        }
      ],
      "response_model": "ExpertsListResponse",
      "return_type": null,
      "docstring": "获取专家列表",
      "is_async": true,
      "parameters": [
        {
          "name": "orchestrator",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/chat",
      "function": "chat",
      "file": "api/routes.py",
      "line": 153,
      "module": "routes",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        }
      ],
      "response_model": "OctopusChatResponse",
      "return_type": null,
      "docstring": "八爪鱼智能对话接口\n\n- 自动路由到合适的专家\n- 集成效能感限幅 (Octopus Clamping)\n- 返回 reasoning_path 和 clamped_tasks\n- 支持穿戴设备数据 (wearable_data) 输入",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "OctopusChatRequest"
        },
        {
          "name": "orchestrator",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/decompose",
      "function": "decompose_advice",
      "file": "api/routes.py",
      "line": 292,
      "module": "routes",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_decomposer",
          "role": "custom"
        }
      ],
      "response_model": "DecomposeResponse",
      "return_type": null,
      "docstring": "任务分解接口\n\n- 将长建议拆解为具体任务\n- 每个任务包含效能评分\n- 支持个性化分解",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "DecomposeRequest"
        },
        {
          "name": "decomposer",
          "type": "Any"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/session/{session_id}",
      "function": "delete_session",
      "file": "api/routes.py",
      "line": 343,
      "module": "session",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "删除会话",
      "is_async": true,
      "parameters": [
        {
          "name": "session_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/session/reset-all",
      "function": "reset_all_sessions",
      "file": "api/routes.py",
      "line": 359,
      "module": "session",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "重置所有会话",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/safety/dashboard",
      "function": "safety_dashboard",
      "file": "api/safety_api.py",
      "line": 48,
      "module": "safety",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "安全仪表盘 — 今日/本周/本月统计",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/safety/logs",
      "function": "safety_logs",
      "file": "api/safety_api.py",
      "line": 108,
      "module": "safety",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "安全日志列表 (分页+筛选)",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "event_type",
          "type": "Optional[str]"
        },
        {
          "name": "severity",
          "type": "Optional[str]"
        },
        {
          "name": "resolved",
          "type": "Optional[bool]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/safety/logs/{log_id}",
      "function": "safety_log_detail",
      "file": "api/safety_api.py",
      "line": 159,
      "module": "logs",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "安全日志详情",
      "is_async": false,
      "parameters": [
        {
          "name": "log_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/safety/logs/{log_id}/resolve",
      "function": "resolve_safety_log",
      "file": "api/safety_api.py",
      "line": 189,
      "module": "logs",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "标记安全事件为已处理",
      "is_async": false,
      "parameters": [
        {
          "name": "log_id",
          "type": "int"
        },
        {
          "name": "body",
          "type": "ResolveRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/safety/review-queue",
      "function": "safety_review_queue",
      "file": "api/safety_api.py",
      "line": 217,
      "module": "safety",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "待审核安全事件队列",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "severity",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/safety/config",
      "function": "get_safety_config",
      "file": "api/safety_api.py",
      "line": 269,
      "module": "safety",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前安全关键词/规则配置",
      "is_async": false,
      "parameters": [
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/safety/config",
      "function": "update_safety_config",
      "file": "api/safety_api.py",
      "line": 291,
      "module": "safety",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新安全关键词配置 (仅更新传入的字段)",
      "is_async": false,
      "parameters": [
        {
          "name": "body",
          "type": "SafetyConfigUpdate"
        },
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/safety/reports/daily",
      "function": "safety_daily_report",
      "file": "api/safety_api.py",
      "line": 334,
      "module": "reports",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "查看安全日报 (默认昨天)",
      "is_async": false,
      "parameters": [
        {
          "name": "date",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "admin",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/search",
      "function": "global_search",
      "file": "api/search_api.py",
      "line": 104,
      "module": "search",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "全平台搜索（标准路径）",
      "is_async": false,
      "parameters": [
        {
          "name": "q",
          "type": "str"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "current_user",
          "type": "Any"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/permissions",
      "function": "get_user_permissions",
      "file": "api/segments_api.py",
      "line": 128,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "UserPermissionsResponse",
      "return_type": null,
      "docstring": "获取用户权限\n\n根据角色、来源和服务等级计算用户的可用功能",
      "is_async": true,
      "parameters": [
        {
          "name": "role",
          "type": "str"
        },
        {
          "name": "source",
          "type": "str"
        },
        {
          "name": "service_tier",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/check-feature",
      "function": "check_feature_access",
      "file": "api/segments_api.py",
      "line": 190,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "检查用户是否有某功能的权限",
      "is_async": true,
      "parameters": [
        {
          "name": "feature",
          "type": "str"
        },
        {
          "name": "role",
          "type": "str"
        },
        {
          "name": "source",
          "type": "str"
        },
        {
          "name": "service_tier",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/upgrade-suggestion",
      "function": "get_upgrade_suggestion_api",
      "file": "api/segments_api.py",
      "line": 235,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "UpgradeSuggestionResponse",
      "return_type": null,
      "docstring": "获取升级建议",
      "is_async": true,
      "parameters": [
        {
          "name": "feature",
          "type": "str"
        },
        {
          "name": "service_tier",
          "type": "str"
        },
        {
          "name": "source",
          "type": "str"
        },
        {
          "name": "role",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/list",
      "function": "list_segments",
      "file": "api/segments_api.py",
      "line": 291,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "List[SegmentInfo]",
      "return_type": null,
      "docstring": "获取用户分群列表",
      "is_async": true,
      "parameters": [
        {
          "name": "source",
          "type": "Optional[str]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/detail/{segment_id}",
      "function": "get_segment_detail",
      "file": "api/segments_api.py",
      "line": 327,
      "module": "detail",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "SegmentDetailResponse",
      "return_type": null,
      "docstring": "获取用户分群详情",
      "is_async": true,
      "parameters": [
        {
          "name": "segment_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/roles",
      "function": "list_roles",
      "file": "api/segments_api.py",
      "line": 359,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "List[RoleInfo]",
      "return_type": null,
      "docstring": "获取所有角色列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/tiers",
      "function": "list_service_tiers",
      "file": "api/segments_api.py",
      "line": 373,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "List[TierInfo]",
      "return_type": null,
      "docstring": "获取所有服务等级列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/sources",
      "function": "list_user_sources",
      "file": "api/segments_api.py",
      "line": 394,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "List[SourceInfo]",
      "return_type": null,
      "docstring": "获取所有用户来源列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/segments/features",
      "function": "list_features",
      "file": "api/segments_api.py",
      "line": 414,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "List[dict]",
      "return_type": null,
      "docstring": "获取所有功能模块列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/segments/check-role-permission",
      "function": "check_role_permission_api",
      "file": "api/segments_api.py",
      "line": 431,
      "module": "segments",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "检查角色权限",
      "is_async": true,
      "parameters": [
        {
          "name": "user_role",
          "type": "str"
        },
        {
          "name": "required_role",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/surveys/{survey_id}",
      "function": "get_survey",
      "file": "api/survey_api.py",
      "line": 97,
      "module": "survey",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PATCH",
      "path": "/api/v1/surveys/{survey_id}",
      "function": "update_survey",
      "file": "api/survey_api.py",
      "line": 114,
      "module": "survey",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "dict"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/surveys/{survey_id}",
      "function": "delete_survey",
      "file": "api/survey_api.py",
      "line": 129,
      "module": "survey",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/surveys/{survey_id}/publish",
      "function": "publish_survey",
      "file": "api/survey_api.py",
      "line": 143,
      "module": "{survey_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/surveys/{survey_id}/close",
      "function": "close_survey",
      "file": "api/survey_api.py",
      "line": 163,
      "module": "{survey_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/surveys/{survey_id}/questions",
      "function": "save_questions",
      "file": "api/survey_api.py",
      "line": 179,
      "module": "{survey_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "questions",
          "type": "List[dict]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/surveys/{survey_id}/questions/reorder",
      "function": "reorder_questions",
      "file": "api/survey_api.py",
      "line": 194,
      "module": "{survey_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "question_ids",
          "type": "List[int]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/surveys/{survey_id}/questions/{question_id}",
      "function": "delete_question",
      "file": "api/survey_api.py",
      "line": 209,
      "module": "{survey_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "question_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/surveys/s/{short_code}",
      "function": "get_survey_by_short_code",
      "file": "api/survey_response_api.py",
      "line": 38,
      "module": "survey_response",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "short_code",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/surveys/s/{short_code}/submit",
      "function": "submit_response",
      "file": "api/survey_response_api.py",
      "line": 80,
      "module": "{short_code}",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "_get_optional_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "short_code",
          "type": "str"
        },
        {
          "name": "request",
          "type": "Request"
        },
        {
          "name": "answers",
          "type": "List[dict]"
        },
        {
          "name": "duration_sec",
          "type": "Optional[int]"
        },
        {
          "name": "device_type",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "user_id",
          "type": "Optional[int]"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/surveys/s/{short_code}/save-draft",
      "function": "save_draft",
      "file": "api/survey_response_api.py",
      "line": 113,
      "module": "{short_code}",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "_get_optional_user_id",
          "role": "custom"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "short_code",
          "type": "str"
        },
        {
          "name": "answers",
          "type": "List[dict]"
        },
        {
          "name": "current_page",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "user_id",
          "type": "Optional[int]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/surveys/{survey_id}/stats",
      "function": "get_stats",
      "file": "api/survey_stats_api.py",
      "line": 32,
      "module": "{survey_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/surveys/{survey_id}/responses",
      "function": "list_responses",
      "file": "api/survey_stats_api.py",
      "line": 46,
      "module": "{survey_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/surveys/{survey_id}/export",
      "function": "export_csv",
      "file": "api/survey_stats_api.py",
      "line": 60,
      "module": "{survey_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "survey_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/mine",
      "function": "get_my_tenant",
      "file": "api/tenant_api.py",
      "line": 225,
      "module": "tenant",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前用户关联的租户 (作为 owner 或 client)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/hub",
      "function": "tenant_hub",
      "file": "api/tenant_api.py",
      "line": 272,
      "module": "tenant",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "专家目录列表 (公开)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/public",
      "function": "tenant_public",
      "file": "api/tenant_api.py",
      "line": 285,
      "module": "{tenant_id}",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "专家公开信息",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}",
      "function": "get_tenant",
      "file": "api/tenant_api.py",
      "line": 298,
      "module": "tenant",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "租户详情 (owner/admin)",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PATCH",
      "path": "/api/v1/tenants/{tenant_id}",
      "function": "update_tenant",
      "file": "api/tenant_api.py",
      "line": 312,
      "module": "tenant",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新品牌/配置 (owner/admin)",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "TenantUpdateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/clients",
      "function": "list_clients",
      "file": "api/tenant_api.py",
      "line": 348,
      "module": "{tenant_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "客户列表",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/tenants/{tenant_id}/clients",
      "function": "add_client",
      "file": "api/tenant_api.py",
      "line": 387,
      "module": "{tenant_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "添加客户",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "ClientAddRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PATCH",
      "path": "/api/v1/tenants/{tenant_id}/clients/{client_id}",
      "function": "update_client",
      "file": "api/tenant_api.py",
      "line": 435,
      "module": "{tenant_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新客户",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "client_id",
          "type": "int"
        },
        {
          "name": "data",
          "type": "ClientUpdateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/agents",
      "function": "list_agents",
      "file": "api/tenant_api.py",
      "line": 470,
      "module": "{tenant_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "Agent 映射列表",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/tenants/{tenant_id}/agents",
      "function": "batch_update_agents",
      "file": "api/tenant_api.py",
      "line": 506,
      "module": "{tenant_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "批量更新 Agent 配置",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "AgentBatchUpdate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/stats",
      "function": "tenant_stats",
      "file": "api/tenant_api.py",
      "line": 564,
      "module": "{tenant_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "客户统计",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/tenants/{tenant_id}/routing",
      "function": "get_routing_config",
      "file": "api/tenant_api.py",
      "line": 615,
      "module": "{tenant_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "获取租户路由配置",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/tenants/{tenant_id}/routing",
      "function": "update_routing_config",
      "file": "api/tenant_api.py",
      "line": 654,
      "module": "{tenant_id}",
      "auth_level": "coach_or_admin",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_coach_or_admin",
          "role": "coach_or_admin"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新租户路由配置",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "RoutingConfigUpdate"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/tenants/{tenant_id}/routing/test",
      "function": "test_routing",
      "file": "api/tenant_api.py",
      "line": 712,
      "module": "{tenant_id}",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "测试路由效果 — 给定消息, 返回路由结果 (不执行Agent)",
      "is_async": false,
      "parameters": [
        {
          "name": "tenant_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "RoutingTestRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/upload/survey-image",
      "function": "upload_survey_image",
      "file": "api/upload_api.py",
      "line": 28,
      "module": "upload",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "上传问卷图片\n\n- 限制: 5MB, image/jpeg|png|webp|gif\n- 存储: static/uploads/survey_images/{userId}_{timestamp}_{uuid8}.{ext}\n- 返回: { url: \"/api/static/uploads/survey_images/xxx.jpg\" }",
      "is_async": true,
      "parameters": [
        {
          "name": "file",
          "type": "UploadFile"
        },
        {
          "name": "current_user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/admin/users",
      "function": "list_users",
      "file": "api/user_api.py",
      "line": 71,
      "module": "user",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户列表 - 支持分页、搜索、角色和状态过滤",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "search",
          "type": "Optional[str]"
        },
        {
          "name": "role",
          "type": "Optional[str]"
        },
        {
          "name": "is_active",
          "type": "Optional[bool]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/admin/users/{user_id}",
      "function": "get_user_detail",
      "file": "api/user_api.py",
      "line": 129,
      "module": "users",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户详情",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/admin/users",
      "function": "create_user",
      "file": "api/user_api.py",
      "line": 153,
      "module": "user",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "创建新用户",
      "is_async": false,
      "parameters": [
        {
          "name": "request",
          "type": "CreateUserRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/admin/users/{user_id}",
      "function": "update_user",
      "file": "api/user_api.py",
      "line": 191,
      "module": "users",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "更新用户信息",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "request",
          "type": "UpdateUserRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v1/admin/users/{user_id}/status",
      "function": "update_status",
      "file": "api/user_api.py",
      "line": 222,
      "module": "users",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "启用/停用用户",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "request",
          "type": "UpdateStatusRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/admin/users/{user_id}",
      "function": "delete_user",
      "file": "api/user_api.py",
      "line": 243,
      "module": "users",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "删除用户",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/admin/stats",
      "function": "get_stats",
      "file": "api/user_api.py",
      "line": 267,
      "module": "user",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户统计",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/admin/coaches",
      "function": "list_coaches",
      "file": "api/user_api.py",
      "line": 288,
      "module": "user",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "教练列表(含负载)",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/admin/distribution/pending",
      "function": "list_pending",
      "file": "api/user_api.py",
      "line": 322,
      "module": "distribution",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "待分配成长者",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/admin/distribution/assign",
      "function": "assign_grower",
      "file": "api/user_api.py",
      "line": 357,
      "module": "distribution",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "分配成长者给教练",
      "is_async": false,
      "parameters": [
        {
          "name": "request",
          "type": "AssignRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/admin/distribution/transfers",
      "function": "list_transfers",
      "file": "api/user_api.py",
      "line": 389,
      "module": "distribution",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "待审批转移",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/admin/distribution/transfers/{grower_id}/approve",
      "function": "approve_transfer",
      "file": "api/user_api.py",
      "line": 414,
      "module": "distribution",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "批准转移",
      "is_async": false,
      "parameters": [
        {
          "name": "grower_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/admin/distribution/transfers/{grower_id}/reject",
      "function": "reject_transfer",
      "file": "api/user_api.py",
      "line": 444,
      "module": "distribution",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "拒绝转移",
      "is_async": false,
      "parameters": [
        {
          "name": "grower_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/stats/user/{user_id}/overview",
      "function": "user_overview",
      "file": "api/user_stats_api.py",
      "line": 23,
      "module": "user",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "个人统计总览",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/stats/user/{user_id}/activity",
      "function": "user_activity_timeline",
      "file": "api/user_stats_api.py",
      "line": 82,
      "module": "user",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户活动时间线",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/stats/admin/grower-report",
      "function": "grower_report",
      "file": "api/user_stats_api.py",
      "line": 119,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "成长者统计报告",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/stats/admin/sharer-report",
      "function": "sharer_report",
      "file": "api/user_stats_api.py",
      "line": 142,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "分享者统计报告",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/stats/admin/activity-report",
      "function": "activity_report",
      "file": "api/user_stats_api.py",
      "line": 164,
      "module": "admin",
      "auth_level": "admin_only",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "require_admin",
          "role": "admin_only"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "全平台活动报告",
      "is_async": false,
      "parameters": [
        {
          "name": "days",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "current_user",
          "type": "User"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/",
      "function": "root",
      "file": "api/xingjian_api.py",
      "line": 102,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "API 根路径",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/health",
      "function": "health_check",
      "file": "api/xingjian_api.py",
      "line": 113,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "健康检查",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/experts",
      "function": "list_experts",
      "file": "api/xingjian_api.py",
      "line": 123,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "List[ExpertInfo]",
      "return_type": null,
      "docstring": "获取可用专家列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/chat",
      "function": "chat",
      "file": "api/xingjian_api.py",
      "line": 132,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "ChatResponse",
      "return_type": null,
      "docstring": "健康咨询接口\n\n- 自动路由到合适的专家\n- 支持多专家协作\n- 可指定专家直接对话",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ChatRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/clamping",
      "function": "octopus_clamping",
      "file": "api/xingjian_api.py",
      "line": 168,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "ClampingResponse",
      "return_type": null,
      "docstring": "八爪鱼效能限幅接口\n\n根据用户效能分和穿戴数据，动态裁剪任务难度和数量",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ClampingRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/reset",
      "function": "reset_conversation",
      "file": "api/xingjian_api.py",
      "line": 189,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "重置所有对话历史",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/openapi-tools.json",
      "function": "get_dify_tools_schema",
      "file": "api/xingjian_api.py",
      "line": 201,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取 Dify 自定义工具 Schema\n\n在 Dify 中创建自定义工具时，导入此 Schema",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v3/assessment/batches",
      "function": "list_batches",
      "file": "api/routers/assessment.py",
      "line": 22,
      "module": "assessment",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "返回评估批次清单 (题数/估时/所属工具)",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v3/assessment/session",
      "function": "get_session",
      "file": "api/routers/assessment.py",
      "line": 39,
      "module": "assessment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "获取或创建用户评估会话, 返回已完成批次和总进度",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/assessment/submit",
      "function": "submit_assessment_batch",
      "file": "api/routers/assessment.py",
      "line": 59,
      "module": "assessment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "提交一个批次的答案\n\nbatch_id: 批次标识 (如 \"ttm7\", \"spi_p1\", \"hbm\" 等)\nanswers: 答案 (格式取决于批次类型)",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "BatchSubmitRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/assessment/recommend",
      "function": "recommend_next",
      "file": "api/routers/assessment.py",
      "line": 86,
      "module": "assessment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "自适应推荐下一个评估批次\n\n根据用户已完成的批次和当前状态, 推荐最有价值的下一批",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/auth/register",
      "function": "register",
      "file": "api/routers/auth.py",
      "line": 23,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "手机号 + 密码注册\n\n密码: bcrypt 散列存储, 最少 6 位",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "RegisterRequest"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/auth/login",
      "function": "login",
      "file": "api/routers/auth.py",
      "line": 53,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "手机号 + 密码登录 → 返回 access_token + refresh_token",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "LoginRequest"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/auth/refresh",
      "function": "refresh_token",
      "file": "api/routers/auth.py",
      "line": 76,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "用 refresh_token 换取新的 token 对\n\nrefresh_token 有效期 7 天, access_token 2 小时",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "RefreshRequest"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/auth/me",
      "function": "get_me",
      "file": "api/routers/auth.py",
      "line": 96,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v3/auth/password",
      "function": "change_password",
      "file": "api/routers/auth.py",
      "line": 101,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "ChangePasswordRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v3/auth/profile",
      "function": "update_profile",
      "file": "api/routers/auth.py",
      "line": 115,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "nickname",
          "type": "str | None"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/auth/users",
      "function": "list_users",
      "file": "api/routers/auth.py",
      "line": 129,
      "module": "auth",
      "auth_level": "role_required",
      "dependencies": [
        {
          "dependency": "require_role(admin,bhp_master)",
          "role": "role_required"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "管理员查看用户列表",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "role",
          "type": "str | None"
        },
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v3/auth/users/{user_id}/role",
      "function": "update_role",
      "file": "api/routers/auth.py",
      "line": 153,
      "module": "users",
      "auth_level": "role_required",
      "dependencies": [
        {
          "dependency": "require_role(admin)",
          "role": "role_required"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "仅 admin 可修改角色",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "new_role",
          "type": "str"
        },
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/chat/message",
      "function": "chat_message",
      "file": "api/routers/chat.py",
      "line": 25,
      "module": "chat",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_coach_agent",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "智能对话入口: 自动意图分类 → 路由到合适的模型 → RAG 增强\n\n意图类型:\n- greeting / checkin_confirm → 快捷回复 (不调 LLM)\n- knowledge_qa / strategy_explain → RAG 检索 + LLM\n- coach_dialogue / crisis_support → 画像注入 + RAG + 高级模型\n- general_",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "ChatRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "agent",
          "type": "CoachAgent"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/chat/knowledge",
      "function": "knowledge_query",
      "file": "api/routers/chat.py",
      "line": 65,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rag_pipeline",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "知识库检索 + LLM 生成回答\n\ndoc_type 过滤: spec / strategy / tcm / clinical / course / faq",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "KnowledgeQueryRequest"
        },
        {
          "name": "pipeline",
          "type": "RAGPipeline"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/chat/knowledge/search",
      "function": "knowledge_search",
      "file": "api/routers/chat.py",
      "line": 82,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rag_pipeline",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "纯向量检索, 返回相似文档片段, 不调 LLM",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "KnowledgeQueryRequest"
        },
        {
          "name": "pipeline",
          "type": "RAGPipeline"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/chat/prescription",
      "function": "generate_prescription",
      "file": "api/routers/chat.py",
      "line": 98,
      "module": "chat",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_coach_agent",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "结合用户画像 + 知识库中的干预策略 → LLM 生成个性化行为处方",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "PrescriptionRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "agent",
          "type": "CoachAgent"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/chat/stats",
      "function": "chat_stats",
      "file": "api/routers/chat.py",
      "line": 122,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_coach_agent",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "返回 LLM 路由统计: 调用量/成本/延迟/降级率",
      "is_async": false,
      "parameters": [
        {
          "name": "agent",
          "type": "CoachAgent"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/diagnostic/minimal",
      "function": "diagnostic_minimal",
      "file": "api/routers/diagnostic.py",
      "line": 37,
      "module": "diagnostic",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "TTM 7 题 + SPI quick 5 题 = 12 题即可生成基础处方\n\n返回: Layer1 + Layer2 + Layer4(基础处方)",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "DiagnosticMinimalRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/diagnostic/full",
      "function": "diagnostic_full",
      "file": "api/routers/diagnostic.py",
      "line": 61,
      "module": "diagnostic",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "完整诊断管道: Layer1(行为诊断) → Layer2(SPI) → Layer3(能力与支持) → Layer4(处方)",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "DiagnosticFullRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/health",
      "function": "health_check",
      "file": "api/routers/health.py",
      "line": 23,
      "module": "health",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "轻量健康检查 (不查外部依赖)",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v3/status",
      "function": "system_status",
      "file": "api/routers/health.py",
      "line": 33,
      "module": "v3",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_qdrant_store",
          "role": "custom"
        },
        {
          "dependency": "get_llm_router",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "完整系统状态:\n- 数据库连接\n- Qdrant 向量库\n- LLM 路由统计\n- 环境变量检查",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "store",
          "type": "QdrantStore"
        },
        {
          "name": "router_inst",
          "type": "LLMRouter"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/incentive/checkin",
      "function": "checkin",
      "file": "api/routers/incentive.py",
      "line": 19,
      "module": "incentive",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "每日打卡获得积分",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/incentive/task-complete",
      "function": "task_complete",
      "file": "api/routers/incentive.py",
      "line": 31,
      "module": "incentive",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "完成单个任务获得积分",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "TaskCompleteRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/incentive/balance",
      "function": "get_balance",
      "file": "api/routers/incentive.py",
      "line": 44,
      "module": "incentive",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "查询用户积分余额和成长等级",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/incentive/rx-context",
      "function": "rx_context",
      "file": "api/routers/incentive.py",
      "line": 61,
      "module": "incentive",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "获取当前成长等级下的处方模式和激励参数",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/admin/knowledge/stats",
      "function": "knowledge_stats",
      "file": "api/routers/knowledge.py",
      "line": 20,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_qdrant_store",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "查看 Qdrant 集合统计: 文档数/向量数/状态",
      "is_async": false,
      "parameters": [
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "store",
          "type": "QdrantStore"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/admin/knowledge/load-file",
      "function": "load_file",
      "file": "api/routers/knowledge.py",
      "line": 33,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_knowledge_loader",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "加载单个文件到知识库 (.md / .txt / .json)",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "KnowledgeLoadFileRequest"
        },
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "loader",
          "type": "KnowledgeLoader"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/admin/knowledge/load-dir",
      "function": "load_directory",
      "file": "api/routers/knowledge.py",
      "line": 53,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_knowledge_loader",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "批量加载目录下所有 .md/.txt/.json 文件",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "KnowledgeLoadDirRequest"
        },
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "loader",
          "type": "KnowledgeLoader"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/admin/knowledge/init",
      "function": "init_collection",
      "file": "api/routers/knowledge.py",
      "line": 72,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_qdrant_store",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "创建 Qdrant 集合 (如不存在)",
      "is_async": false,
      "parameters": [
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "store",
          "type": "QdrantStore"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v3/admin/knowledge/reset",
      "function": "reset_collection",
      "file": "api/routers/knowledge.py",
      "line": 85,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_qdrant_store",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "删除并重建 Qdrant 集合 (危险操作!)",
      "is_async": false,
      "parameters": [
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "store",
          "type": "QdrantStore"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/tracking/daily",
      "function": "record_daily",
      "file": "api/routers/tracking.py",
      "line": 22,
      "module": "tracking",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "每日打卡后提交: 任务完成情况 + 心情 + 难度反馈\n\n自动触发 PDCA 检查:\n- 连续3天完成率<50% → 降低难度\n- 连续7天完成率>90% → 可升级",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "DailyOutcomeRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/tracking/weekly-review",
      "function": "weekly_review",
      "file": "api/routers/tracking.py",
      "line": 60,
      "module": "tracking",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "生成过去 7 天的效果报告:\n- 完成率趋势\n- SPI 变化\n- 阶段转变建议\n- PDCA 调整汇总",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "WeeklyReviewRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/tracking/stage-transition",
      "function": "stage_transition",
      "file": "api/routers/tracking.py",
      "line": 83,
      "module": "tracking",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "记录行为阶段变化 (S0→S1 等)",
      "is_async": false,
      "parameters": [
        {
          "name": "from_stage",
          "type": "str"
        },
        {
          "name": "to_stage",
          "type": "str"
        },
        {
          "name": "trigger",
          "type": "str"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/admin/behavior/rules",
      "function": "get_behavior_rules",
      "file": "api/v14/admin_routes.py",
      "line": 83,
      "module": "admin",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取当前母库逻辑\n\nGET /api/v1/admin/behavior/rules",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "PUT",
      "path": "/admin/behavior/rules",
      "function": "update_behavior_rules",
      "file": "api/v14/admin_routes.py",
      "line": 111,
      "module": "admin",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "更新母库逻辑\n\nPUT /api/v1/admin/behavior/rules",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "UpdateRulesRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/admin/behavior/rules/validate",
      "function": "validate_behavior_rules",
      "file": "api/v14/admin_routes.py",
      "line": 158,
      "module": "rules",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "验证逻辑表达式是否合法\n\nPOST /api/v1/admin/behavior/rules/validate\n\n防止专家写错 Python 表达式导致系统崩溃",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ValidateConditionRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/admin/behavior/rules/reload",
      "function": "reload_behavior_rules",
      "file": "api/v14/admin_routes.py",
      "line": 200,
      "module": "rules",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "热重载配置\n\nPOST /api/v1/admin/behavior/rules/reload",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/admin/behavior/actions",
      "function": "get_action_packages",
      "file": "api/v14/admin_routes.py",
      "line": 229,
      "module": "admin",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取动作包列表\n\nGET /api/v1/admin/behavior/actions",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/admin/behavior/actions/{action_id}",
      "function": "get_action_by_id",
      "file": "api/v14/admin_routes.py",
      "line": 247,
      "module": "actions",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取单个动作包",
      "is_async": true,
      "parameters": [
        {
          "name": "action_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/admin/behavior/stages",
      "function": "get_stage_definitions",
      "file": "api/v14/admin_routes.py",
      "line": 265,
      "module": "admin",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取阶段定义\n\nGET /api/v1/admin/behavior/stages",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/admin/behavior/stages/{stage_id}",
      "function": "get_stage_by_id",
      "file": "api/v14/admin_routes.py",
      "line": 286,
      "module": "stages",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取单个阶段定义",
      "is_async": true,
      "parameters": [
        {
          "name": "stage_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/admin/behavior/triggers",
      "function": "get_trigger_rules",
      "file": "api/v14/admin_routes.py",
      "line": 304,
      "module": "admin",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取触发规则列表\n\nGET /api/v1/admin/behavior/triggers",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/admin/behavior/triggers/for-stage/{stage_id}",
      "function": "get_triggers_for_stage",
      "file": "api/v14/admin_routes.py",
      "line": 322,
      "module": "triggers",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取适用于指定阶段的触发规则",
      "is_async": true,
      "parameters": [
        {
          "name": "stage_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/admin/behavior/sync/process",
      "function": "process_sync_event",
      "file": "api/v14/admin_routes.py",
      "line": 342,
      "module": "sync",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "处理同步事件\n\nPOST /api/v1/admin/behavior/sync/process",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ProcessEventRequest"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/admin/behavior/sync/view/{event_id}",
      "function": "get_sync_view",
      "file": "api/v14/admin_routes.py",
      "line": 373,
      "module": "sync",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取事件视图\n\nGET /api/v1/admin/behavior/sync/view/{event_id}?role=patient|coach|expert|admin",
      "is_async": true,
      "parameters": [
        {
          "name": "event_id",
          "type": "str"
        },
        {
          "name": "role",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/admin/behavior/sync/user/{user_id}",
      "function": "get_user_sync_events",
      "file": "api/v14/admin_routes.py",
      "line": 402,
      "module": "sync",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户的同步事件列表\n\nGET /api/v1/admin/behavior/sync/user/{user_id}?role=patient&limit=10",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "role",
          "type": "str"
        },
        {
          "name": "limit",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/admin/behavior/sync/pending",
      "function": "get_pending_reviews",
      "file": "api/v14/admin_routes.py",
      "line": 432,
      "module": "sync",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取待审核事件\n\nGET /api/v1/admin/behavior/sync/pending",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/admin/behavior/stats",
      "function": "get_behavior_stats",
      "file": "api/v14/admin_routes.py",
      "line": 456,
      "module": "admin",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取行为系统统计\n\nGET /api/v1/admin/behavior/stats",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/copilot/analyze",
      "function": "copilot_analyze",
      "file": "api/v14/copilot_routes.py",
      "line": 60,
      "module": "copilot",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "CoachCopilot 分析端点 (生产环境)\nLayer 1: 关键词匹配\nLayer 2: BehaviorEngine 条件引擎 (可选)\n返回与沙盒 simulate-chat 相同的响应格式",
      "is_async": true,
      "parameters": [
        {
          "name": "uid",
          "type": "str"
        },
        {
          "name": "message",
          "type": "str"
        },
        {
          "name": "context",
          "type": "dict"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/decision/create",
      "function": "create_disclosure_decision",
      "file": "api/v14/disclosure_routes.py",
      "line": 96,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "创建披露决策",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "CreateDecisionRequest"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/disclosure/decision/{report_id}",
      "function": "get_disclosure_decision",
      "file": "api/v14/disclosure_routes.py",
      "line": 118,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取披露决策",
      "is_async": true,
      "parameters": [
        {
          "name": "report_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/decision/{report_id}/sign",
      "function": "sign_disclosure",
      "file": "api/v14/disclosure_routes.py",
      "line": 133,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "签名披露决策",
      "is_async": true,
      "parameters": [
        {
          "name": "report_id",
          "type": "str"
        },
        {
          "name": "request",
          "type": "SignRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/decision/{report_id}/approve",
      "function": "approve_disclosure",
      "file": "api/v14/disclosure_routes.py",
      "line": 171,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "批准披露",
      "is_async": true,
      "parameters": [
        {
          "name": "report_id",
          "type": "str"
        },
        {
          "name": "expert_id",
          "type": "str"
        },
        {
          "name": "expert_name",
          "type": "str"
        },
        {
          "name": "role",
          "type": "str"
        },
        {
          "name": "notes",
          "type": "Optional[str]"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/decision/{report_id}/reject",
      "function": "reject_disclosure",
      "file": "api/v14/disclosure_routes.py",
      "line": 204,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "驳回披露",
      "is_async": true,
      "parameters": [
        {
          "name": "report_id",
          "type": "str"
        },
        {
          "name": "expert_id",
          "type": "str"
        },
        {
          "name": "expert_name",
          "type": "str"
        },
        {
          "name": "reason",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/decision/{report_id}/chapter",
      "function": "set_chapter_visibility",
      "file": "api/v14/disclosure_routes.py",
      "line": 230,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "设置章节可见性",
      "is_async": true,
      "parameters": [
        {
          "name": "report_id",
          "type": "str"
        },
        {
          "name": "request",
          "type": "ChapterVisibilityRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/decision/{report_id}/rewrite",
      "function": "add_content_rewrite",
      "file": "api/v14/disclosure_routes.py",
      "line": 253,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "添加内容重写",
      "is_async": true,
      "parameters": [
        {
          "name": "report_id",
          "type": "str"
        },
        {
          "name": "request",
          "type": "RewriteRequest"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/disclosure/decision/{report_id}/visible-chapters",
      "function": "get_visible_chapters",
      "file": "api/v14/disclosure_routes.py",
      "line": 274,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取指定角色可见的章节",
      "is_async": true,
      "parameters": [
        {
          "name": "report_id",
          "type": "str"
        },
        {
          "name": "role",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/disclosure/decision/{report_id}/patient-message",
      "function": "get_patient_message",
      "file": "api/v14/disclosure_routes.py",
      "line": 292,
      "module": "decision",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取患者端显示消息",
      "is_async": true,
      "parameters": [
        {
          "name": "report_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/disclosure/chapters",
      "function": "get_chapters",
      "file": "api/v14/disclosure_routes.py",
      "line": 310,
      "module": "disclosure",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取所有章节配置",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/disclosure/blacklist",
      "function": "get_blacklist",
      "file": "api/v14/disclosure_routes.py",
      "line": 336,
      "module": "disclosure",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取禁词库",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/disclosure/blacklist/check",
      "function": "check_blacklist",
      "file": "api/v14/disclosure_routes.py",
      "line": 347,
      "module": "blacklist",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "检查文本中的敏感词",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "BlacklistCheckRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/blacklist/auto-replace",
      "function": "auto_replace_blacklist",
      "file": "api/v14/disclosure_routes.py",
      "line": 381,
      "module": "blacklist",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "自动替换敏感词",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "BlacklistCheckRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/rewrite",
      "function": "ai_rewrite",
      "file": "api/v14/disclosure_routes.py",
      "line": 406,
      "module": "disclosure",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "AI重写文本",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "AIRewriteRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/disclosure/rewrite/assessment",
      "function": "rewrite_assessment",
      "file": "api/v14/disclosure_routes.py",
      "line": 420,
      "module": "rewrite",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "重写评估摘要",
      "is_async": true,
      "parameters": [
        {
          "name": "big5_summary",
          "type": "str"
        },
        {
          "name": "ttm_stage",
          "type": "str"
        },
        {
          "name": "bpt6_type",
          "type": "str"
        },
        {
          "name": "risk_level",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/disclosure/rewrite/stage-message/{ttm_stage}",
      "function": "get_stage_message",
      "file": "api/v14/disclosure_routes.py",
      "line": 441,
      "module": "rewrite",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取阶段鼓励消息",
      "is_async": true,
      "parameters": [
        {
          "name": "ttm_stage",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/disclosure/pending",
      "function": "get_pending_reviews",
      "file": "api/v14/disclosure_routes.py",
      "line": 457,
      "module": "disclosure",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取待审核列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/disclosure/signature/pending",
      "function": "get_pending_signatures",
      "file": "api/v14/disclosure_routes.py",
      "line": 469,
      "module": "signature",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取待签名请求",
      "is_async": true,
      "parameters": [
        {
          "name": "role",
          "type": "Optional[str]"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/quality/audit",
      "function": "start_quality_audit",
      "file": "api/v14/quality_routes.py",
      "line": 47,
      "module": "quality",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "启动质量审计\n\n- sync=False (默认): 异步执行，立即返回，结果通过 /audit/result 查询\n- sync=True: 同步执行，等待结果返回\n\nArgs:\n    payload: 审计请求\n    sync: 是否同步执行\n\nReturns:\n    异步: {\"status\": \"audit_started\", \"trace_id\": \"...\"}\n    同步: Q",
      "is_async": true,
      "parameters": [
        {
          "name": "payload",
          "type": "AuditRequest"
        },
        {
          "name": "background_tasks",
          "type": "BackgroundTasks"
        },
        {
          "name": "sync",
          "type": "bool"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/quality/audit-batch",
      "function": "batch_quality_audit",
      "file": "api/v14/quality_routes.py",
      "line": 105,
      "module": "quality",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "批量质量审计（异步）\n\nArgs:\n    payload: 批量审计请求\n\nReturns:\n    批量审计状态",
      "is_async": true,
      "parameters": [
        {
          "name": "payload",
          "type": "BatchAuditRequest"
        },
        {
          "name": "background_tasks",
          "type": "BackgroundTasks"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/quality/audit/result/{trace_id}",
      "function": "get_audit_result",
      "file": "api/v14/quality_routes.py",
      "line": 158,
      "module": "audit",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取审计结果\n\nArgs:\n    trace_id: 追踪ID\n\nReturns:\n    审计结果或状态",
      "is_async": true,
      "parameters": [
        {
          "name": "trace_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/quality/audit/status",
      "function": "get_audit_status",
      "file": "api/v14/quality_routes.py",
      "line": 188,
      "module": "audit",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取审计系统状态\n\nReturns:\n    系统状态统计",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/quality/audit/list",
      "function": "list_audit_results",
      "file": "api/v14/quality_routes.py",
      "line": 216,
      "module": "audit",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "列出审计结果\n\nArgs:\n    grade: 筛选等级\n    limit: 返回数量\n    offset: 偏移量\n\nReturns:\n    审计结果列表",
      "is_async": true,
      "parameters": [
        {
          "name": "grade",
          "type": "Optional[str]"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "offset",
          "type": "int"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/quality/audit/result/{trace_id}",
      "function": "delete_audit_result",
      "file": "api/v14/quality_routes.py",
      "line": 258,
      "module": "audit",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "删除审计结果\n\nArgs:\n    trace_id: 追踪ID",
      "is_async": true,
      "parameters": [
        {
          "name": "trace_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/quality/audit/safety-check",
      "function": "safety_focused_audit",
      "file": "api/v14/quality_routes.py",
      "line": 279,
      "module": "audit",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "安全性专项审计\n\n快速检查响应是否存在安全风险",
      "is_async": true,
      "parameters": [
        {
          "name": "response_text",
          "type": "str"
        },
        {
          "name": "trace_id",
          "type": "Optional[str]"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/quality/audit/with-v14-context",
      "function": "audit_with_v14_context",
      "file": "api/v14/quality_routes.py",
      "line": 322,
      "module": "audit",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "带v14上下文的审计\n\n自动获取用户的节律状态和触发事件",
      "is_async": true,
      "parameters": [
        {
          "name": "payload",
          "type": "AuditRequest"
        },
        {
          "name": "include_rhythm",
          "type": "bool"
        },
        {
          "name": "include_triggers",
          "type": "bool"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v2/status",
      "function": "get_v14_status",
      "file": "api/v14/routes.py",
      "line": 80,
      "module": "routes",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取v14版本状态",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v2/health",
      "function": "v14_health_check",
      "file": "api/v14/routes.py",
      "line": 99,
      "module": "routes",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "v14健康检查",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v2/features",
      "function": "get_features",
      "file": "api/v14/routes.py",
      "line": 123,
      "module": "routes",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取功能开关状态",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v2/trigger/emit",
      "function": "emit_trigger_event",
      "file": "api/v14/routes.py",
      "line": 138,
      "module": "trigger",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "发射触发事件\n\n需要启用: ENABLE_TRIGGER_EVENT_ROUTING",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "TriggerEventRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v2/trigger/process",
      "function": "process_trigger_events",
      "file": "api/v14/routes.py",
      "line": 178,
      "module": "trigger",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "处理所有待处理的触发事件\n\n需要启用: ENABLE_TRIGGER_EVENT_ROUTING",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v2/trigger/stats",
      "function": "get_trigger_stats",
      "file": "api/v14/routes.py",
      "line": 203,
      "module": "trigger",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取Trigger统计信息",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v2/rhythm/detect",
      "function": "detect_rhythm",
      "file": "api/v14/routes.py",
      "line": 225,
      "module": "rhythm",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "检测用户节律\n\n需要启用: ENABLE_RHYTHM_MODEL",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "RhythmProcessRequest"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v2/rhythm/current/{user_id}",
      "function": "get_current_rhythm",
      "file": "api/v14/routes.py",
      "line": 268,
      "module": "rhythm",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取用户当前节律状态",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v2/agent/process",
      "function": "process_with_agents",
      "file": "api/v14/routes.py",
      "line": 294,
      "module": "agent",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "使用v14 Agent处理消息\n\nSafetyAgent始终启用，其他Agent根据配置",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "AgentProcessRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v2/agent/safety-check",
      "function": "safety_check",
      "file": "api/v14/routes.py",
      "line": 330,
      "module": "agent",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "安全检查（SafetyAgent独立接口）\n\n此接口始终可用（SafetyAgent始终启用）",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "message",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v2/integrated/process",
      "function": "integrated_process",
      "file": "api/v14/routes.py",
      "line": 355,
      "module": "integrated",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "整合处理接口\n\n自动调用：\n1. TriggerEngine（v11）识别血糖触发\n2. TriggerRouter（v14）事件路由\n3. RhythmEngine（v14）节律检测\n4. AgentEnhancer（v14）安全检查\n5. DecisionCore（v11）生成响应",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "message",
          "type": "str"
        },
        {
          "name": "glucose_value",
          "type": "Optional[float]"
        },
        {
          "name": "context",
          "type": "Dict[str, Any]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/knowledge/docs",
      "function": "list_documents",
      "file": "backend/api/knowledge.py",
      "line": 26,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "文档列表",
      "is_async": true,
      "parameters": [
        {
          "name": "scope",
          "type": "Optional[str]"
        },
        {
          "name": "domain_id",
          "type": "Optional[str]"
        },
        {
          "name": "status",
          "type": "Optional[str]"
        },
        {
          "name": "skip",
          "type": "int"
        },
        {
          "name": "limit",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/knowledge/docs/upload",
      "function": "upload_document",
      "file": "backend/api/knowledge.py",
      "line": 38,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "上传并入库文档",
      "is_async": true,
      "parameters": [
        {
          "name": "file",
          "type": "UploadFile"
        },
        {
          "name": "scope",
          "type": "str"
        },
        {
          "name": "domain_id",
          "type": "str"
        },
        {
          "name": "tenant_id",
          "type": "Optional[str]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/knowledge/docs/{doc_id}",
      "function": "get_document",
      "file": "backend/api/knowledge.py",
      "line": 51,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "文档详情",
      "is_async": true,
      "parameters": [
        {
          "name": "doc_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/knowledge/docs/{doc_id}",
      "function": "delete_document",
      "file": "backend/api/knowledge.py",
      "line": 57,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "删除文档",
      "is_async": true,
      "parameters": [
        {
          "name": "doc_id",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/knowledge/search",
      "function": "search_knowledge",
      "file": "backend/api/knowledge.py",
      "line": 63,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "语义检索",
      "is_async": true,
      "parameters": [
        {
          "name": "q",
          "type": "str"
        },
        {
          "name": "scope",
          "type": "Optional[str]"
        },
        {
          "name": "domain_id",
          "type": "Optional[str]"
        },
        {
          "name": "top_k",
          "type": "int"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/knowledge/domains",
      "function": "list_domains",
      "file": "backend/api/knowledge.py",
      "line": 74,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "领域列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/knowledge/stats",
      "function": "knowledge_stats",
      "file": "backend/api/knowledge.py",
      "line": 84,
      "module": "knowledge",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "知识库统计",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/compute",
      "function": "compute_rx",
      "file": "behavior_rx/rx_routes.py",
      "line": 273,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_rx_engine",
          "role": "custom"
        },
        {
          "dependency": "get_current_coach()",
          "role": "custom"
        }
      ],
      "response_model": "ComputeRxResponse",
      "return_type": null,
      "docstring": "计算行为处方\n\n输入三维上下文, 输出个性化处方对象:\n  - 目标行为 + 主策略 + 辅助策略\n  - 强度 + 节奏 + 沟通风格\n  - 微行动列表 + 奖励触发器\n  - 阻力阈值 + 升级规则",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ComputeRxRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "engine",
          "type": "BehaviorRxEngine"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/strategies",
      "function": "list_strategy_templates",
      "file": "behavior_rx/rx_routes.py",
      "line": 319,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rx_engine",
          "role": "custom"
        }
      ],
      "response_model": "List[Dict[str, Any]]",
      "return_type": null,
      "docstring": "获取 12 种行为策略模板\n\n可按 domain 过滤 (general/metabolic/cardiac/adherence)\n公开端点, 无需认证。",
      "is_async": true,
      "parameters": [
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "enabled_only",
          "type": "bool"
        },
        {
          "name": "engine",
          "type": "BehaviorRxEngine"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/agents/status",
      "function": "get_agents_status",
      "file": "behavior_rx/rx_routes.py",
      "line": 352,
      "module": "agents",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        },
        {
          "dependency": "get_current_coach()",
          "role": "custom"
        }
      ],
      "response_model": "AgentStatusResponse",
      "return_type": null,
      "docstring": "获取 4 款专家 Agent 的注册状态",
      "is_async": true,
      "parameters": [
        {
          "name": "orchestrator",
          "type": "AgentCollaborationOrchestrator"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/user/{user_id}",
      "function": "get_user_rx_history",
      "file": "behavior_rx/rx_routes.py",
      "line": 374,
      "module": "user",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_coach()",
          "role": "custom"
        }
      ],
      "response_model": "RxListResponse",
      "return_type": null,
      "docstring": "获取指定用户的处方历史\n\n支持按 agent_type 过滤, 按时间倒序排列",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "uuid.UUID"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "agent_type",
          "type": "Optional[ExpertAgentType]"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/handoff",
      "function": "initiate_handoff",
      "file": "behavior_rx/rx_routes.py",
      "line": 428,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_handoff_service",
          "role": "custom"
        },
        {
          "dependency": "get_current_coach()",
          "role": "custom"
        }
      ],
      "response_model": "HandoffResponse",
      "return_type": null,
      "docstring": "发起 Agent 交接\n\n交接类型:\n  - stage_promotion: 阶段晋升交接 (Coach → 领域Agent)\n  - stage_regression: 阶段回退接管 (领域Agent → Coach)\n  - domain_coordination: 领域间协作交接\n  - cross_cutting: 横切介入 (Adherence Agent)\n  - emergency",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "HandoffRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "service",
          "type": "AgentHandoffService"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/handoff/{user_id}",
      "function": "get_handoff_logs",
      "file": "behavior_rx/rx_routes.py",
      "line": 464,
      "module": "handoff",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_coach()",
          "role": "custom"
        }
      ],
      "response_model": "HandoffListResponse",
      "return_type": null,
      "docstring": "获取指定用户的 Agent 交接历史日志",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "uuid.UUID"
        },
        {
          "name": "limit",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/collaborate",
      "function": "collaborate",
      "file": "behavior_rx/rx_routes.py",
      "line": 507,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        },
        {
          "dependency": "get_current_coach()",
          "role": "custom"
        }
      ],
      "response_model": "CollaborateResponse",
      "return_type": null,
      "docstring": "4-Agent 协作编排执行\n\n自动识别场景并编排:\n  - new_user_assessment: 新用户 → Coach主导\n  - glucose_abnormal: 血糖异常 → Metabolic主导\n  - exercise_fear: 运动恐惧 → Coach前置 + Cardiac待命\n  - multi_morbidity: 多病共管 → 并行 + 横切\n  - stage_r",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "CollaborateRequest"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "orchestrator",
          "type": "AgentCollaborationOrchestrator"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/{rx_id}",
      "function": "get_rx_detail",
      "file": "behavior_rx/rx_routes.py",
      "line": 565,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_current_coach()",
          "role": "custom"
        }
      ],
      "response_model": "RxPrescriptionDTO",
      "return_type": null,
      "docstring": "通过 rx_id 获取处方详情",
      "is_async": true,
      "parameters": [
        {
          "name": "rx_id",
          "type": "uuid.UUID"
        },
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "_user",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/compute",
      "function": "compute_rx",
      "file": "behavior_rx/api/rx_routes.py",
      "line": 137,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rx_engine",
          "role": "custom"
        }
      ],
      "response_model": "ComputeRxResponse",
      "return_type": null,
      "docstring": "计算行为处方\n\n输入三维上下文, 输出个性化处方对象:\n  - 目标行为 + 主策略 + 辅助策略\n  - 强度 + 节奏 + 沟通风格\n  - 微行动列表 + 奖励触发器\n  - 阻力阈值 + 升级规则",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ComputeRxRequest"
        },
        {
          "name": "engine",
          "type": "BehaviorRxEngine"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/{rx_id}",
      "function": "get_rx_detail",
      "file": "behavior_rx/api/rx_routes.py",
      "line": 182,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "RxPrescriptionDTO",
      "return_type": null,
      "docstring": "通过 rx_id 获取处方详情",
      "is_async": true,
      "parameters": [
        {
          "name": "rx_id",
          "type": "uuid.UUID"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/user/{user_id}",
      "function": "get_user_rx_history",
      "file": "behavior_rx/api/rx_routes.py",
      "line": 207,
      "module": "user",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "RxListResponse",
      "return_type": null,
      "docstring": "获取指定用户的处方历史\n\n支持按 agent_type 过滤, 按时间倒序排列",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "uuid.UUID"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "agent_type",
          "type": "Optional[ExpertAgentType]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/strategies",
      "function": "list_strategy_templates",
      "file": "behavior_rx/api/rx_routes.py",
      "line": 235,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rx_engine",
          "role": "custom"
        }
      ],
      "response_model": "List[Dict[str, Any]]",
      "return_type": null,
      "docstring": "获取 12 种行为策略模板\n\n可按 domain 过滤 (general/metabolic/cardiac/adherence)",
      "is_async": true,
      "parameters": [
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "enabled_only",
          "type": "bool"
        },
        {
          "name": "engine",
          "type": "BehaviorRxEngine"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/handoff",
      "function": "initiate_handoff",
      "file": "behavior_rx/api/rx_routes.py",
      "line": 268,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_handoff_service",
          "role": "custom"
        }
      ],
      "response_model": "Dict[str, Any]",
      "return_type": null,
      "docstring": "发起 Agent 交接\n\n交接类型:\n  - stage_promotion: 阶段晋升交接 (Coach → 领域Agent)\n  - stage_regression: 阶段回退接管 (领域Agent → Coach)\n  - domain_coordination: 领域间协作交接\n  - cross_cutting: 横切介入 (Adherence Agent)\n  - emergency",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "HandoffRequest"
        },
        {
          "name": "service",
          "type": "AgentHandoffService"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/handoff/{user_id}",
      "function": "get_handoff_logs",
      "file": "behavior_rx/api/rx_routes.py",
      "line": 303,
      "module": "handoff",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "HandoffListResponse",
      "return_type": null,
      "docstring": "获取指定用户的 Agent 交接历史日志",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "uuid.UUID"
        },
        {
          "name": "limit",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/collaborate",
      "function": "collaborate",
      "file": "behavior_rx/api/rx_routes.py",
      "line": 328,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        }
      ],
      "response_model": "CollaborateResponse",
      "return_type": null,
      "docstring": "4-Agent 协作编排执行\n\n自动识别场景并编排:\n  - new_user_assessment: 新用户 → Coach主导\n  - glucose_abnormal: 血糖异常 → Metabolic主导\n  - exercise_fear: 运动恐惧 → Coach前置 + Cardiac待命\n  - multi_morbidity: 多病共管 → 并行 + 横切\n  - stage_r",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "CollaborateRequest"
        },
        {
          "name": "orchestrator",
          "type": "AgentCollaborationOrchestrator"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/agents/status",
      "function": "get_agents_status",
      "file": "behavior_rx/api/rx_routes.py",
      "line": 385,
      "module": "agents",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        }
      ],
      "response_model": "AgentStatusResponse",
      "return_type": null,
      "docstring": "获取 4 款专家 Agent 的注册状态",
      "is_async": true,
      "parameters": [
        {
          "name": "orchestrator",
          "type": "AgentCollaborationOrchestrator"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/compute",
      "function": "compute_rx",
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
      "line": 137,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rx_engine",
          "role": "custom"
        }
      ],
      "response_model": "ComputeRxResponse",
      "return_type": null,
      "docstring": "计算行为处方\n\n输入三维上下文, 输出个性化处方对象:\n  - 目标行为 + 主策略 + 辅助策略\n  - 强度 + 节奏 + 沟通风格\n  - 微行动列表 + 奖励触发器\n  - 阻力阈值 + 升级规则",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ComputeRxRequest"
        },
        {
          "name": "engine",
          "type": "BehaviorRxEngine"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/{rx_id}",
      "function": "get_rx_detail",
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
      "line": 182,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "RxPrescriptionDTO",
      "return_type": null,
      "docstring": "通过 rx_id 获取处方详情",
      "is_async": true,
      "parameters": [
        {
          "name": "rx_id",
          "type": "uuid.UUID"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/user/{user_id}",
      "function": "get_user_rx_history",
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
      "line": 207,
      "module": "user",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "RxListResponse",
      "return_type": null,
      "docstring": "获取指定用户的处方历史\n\n支持按 agent_type 过滤, 按时间倒序排列",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "uuid.UUID"
        },
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "agent_type",
          "type": "Optional[ExpertAgentType]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/strategies",
      "function": "list_strategy_templates",
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
      "line": 235,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rx_engine",
          "role": "custom"
        }
      ],
      "response_model": "List[Dict[str, Any]]",
      "return_type": null,
      "docstring": "获取 12 种行为策略模板\n\n可按 domain 过滤 (general/metabolic/cardiac/adherence)",
      "is_async": true,
      "parameters": [
        {
          "name": "domain",
          "type": "Optional[str]"
        },
        {
          "name": "enabled_only",
          "type": "bool"
        },
        {
          "name": "engine",
          "type": "BehaviorRxEngine"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/handoff",
      "function": "initiate_handoff",
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
      "line": 268,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_handoff_service",
          "role": "custom"
        }
      ],
      "response_model": "Dict[str, Any]",
      "return_type": null,
      "docstring": "发起 Agent 交接\n\n交接类型:\n  - stage_promotion: 阶段晋升交接 (Coach → 领域Agent)\n  - stage_regression: 阶段回退接管 (领域Agent → Coach)\n  - domain_coordination: 领域间协作交接\n  - cross_cutting: 横切介入 (Adherence Agent)\n  - emergency",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "HandoffRequest"
        },
        {
          "name": "service",
          "type": "AgentHandoffService"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/handoff/{user_id}",
      "function": "get_handoff_logs",
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
      "line": 303,
      "module": "handoff",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "HandoffListResponse",
      "return_type": null,
      "docstring": "获取指定用户的 Agent 交接历史日志",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "uuid.UUID"
        },
        {
          "name": "limit",
          "type": "int"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/rx/collaborate",
      "function": "collaborate",
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
      "line": 328,
      "module": "rx",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        }
      ],
      "response_model": "CollaborateResponse",
      "return_type": null,
      "docstring": "4-Agent 协作编排执行\n\n自动识别场景并编排:\n  - new_user_assessment: 新用户 → Coach主导\n  - glucose_abnormal: 血糖异常 → Metabolic主导\n  - exercise_fear: 运动恐惧 → Coach前置 + Cardiac待命\n  - multi_morbidity: 多病共管 → 并行 + 横切\n  - stage_r",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "CollaborateRequest"
        },
        {
          "name": "orchestrator",
          "type": "AgentCollaborationOrchestrator"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/rx/agents/status",
      "function": "get_agents_status",
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
      "line": 385,
      "module": "agents",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        }
      ],
      "response_model": "AgentStatusResponse",
      "return_type": null,
      "docstring": "获取 4 款专家 Agent 的注册状态",
      "is_async": true,
      "parameters": [
        {
          "name": "orchestrator",
          "type": "AgentCollaborationOrchestrator"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/metrics",
      "function": "metrics",
      "file": "core/metrics.py",
      "line": 31,
      "module": "metrics",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/api/v1/incentive/checkin",
      "function": "checkin",
      "file": "core/milestone_service.py",
      "line": 471,
      "module": "milestone_service",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "每日打卡",
      "is_async": false,
      "parameters": [
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/incentive/first-login",
      "function": "first_login",
      "file": "core/milestone_service.py",
      "line": 477,
      "module": "milestone_service",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "注册后触发种子仪式",
      "is_async": false,
      "parameters": [
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/incentive/dashboard",
      "function": "dash",
      "file": "core/milestone_service.py",
      "line": 483,
      "module": "milestone_service",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "用户激励面板",
      "is_async": false,
      "parameters": [
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/incentive/flip-card/choose",
      "function": "flip",
      "file": "core/milestone_service.py",
      "line": 489,
      "module": "flip-card",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "翻牌选择",
      "is_async": false,
      "parameters": [
        {
          "name": "body",
          "type": "FlipCardChoice"
        },
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/incentive/streak/recover",
      "function": "recover",
      "file": "core/milestone_service.py",
      "line": 495,
      "module": "streak",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "断签恢复",
      "is_async": false,
      "parameters": [
        {
          "name": "body",
          "type": "StreakRecoveryReq"
        },
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/incentive/ritual/played",
      "function": "ritual",
      "file": "core/milestone_service.py",
      "line": 501,
      "module": "ritual",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "仪式播放完成回调",
      "is_async": false,
      "parameters": [
        {
          "name": "body",
          "type": "RitualPlayed"
        },
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/incentive/badges",
      "function": "badges",
      "file": "core/milestone_service.py",
      "line": 512,
      "module": "milestone_service",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "已获徽章列表",
      "is_async": false,
      "parameters": [
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/incentive/badges/available",
      "function": "badges_avail",
      "file": "core/milestone_service.py",
      "line": 527,
      "module": "badges",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "所有可获徽章+进度",
      "is_async": false,
      "parameters": [
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/incentive/memorials",
      "function": "memorials",
      "file": "core/milestone_service.py",
      "line": 541,
      "module": "milestone_service",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "纪念物列表",
      "is_async": false,
      "parameters": [
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/incentive/ceremony/{from_role}/{to_role}",
      "function": "ceremony_cfg",
      "file": "core/milestone_service.py",
      "line": 555,
      "module": "ceremony",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "晋级仪式配置",
      "is_async": false,
      "parameters": [
        {
          "name": "from_role",
          "type": "str"
        },
        {
          "name": "to_role",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/incentive/ceremony/{from_role}/{to_role}/complete",
      "function": "ceremony_done",
      "file": "core/milestone_service.py",
      "line": 564,
      "module": "ceremony",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_uid",
          "role": "custom"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": null,
      "return_type": null,
      "docstring": "晋级仪式完成",
      "is_async": false,
      "parameters": [
        {
          "name": "from_role",
          "type": "str"
        },
        {
          "name": "to_role",
          "type": "str"
        },
        {
          "name": "uid",
          "type": "int"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/health",
      "function": "health",
      "file": "tests/conftest.py",
      "line": 92,
      "module": "conftest",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/test",
      "function": "test_endpoint",
      "file": "tests/conftest.py",
      "line": 96,
      "module": "test",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v3/assessment/batches",
      "function": "list_batches",
      "file": "v3/routers/assessment.py",
      "line": 22,
      "module": "assessment",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "返回评估批次清单 (题数/估时/所属工具)",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v3/assessment/session",
      "function": "get_session",
      "file": "v3/routers/assessment.py",
      "line": 39,
      "module": "assessment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "获取或创建用户评估会话, 返回已完成批次和总进度",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/assessment/submit",
      "function": "submit_assessment_batch",
      "file": "v3/routers/assessment.py",
      "line": 59,
      "module": "assessment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "提交一个批次的答案\n\nbatch_id: 批次标识 (如 \"ttm7\", \"spi_p1\", \"hbm\" 等)\nanswers: 答案 (格式取决于批次类型)",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "BatchSubmitRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/assessment/recommend",
      "function": "recommend_next",
      "file": "v3/routers/assessment.py",
      "line": 86,
      "module": "assessment",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "自适应推荐下一个评估批次\n\n根据用户已完成的批次和当前状态, 推荐最有价值的下一批",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/auth/register",
      "function": "register",
      "file": "v3/routers/auth.py",
      "line": 23,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "手机号 + 密码注册\n\n密码: bcrypt 散列存储, 最少 6 位",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "RegisterRequest"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/auth/login",
      "function": "login",
      "file": "v3/routers/auth.py",
      "line": 54,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "手机号或用户名 + 密码登录 → 返回 access_token + refresh_token",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "LoginRequest"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/auth/refresh",
      "function": "refresh_token",
      "file": "v3/routers/auth.py",
      "line": 83,
      "module": "auth",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "用 refresh_token 换取新的 token 对\n\nrefresh_token 有效期 7 天, access_token 2 小时",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "RefreshRequest"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/auth/me",
      "function": "get_me",
      "file": "v3/routers/auth.py",
      "line": 102,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v3/auth/password",
      "function": "change_password",
      "file": "v3/routers/auth.py",
      "line": 107,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "ChangePasswordRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v3/auth/profile",
      "function": "update_profile",
      "file": "v3/routers/auth.py",
      "line": 121,
      "module": "auth",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "",
      "is_async": false,
      "parameters": [
        {
          "name": "nickname",
          "type": "str | None"
        },
        {
          "name": "avatar_url",
          "type": "str | None"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/auth/users",
      "function": "list_users",
      "file": "v3/routers/auth.py",
      "line": 138,
      "module": "auth",
      "auth_level": "role_required",
      "dependencies": [
        {
          "dependency": "require_role(admin,bhp_master)",
          "role": "role_required"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "管理员查看用户列表",
      "is_async": false,
      "parameters": [
        {
          "name": "page",
          "type": "int"
        },
        {
          "name": "page_size",
          "type": "int"
        },
        {
          "name": "role",
          "type": "str | None"
        },
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "PUT",
      "path": "/api/v3/auth/users/{user_id}/role",
      "function": "update_role",
      "file": "v3/routers/auth.py",
      "line": 162,
      "module": "users",
      "auth_level": "role_required",
      "dependencies": [
        {
          "dependency": "require_role(admin)",
          "role": "role_required"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "仅 admin 可修改角色",
      "is_async": false,
      "parameters": [
        {
          "name": "user_id",
          "type": "int"
        },
        {
          "name": "new_role",
          "type": "str"
        },
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/chat/message",
      "function": "chat_message",
      "file": "v3/routers/chat.py",
      "line": 26,
      "module": "chat",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_coach_agent",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "智能对话入口: 自动意图分类 → 路由到合适的模型 → RAG 增强\n\n意图类型:\n- greeting / checkin_confirm → 快捷回复 (不调 LLM)\n- knowledge_qa / strategy_explain → RAG 检索 + LLM\n- coach_dialogue / crisis_support → 画像注入 + RAG + 高级模型\n- general_",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "ChatRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "agent",
          "type": "CoachAgent"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/chat/knowledge",
      "function": "knowledge_query",
      "file": "v3/routers/chat.py",
      "line": 66,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rag_pipeline",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "知识库检索 + LLM 生成回答\n\ndoc_type 过滤: spec / strategy / tcm / clinical / course / faq",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "KnowledgeQueryRequest"
        },
        {
          "name": "pipeline",
          "type": "RAGPipeline"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/chat/knowledge/search",
      "function": "knowledge_search",
      "file": "v3/routers/chat.py",
      "line": 86,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_rag_pipeline",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "纯向量检索, 返回相似文档片段, 不调 LLM",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "KnowledgeQueryRequest"
        },
        {
          "name": "pipeline",
          "type": "RAGPipeline"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/chat/prescription",
      "function": "generate_prescription",
      "file": "v3/routers/chat.py",
      "line": 105,
      "module": "chat",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_coach_agent",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "结合用户画像 + 知识库中的干预策略 → LLM 生成个性化行为处方",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "PrescriptionRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "agent",
          "type": "CoachAgent"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/chat/stats",
      "function": "chat_stats",
      "file": "v3/routers/chat.py",
      "line": 129,
      "module": "chat",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_coach_agent",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "返回 LLM 路由统计: 调用量/成本/延迟/降级率",
      "is_async": false,
      "parameters": [
        {
          "name": "agent",
          "type": "CoachAgent"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/diagnostic/minimal",
      "function": "diagnostic_minimal",
      "file": "v3/routers/diagnostic.py",
      "line": 37,
      "module": "diagnostic",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "TTM 7 题 + SPI quick 5 题 = 12 题即可生成基础处方\n\n返回: Layer1 + Layer2 + Layer4(基础处方)",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "DiagnosticMinimalRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/diagnostic/full",
      "function": "diagnostic_full",
      "file": "v3/routers/diagnostic.py",
      "line": 61,
      "module": "diagnostic",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "完整诊断管道: Layer1(行为诊断) → Layer2(SPI) → Layer3(能力与支持) → Layer4(处方)",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "DiagnosticFullRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/health",
      "function": "health_check",
      "file": "v3/routers/health.py",
      "line": 23,
      "module": "health",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "轻量健康检查 (不查外部依赖)",
      "is_async": false,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v3/status",
      "function": "system_status",
      "file": "v3/routers/health.py",
      "line": 33,
      "module": "v3",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_db",
          "role": "database"
        },
        {
          "dependency": "get_qdrant_store",
          "role": "custom"
        },
        {
          "dependency": "get_llm_router",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "完整系统状态:\n- 数据库连接\n- Qdrant 向量库\n- LLM 路由统计\n- 环境变量检查",
      "is_async": false,
      "parameters": [
        {
          "name": "db",
          "type": "Session"
        },
        {
          "name": "store",
          "type": "QdrantStore"
        },
        {
          "name": "router_inst",
          "type": "LLMRouter"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/incentive/checkin",
      "function": "checkin",
      "file": "v3/routers/incentive.py",
      "line": 19,
      "module": "incentive",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "每日打卡获得积分",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/incentive/task-complete",
      "function": "task_complete",
      "file": "v3/routers/incentive.py",
      "line": 31,
      "module": "incentive",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "完成单个任务获得积分",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "TaskCompleteRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/incentive/balance",
      "function": "get_balance",
      "file": "v3/routers/incentive.py",
      "line": 44,
      "module": "incentive",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "查询用户积分余额和成长等级",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/incentive/rx-context",
      "function": "rx_context",
      "file": "v3/routers/incentive.py",
      "line": 63,
      "module": "incentive",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "获取当前成长等级下的处方模式和激励参数",
      "is_async": false,
      "parameters": [
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v3/admin/knowledge/stats",
      "function": "knowledge_stats",
      "file": "v3/routers/knowledge.py",
      "line": 20,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_qdrant_store",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "查看 Qdrant 集合统计: 文档数/向量数/状态",
      "is_async": false,
      "parameters": [
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "store",
          "type": "QdrantStore"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/admin/knowledge/load-file",
      "function": "load_file",
      "file": "v3/routers/knowledge.py",
      "line": 33,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_knowledge_loader",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "加载单个文件到知识库 (.md / .txt / .json)",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "KnowledgeLoadFileRequest"
        },
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "loader",
          "type": "KnowledgeLoader"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/admin/knowledge/load-dir",
      "function": "load_directory",
      "file": "v3/routers/knowledge.py",
      "line": 53,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_knowledge_loader",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "批量加载目录下所有 .md/.txt/.json 文件",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "KnowledgeLoadDirRequest"
        },
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "loader",
          "type": "KnowledgeLoader"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/admin/knowledge/init",
      "function": "init_collection",
      "file": "v3/routers/knowledge.py",
      "line": 72,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_qdrant_store",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "创建 Qdrant 集合 (如不存在)",
      "is_async": false,
      "parameters": [
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "store",
          "type": "QdrantStore"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v3/admin/knowledge/reset",
      "function": "reset_collection",
      "file": "v3/routers/knowledge.py",
      "line": 85,
      "module": "knowledge",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "_admin_dep",
          "role": "custom"
        },
        {
          "dependency": "get_qdrant_store",
          "role": "custom"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "删除并重建 Qdrant 集合 (危险操作!)",
      "is_async": false,
      "parameters": [
        {
          "name": "_admin",
          "type": "User"
        },
        {
          "name": "store",
          "type": "QdrantStore"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/tracking/daily",
      "function": "record_daily",
      "file": "v3/routers/tracking.py",
      "line": 22,
      "module": "tracking",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "每日打卡后提交: 任务完成情况 + 心情 + 难度反馈\n\n自动触发 PDCA 检查:\n- 连续3天完成率<50% → 降低难度\n- 连续7天完成率>90% → 可升级",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "DailyOutcomeRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/tracking/weekly-review",
      "function": "weekly_review",
      "file": "v3/routers/tracking.py",
      "line": 60,
      "module": "tracking",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "生成过去 7 天的效果报告:\n- 完成率趋势\n- SPI 变化\n- 阶段转变建议\n- PDCA 调整汇总",
      "is_async": false,
      "parameters": [
        {
          "name": "req",
          "type": "WeeklyReviewRequest"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v3/tracking/stage-transition",
      "function": "stage_transition",
      "file": "v3/routers/tracking.py",
      "line": 91,
      "module": "tracking",
      "auth_level": "authenticated",
      "dependencies": [
        {
          "dependency": "get_current_user",
          "role": "authenticated"
        },
        {
          "dependency": "get_db",
          "role": "database"
        }
      ],
      "response_model": "APIResponse",
      "return_type": null,
      "docstring": "记录行为阶段变化 (S0→S1 等)",
      "is_async": false,
      "parameters": [
        {
          "name": "from_stage",
          "type": "str"
        },
        {
          "name": "to_stage",
          "type": "str"
        },
        {
          "name": "trigger",
          "type": "str"
        },
        {
          "name": "user",
          "type": "User"
        },
        {
          "name": "db",
          "type": "Session"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/behavioral/process",
      "function": "process_octopus_logic",
      "file": "xingjian-agent/api/main.py",
      "line": 141,
      "module": "behavioral",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "八爪鱼全链路干预接口：\n执行：判断 -> 专家路由 -> 任务分解 -> 效能限幅 -> 生成指令",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "str"
        },
        {
          "name": "message",
          "type": "str"
        },
        {
          "name": "wearable_data",
          "type": "Dict[str, Any]"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/telemetry",
      "function": "ingest_telemetry",
      "file": "xingjian-agent/api/main.py",
      "line": 160,
      "module": "telemetry",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "目标 3：模拟穿戴设备生理数据上报接口 (心率、步数、睡眠)",
      "is_async": true,
      "parameters": [
        {
          "name": "user_id",
          "type": "str"
        },
        {
          "name": "data",
          "type": "Dict[str, Any]"
        }
      ]
    },
    {
      "method": "GET",
      "path": "/",
      "function": "root",
      "file": "xingjian-agent/api/main.py",
      "line": 180,
      "module": "main",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/health",
      "function": "health_check",
      "file": "xingjian-agent/api/routes.py",
      "line": 96,
      "module": "routes",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "HealthCheckResponse",
      "return_type": null,
      "docstring": "健康检查端点",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/api/v1/experts",
      "function": "list_experts",
      "file": "xingjian-agent/api/routes.py",
      "line": 120,
      "module": "routes",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        }
      ],
      "response_model": "ExpertsListResponse",
      "return_type": null,
      "docstring": "获取专家列表",
      "is_async": true,
      "parameters": [
        {
          "name": "orchestrator",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/chat",
      "function": "chat",
      "file": "xingjian-agent/api/routes.py",
      "line": 153,
      "module": "routes",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_orchestrator",
          "role": "custom"
        }
      ],
      "response_model": "OctopusChatResponse",
      "return_type": null,
      "docstring": "八爪鱼智能对话接口\n\n- 自动路由到合适的专家\n- 集成效能感限幅 (Octopus Clamping)\n- 返回 reasoning_path 和 clamped_tasks\n- 支持穿戴设备数据 (wearable_data) 输入",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "OctopusChatRequest"
        },
        {
          "name": "orchestrator",
          "type": "Any"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/decompose",
      "function": "decompose_advice",
      "file": "xingjian-agent/api/routes.py",
      "line": 292,
      "module": "routes",
      "auth_level": "custom",
      "dependencies": [
        {
          "dependency": "get_decomposer",
          "role": "custom"
        }
      ],
      "response_model": "DecomposeResponse",
      "return_type": null,
      "docstring": "任务分解接口\n\n- 将长建议拆解为具体任务\n- 每个任务包含效能评分\n- 支持个性化分解",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "DecomposeRequest"
        },
        {
          "name": "decomposer",
          "type": "Any"
        }
      ]
    },
    {
      "method": "DELETE",
      "path": "/api/v1/session/{session_id}",
      "function": "delete_session",
      "file": "xingjian-agent/api/routes.py",
      "line": 343,
      "module": "session",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "删除会话",
      "is_async": true,
      "parameters": [
        {
          "name": "session_id",
          "type": "str"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/session/reset-all",
      "function": "reset_all_sessions",
      "file": "xingjian-agent/api/routes.py",
      "line": 359,
      "module": "session",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "重置所有会话",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/",
      "function": "root",
      "file": "xingjian-agent/api/xingjian_api.py",
      "line": 102,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "API 根路径",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/health",
      "function": "health_check",
      "file": "xingjian-agent/api/xingjian_api.py",
      "line": 113,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "健康检查",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/experts",
      "function": "list_experts",
      "file": "xingjian-agent/api/xingjian_api.py",
      "line": 123,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "List[ExpertInfo]",
      "return_type": null,
      "docstring": "获取可用专家列表",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "POST",
      "path": "/chat",
      "function": "chat",
      "file": "xingjian-agent/api/xingjian_api.py",
      "line": 132,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "ChatResponse",
      "return_type": null,
      "docstring": "健康咨询接口\n\n- 自动路由到合适的专家\n- 支持多专家协作\n- 可指定专家直接对话",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ChatRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/clamping",
      "function": "octopus_clamping",
      "file": "xingjian-agent/api/xingjian_api.py",
      "line": 168,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": "ClampingResponse",
      "return_type": null,
      "docstring": "八爪鱼效能限幅接口\n\n根据用户效能分和穿戴数据，动态裁剪任务难度和数量",
      "is_async": true,
      "parameters": [
        {
          "name": "request",
          "type": "ClampingRequest"
        }
      ]
    },
    {
      "method": "POST",
      "path": "/reset",
      "function": "reset_conversation",
      "file": "xingjian-agent/api/xingjian_api.py",
      "line": 189,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "重置所有对话历史",
      "is_async": true,
      "parameters": []
    },
    {
      "method": "GET",
      "path": "/openapi-tools.json",
      "function": "get_dify_tools_schema",
      "file": "xingjian-agent/api/xingjian_api.py",
      "line": 201,
      "module": "xingjian",
      "auth_level": "public",
      "dependencies": [],
      "response_model": null,
      "return_type": null,
      "docstring": "获取 Dify 自定义工具 Schema\n\n在 Dify 中创建自定义工具时，导入此 Schema",
      "is_async": true,
      "parameters": []
    }
  ],
  "modules": {
    "main": [
      {
        "method": "GET",
        "path": "/api/v1/",
        "function": "read_root",
        "file": "main.py",
        "line": 113,
        "module": "main",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "根路径 - 状态检查",
        "is_async": false,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/health",
        "function": "health_check",
        "file": "main.py",
        "line": 128,
        "module": "main",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "基础健康检查（快速）",
        "is_async": false,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/api/v1/intervene",
        "function": "get_intervention",
        "file": "main.py",
        "line": 150,
        "module": "main",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "接收数据并生成干预建议\n\n[v14-ENHANCED] 增加事件路由和安全检查",
        "is_async": true,
        "parameters": [
          {
            "name": "data",
            "type": "HealthDataInput"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/latest_status",
        "function": "get_latest",
        "file": "main.py",
        "line": 205,
        "module": "main",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "供前端轮询最新状态",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/api/v1/chat",
        "function": "chat_with_coach",
        "file": "main.py",
        "line": 211,
        "module": "main",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "AI 教练对话（SSE 流式返回）",
        "is_async": true,
        "parameters": [
          {
            "name": "data",
            "type": "dict"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/chat_sync",
        "function": "chat_with_coach_sync",
        "file": "main.py",
        "line": 232,
        "module": "main",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "AI 教练对话（非流式，兼容旧前端）\n\n[v11] 优先调用 Dify，Dify 不可用时自动回退 Ollama 本地模型\n[v14-ENHANCED] 增加安全检查",
        "is_async": true,
        "parameters": [
          {
            "name": "data",
            "type": "dict"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/health",
        "function": "health",
        "file": "api/main.py",
        "line": 661,
        "module": "main",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "基础健康检查（快速）",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/",
        "function": "root",
        "file": "xingjian-agent/api/main.py",
        "line": 180,
        "module": "main",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": true,
        "parameters": []
      }
    ],
    "health": [
      {
        "method": "GET",
        "path": "/api/v1/health",
        "function": "comprehensive_health",
        "file": "main.py",
        "line": 139,
        "module": "health",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "综合健康检查（检测所有依赖）",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/health",
        "function": "comprehensive_health",
        "file": "api/main.py",
        "line": 667,
        "module": "health",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "综合健康检查（检测所有依赖）",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/health",
        "function": "health_check",
        "file": "api/routers/health.py",
        "line": 23,
        "module": "health",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "轻量健康检查 (不查外部依赖)",
        "is_async": false,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/health",
        "function": "health_check",
        "file": "v3/routers/health.py",
        "line": 23,
        "module": "health",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "轻量健康检查 (不查外部依赖)",
        "is_async": false,
        "parameters": []
      }
    ],
    "run_quality_service": [
      {
        "method": "GET",
        "path": "/api/v2/",
        "function": "root",
        "file": "run_quality_service.py",
        "line": 79,
        "module": "run_quality_service",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v2/health",
        "function": "health",
        "file": "run_quality_service.py",
        "line": 89,
        "module": "run_quality_service",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": []
      }
    ],
    "admin_analytics": [
      {
        "method": "GET",
        "path": "/api/v1/analytics/admin/overview",
        "function": "get_overview",
        "file": "api/admin_analytics_api.py",
        "line": 50,
        "module": "admin_analytics",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "平台概览 KPI",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/admin/user-growth",
        "function": "get_user_growth",
        "file": "api/admin_analytics_api.py",
        "line": 91,
        "module": "admin_analytics",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户增长趋势 (bar + line)",
        "is_async": false,
        "parameters": [
          {
            "name": "months",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/admin/role-distribution",
        "function": "get_role_distribution",
        "file": "api/admin_analytics_api.py",
        "line": 125,
        "module": "admin_analytics",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "角色分布 (pie)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/admin/stage-distribution",
        "function": "get_stage_distribution",
        "file": "api/admin_analytics_api.py",
        "line": 148,
        "module": "admin_analytics",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "全平台行为阶段分布 (bar)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/admin/risk-distribution",
        "function": "get_risk_distribution",
        "file": "api/admin_analytics_api.py",
        "line": 170,
        "module": "admin_analytics",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "风险等级分布 (donut) — 取每用户最新评估",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/admin/coach-leaderboard",
        "function": "get_coach_leaderboard",
        "file": "api/admin_analytics_api.py",
        "line": 207,
        "module": "admin_analytics",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练绩效排行 (horizontal bar)",
        "is_async": false,
        "parameters": [
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/admin/challenge-effectiveness",
        "function": "get_challenge_effectiveness",
        "file": "api/admin_analytics_api.py",
        "line": 265,
        "module": "admin_analytics",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "挑战活动效果 (grouped bar)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "agent": [
      {
        "method": "GET",
        "path": "/api/v1/agent/list",
        "function": "list_agents",
        "file": "api/agent_api.py",
        "line": 306,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "resolve_tenant_ctx",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取所有已注册Agent列表 (优先从模板缓存读取)",
        "is_async": true,
        "parameters": [
          {
            "name": "current_user",
            "type": "Any"
          },
          {
            "name": "tenant_ctx",
            "type": "Optional[Dict]"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent/run",
        "function": "run_agent",
        "file": "api/agent_api.py",
        "line": 341,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "resolve_tenant_ctx",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "运行Agent任务 (v6 + tenant_ctx 优先, v0 降级)",
        "is_async": true,
        "parameters": [
          {
            "name": "req",
            "type": "AgentRunRequest"
          },
          {
            "name": "current_user",
            "type": "Any"
          },
          {
            "name": "tenant_ctx",
            "type": "Optional[Dict]"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent/pending-reviews",
        "function": "get_pending_reviews",
        "file": "api/agent_api.py",
        "line": 352,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取待审核的Agent输出",
        "is_async": true,
        "parameters": [
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent/feedback",
        "function": "submit_feedback",
        "file": "api/agent_api.py",
        "line": 358,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交Agent输出反馈（审核/评分）",
        "is_async": true,
        "parameters": [
          {
            "name": "req",
            "type": "FeedbackRequest"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent/stats/{agent_id}",
        "function": "get_agent_stats",
        "file": "api/agent_api.py",
        "line": 383,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取Agent执行统计",
        "is_async": true,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent/history",
        "function": "get_history",
        "file": "api/agent_api.py",
        "line": 410,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取Agent执行历史",
        "is_async": true,
        "parameters": [
          {
            "name": "agent_id",
            "type": "Optional[str]"
          },
          {
            "name": "user_id",
            "type": "Optional[str]"
          },
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent/pending-reviews/inject",
        "function": "inject_pending_review",
        "file": "api/agent_api.py",
        "line": 439,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "注入待审案例（仿真测试数据）",
        "is_async": true,
        "parameters": [
          {
            "name": "data",
            "type": "Dict[str, Any]"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent/events/inject",
        "function": "inject_behavior_event",
        "file": "api/agent_api.py",
        "line": 470,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "注入行为事件（仿真测试数据）",
        "is_async": true,
        "parameters": [
          {
            "name": "data",
            "type": "Dict[str, Any]"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent/status",
        "function": "agent_system_status",
        "file": "api/agent_api.py",
        "line": 509,
        "module": "agent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取多Agent系统整体状态",
        "is_async": true,
        "parameters": [
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/mp/agent/respond",
        "function": "agent_respond",
        "file": "api/miniprogram.py",
        "line": 513,
        "module": "agent",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": "AgentResponse",
        "return_type": null,
        "docstring": "Agent AI响应\n\n根据阶段和事件生成个性化响应\n支持 LLM (Ollama) 和模板回退",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "AgentRequest"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v2/agent/process",
        "function": "process_with_agents",
        "file": "api/v14/routes.py",
        "line": 294,
        "module": "agent",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "使用v14 Agent处理消息\n\nSafetyAgent始终启用，其他Agent根据配置",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "AgentProcessRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v2/agent/safety-check",
        "function": "safety_check",
        "file": "api/v14/routes.py",
        "line": 330,
        "module": "agent",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "安全检查（SafetyAgent独立接口）\n\n此接口始终可用（SafetyAgent始终启用）",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "message",
            "type": "str"
          }
        ]
      }
    ],
    "content-governance": [
      {
        "method": "POST",
        "path": "/api/v1/content-governance/audit-log/inject",
        "function": "inject_governance_log",
        "file": "api/agent_api.py",
        "line": 488,
        "module": "content-governance",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "注入治理评分日志（仿真测试数据）",
        "is_async": true,
        "parameters": [
          {
            "name": "data",
            "type": "Dict[str, Any]"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "agent_ecosystem": [
      {
        "method": "GET",
        "path": "/api/v1/agent-ecosystem/marketplace",
        "function": "browse_marketplace",
        "file": "api/agent_ecosystem_api.py",
        "line": 60,
        "module": "agent_ecosystem",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "浏览 Agent 模板市场",
        "is_async": false,
        "parameters": [
          {
            "name": "category",
            "type": "Optional[str]"
          },
          {
            "name": "search",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-ecosystem/compositions",
        "function": "list_compositions",
        "file": "api/agent_ecosystem_api.py",
        "line": 234,
        "module": "agent_ecosystem",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出 Agent 组合",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-ecosystem/compositions",
        "function": "create_composition",
        "file": "api/agent_ecosystem_api.py",
        "line": 255,
        "module": "agent_ecosystem",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建 Agent 组合",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "CompositionCreate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-ecosystem/growth-points",
        "function": "my_growth_points",
        "file": "api/agent_ecosystem_api.py",
        "line": 297,
        "module": "agent_ecosystem",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "我的 Agent 成长积分",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "marketplace": [
      {
        "method": "POST",
        "path": "/api/v1/agent-ecosystem/marketplace/publish",
        "function": "publish_template",
        "file": "api/agent_ecosystem_api.py",
        "line": 82,
        "module": "marketplace",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "发布 Agent 模板到市场",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "PublishRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-ecosystem/marketplace/pending",
        "function": "pending_listings",
        "file": "api/agent_ecosystem_api.py",
        "line": 117,
        "module": "marketplace",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "待审核市场发布",
        "is_async": false,
        "parameters": [
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-ecosystem/marketplace/{listing_id}/approve",
        "function": "approve_listing",
        "file": "api/agent_ecosystem_api.py",
        "line": 137,
        "module": "marketplace",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核通过市场发布",
        "is_async": false,
        "parameters": [
          {
            "name": "listing_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "ReviewRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-ecosystem/marketplace/{listing_id}/reject",
        "function": "reject_listing",
        "file": "api/agent_ecosystem_api.py",
        "line": 155,
        "module": "marketplace",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核拒绝市场发布",
        "is_async": false,
        "parameters": [
          {
            "name": "listing_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "ReviewRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-ecosystem/marketplace/{listing_id}/install",
        "function": "install_template",
        "file": "api/agent_ecosystem_api.py",
        "line": 173,
        "module": "marketplace",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "安装市场模板",
        "is_async": false,
        "parameters": [
          {
            "name": "listing_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "InstallRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-ecosystem/marketplace/recommended",
        "function": "recommended_marketplace",
        "file": "api/agent_ecosystem_api.py",
        "line": 197,
        "module": "marketplace",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "按专家领域推荐市场 Agent",
        "is_async": false,
        "parameters": [
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "compositions": [
      {
        "method": "GET",
        "path": "/api/v1/agent-ecosystem/compositions/{composition_id}",
        "function": "get_composition",
        "file": "api/agent_ecosystem_api.py",
        "line": 280,
        "module": "compositions",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "组合详情",
        "is_async": false,
        "parameters": [
          {
            "name": "composition_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "growth-points": [
      {
        "method": "GET",
        "path": "/api/v1/agent-ecosystem/growth-points/config",
        "function": "growth_points_config",
        "file": "api/agent_ecosystem_api.py",
        "line": 309,
        "module": "growth-points",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "积分事件配置",
        "is_async": false,
        "parameters": [
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "agent_feedback": [
      {
        "method": "POST",
        "path": "/api/v1/agent-feedback/submit",
        "function": "submit_feedback",
        "file": "api/agent_feedback_api.py",
        "line": 58,
        "module": "agent_feedback",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交 Agent 反馈",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "FeedbackSubmit"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-feedback/list",
        "function": "list_feedback",
        "file": "api/agent_feedback_api.py",
        "line": 90,
        "module": "agent_feedback",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查询反馈记录",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "Optional[str]"
          },
          {
            "name": "feedback_type",
            "type": "Optional[str]"
          },
          {
            "name": "tenant_id",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-feedback/summary",
        "function": "agents_summary",
        "file": "api/agent_feedback_api.py",
        "line": 122,
        "module": "agent_feedback",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "所有 Agent 成长摘要",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-feedback/prompt-version",
        "function": "create_prompt_version_endpoint",
        "file": "api/agent_feedback_api.py",
        "line": 170,
        "module": "agent_feedback",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建新的 Prompt 版本",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "PromptVersionCreate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-feedback/aggregate",
        "function": "trigger_aggregation",
        "file": "api/agent_feedback_api.py",
        "line": 216,
        "module": "agent_feedback",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "手动触发日指标聚合",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "growth": [
      {
        "method": "GET",
        "path": "/api/v1/agent-feedback/growth/{agent_id}",
        "function": "agent_growth_report",
        "file": "api/agent_feedback_api.py",
        "line": 108,
        "module": "growth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "Agent 成长报告",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "metrics": [
      {
        "method": "GET",
        "path": "/api/v1/agent-feedback/metrics/{agent_id}",
        "function": "agent_metrics",
        "file": "api/agent_feedback_api.py",
        "line": 135,
        "module": "metrics",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "Agent 日维度指标",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/metrics",
        "function": "metrics",
        "file": "core/metrics.py",
        "line": 31,
        "module": "metrics",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": true,
        "parameters": []
      }
    ],
    "prompt-versions": [
      {
        "method": "GET",
        "path": "/api/v1/agent-feedback/prompt-versions/{agent_id}",
        "function": "list_prompt_versions_endpoint",
        "file": "api/agent_feedback_api.py",
        "line": 202,
        "module": "prompt-versions",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "Agent Prompt 版本历史",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "agent_template": [
      {
        "method": "GET",
        "path": "/api/v1/agent-templates/list",
        "function": "list_templates",
        "file": "api/agent_template_api.py",
        "line": 90,
        "module": "agent_template",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_type",
            "type": "Optional[str]"
          },
          {
            "name": "is_enabled",
            "type": "Optional[bool]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-templates/presets",
        "function": "list_presets",
        "file": "api/agent_template_api.py",
        "line": 113,
        "module": "agent_template",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-templates/domains",
        "function": "list_domains",
        "file": "api/agent_template_api.py",
        "line": 125,
        "module": "agent_template",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "_admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/agent-templates/{agent_id}",
        "function": "get_template",
        "file": "api/agent_template_api.py",
        "line": 131,
        "module": "agent_template",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-templates/create",
        "function": "create_template",
        "file": "api/agent_template_api.py",
        "line": 144,
        "module": "agent_template",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "AgentTemplateCreate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/agent-templates/{agent_id}",
        "function": "update_template",
        "file": "api/agent_template_api.py",
        "line": 183,
        "module": "agent_template",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "AgentTemplateUpdate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/agent-templates/{agent_id}",
        "function": "delete_template",
        "file": "api/agent_template_api.py",
        "line": 206,
        "module": "agent_template",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-templates/refresh-cache",
        "function": "refresh_cache",
        "file": "api/agent_template_api.py",
        "line": 287,
        "module": "agent_template",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_admin",
            "type": "Any"
          }
        ]
      }
    ],
    "{agent_id}": [
      {
        "method": "POST",
        "path": "/api/v1/agent-templates/{agent_id}/toggle",
        "function": "toggle_template",
        "file": "api/agent_template_api.py",
        "line": 225,
        "module": "{agent_id}",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/agent-templates/{agent_id}/clone",
        "function": "clone_template",
        "file": "api/agent_template_api.py",
        "line": 243,
        "module": "{agent_id}",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "new_agent_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      }
    ],
    "analytics": [
      {
        "method": "GET",
        "path": "/api/v1/analytics/coach/risk-trend",
        "function": "get_risk_trend",
        "file": "api/analytics_api.py",
        "line": 52,
        "module": "analytics",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "学员风险等级趋势 (stacked area)",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/coach/micro-action-trend",
        "function": "get_micro_action_trend",
        "file": "api/analytics_api.py",
        "line": 84,
        "module": "analytics",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "微行动完成率趋势 (line + area)",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/coach/domain-performance",
        "function": "get_domain_performance",
        "file": "api/analytics_api.py",
        "line": 115,
        "module": "analytics",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "领域完成率对比 (radar)",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/coach/alert-frequency",
        "function": "get_alert_frequency",
        "file": "api/analytics_api.py",
        "line": 144,
        "module": "analytics",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "预警频率分布 (horizontal bar)",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/coach/challenge-stats",
        "function": "get_challenge_stats",
        "file": "api/analytics_api.py",
        "line": 174,
        "module": "analytics",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "挑战报名 vs 完成 (grouped bar)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/analytics/coach/stage-distribution",
        "function": "get_stage_distribution",
        "file": "api/analytics_api.py",
        "line": 199,
        "module": "analytics",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "学员阶段分布 (donut)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "recent": [
      {
        "method": "GET",
        "path": "/api/assessment/recent/{user_id}",
        "function": "get_recent_assessments",
        "file": "api/assessment_api.py",
        "line": 67,
        "module": "recent",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户最近的评估记录\n\nArgs:\n    user_id: 用户ID\n    limit: 返回数量限制（默认5条）\n\nReturns:\n    评估记录列表",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "history": [
      {
        "method": "GET",
        "path": "/api/assessment/history/{user_id}",
        "function": "get_assessment_history",
        "file": "api/assessment_api.py",
        "line": 114,
        "module": "history",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户评估历史（分页）\n\nArgs:\n    user_id: 用户ID\n    page: 页码（从1开始）\n    page_size: 每页数量\n\nReturns:\n    评估记录列表",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "assessment": [
      {
        "method": "GET",
        "path": "/api/assessment/{assessment_id}",
        "function": "get_assessment_result",
        "file": "api/assessment_api.py",
        "line": 166,
        "module": "assessment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取单个评估结果详情\n\nArgs:\n    assessment_id: 评估ID (ASS-xxx格式)\n\nReturns:\n    评估结果详情",
        "is_async": false,
        "parameters": [
          {
            "name": "assessment_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/assessment/submit",
        "function": "submit_assessment",
        "file": "api/assessment_api.py",
        "line": 214,
        "module": "assessment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交新的评估数据\n\n接收用户输入，调用L2评估引擎处理，存储结果到数据库\n\nArgs:\n    data: 评估输入数据，包含:\n        - text_content: 用户描述文本（可选）\n        - glucose_values: 血糖值列表（可选）\n        - hrv_values: HRV值列表（可选）\n        - activity_data: 活动数据（可",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "dict"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/assessment/batches",
        "function": "list_batches",
        "file": "api/routers/assessment.py",
        "line": 22,
        "module": "assessment",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "返回评估批次清单 (题数/估时/所属工具)",
        "is_async": false,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v3/assessment/session",
        "function": "get_session",
        "file": "api/routers/assessment.py",
        "line": 39,
        "module": "assessment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "获取或创建用户评估会话, 返回已完成批次和总进度",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/assessment/submit",
        "function": "submit_assessment_batch",
        "file": "api/routers/assessment.py",
        "line": 59,
        "module": "assessment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "提交一个批次的答案\n\nbatch_id: 批次标识 (如 \"ttm7\", \"spi_p1\", \"hbm\" 等)\nanswers: 答案 (格式取决于批次类型)",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "BatchSubmitRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/assessment/recommend",
        "function": "recommend_next",
        "file": "api/routers/assessment.py",
        "line": 86,
        "module": "assessment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "自适应推荐下一个评估批次\n\n根据用户已完成的批次和当前状态, 推荐最有价值的下一批",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/assessment/batches",
        "function": "list_batches",
        "file": "v3/routers/assessment.py",
        "line": 22,
        "module": "assessment",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "返回评估批次清单 (题数/估时/所属工具)",
        "is_async": false,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v3/assessment/session",
        "function": "get_session",
        "file": "v3/routers/assessment.py",
        "line": 39,
        "module": "assessment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "获取或创建用户评估会话, 返回已完成批次和总进度",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/assessment/submit",
        "function": "submit_assessment_batch",
        "file": "v3/routers/assessment.py",
        "line": 59,
        "module": "assessment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "提交一个批次的答案\n\nbatch_id: 批次标识 (如 \"ttm7\", \"spi_p1\", \"hbm\" 等)\nanswers: 答案 (格式取决于批次类型)",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "BatchSubmitRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/assessment/recommend",
        "function": "recommend_next",
        "file": "v3/routers/assessment.py",
        "line": 86,
        "module": "assessment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "自适应推荐下一个评估批次\n\n根据用户已完成的批次和当前状态, 推荐最有价值的下一批",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "user": [
      {
        "method": "GET",
        "path": "/api/assessment/user/latest",
        "function": "get_latest_assessment",
        "file": "api/assessment_api.py",
        "line": 396,
        "module": "user",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户最新的评估记录",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/content/user/learning-progress",
        "function": "get_user_learning_progress",
        "file": "api/content_api.py",
        "line": 660,
        "module": "user",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户学习进度",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/user/learning-progress",
        "function": "record_learning_progress",
        "file": "api/content_api.py",
        "line": 759,
        "module": "user",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "记录学习进度",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "LearningProgressUpdate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/content/user/learning-history",
        "function": "get_learning_history",
        "file": "api/content_api.py",
        "line": 820,
        "module": "user",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取学习历史",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "type",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/content/user/{user_id}/progress/{content_id}",
        "function": "get_user_content_progress",
        "file": "api/content_api.py",
        "line": 1188,
        "module": "user",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户对特定内容的学习进度",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "content_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/mp/user/state",
        "function": "get_user_state_api",
        "file": "api/miniprogram.py",
        "line": 605,
        "module": "user",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": "UserStateResponse",
        "return_type": null,
        "docstring": "获取用户状态",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/mp/user/mode",
        "function": "set_user_mode",
        "file": "api/miniprogram.py",
        "line": 633,
        "module": "user",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "设置用户模式\n\n- pilot: 正常模式\n- training: 训练模式（显示Prompt逻辑）",
        "is_async": true,
        "parameters": [
          {
            "name": "mode",
            "type": "str"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/admin/users",
        "function": "list_users",
        "file": "api/user_api.py",
        "line": 71,
        "module": "user",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户列表 - 支持分页、搜索、角色和状态过滤",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "search",
            "type": "Optional[str]"
          },
          {
            "name": "role",
            "type": "Optional[str]"
          },
          {
            "name": "is_active",
            "type": "Optional[bool]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/admin/users",
        "function": "create_user",
        "file": "api/user_api.py",
        "line": 153,
        "module": "user",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建新用户",
        "is_async": false,
        "parameters": [
          {
            "name": "request",
            "type": "CreateUserRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/admin/stats",
        "function": "get_stats",
        "file": "api/user_api.py",
        "line": 267,
        "module": "user",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户统计",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/admin/coaches",
        "function": "list_coaches",
        "file": "api/user_api.py",
        "line": 288,
        "module": "user",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练列表(含负载)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/stats/user/{user_id}/overview",
        "function": "user_overview",
        "file": "api/user_stats_api.py",
        "line": 23,
        "module": "user",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "个人统计总览",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/stats/user/{user_id}/activity",
        "function": "user_activity_timeline",
        "file": "api/user_stats_api.py",
        "line": 82,
        "module": "user",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户活动时间线",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/user/{user_id}",
        "function": "get_user_rx_history",
        "file": "behavior_rx/rx_routes.py",
        "line": 374,
        "module": "user",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_coach()",
            "role": "custom"
          }
        ],
        "response_model": "RxListResponse",
        "return_type": null,
        "docstring": "获取指定用户的处方历史\n\n支持按 agent_type 过滤, 按时间倒序排列",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "uuid.UUID"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "agent_type",
            "type": "Optional[ExpertAgentType]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/user/{user_id}",
        "function": "get_user_rx_history",
        "file": "behavior_rx/api/rx_routes.py",
        "line": 207,
        "module": "user",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "RxListResponse",
        "return_type": null,
        "docstring": "获取指定用户的处方历史\n\n支持按 agent_type 过滤, 按时间倒序排列",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "uuid.UUID"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "agent_type",
            "type": "Optional[ExpertAgentType]"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/user/{user_id}",
        "function": "get_user_rx_history",
        "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
        "line": 207,
        "module": "user",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "RxListResponse",
        "return_type": null,
        "docstring": "获取指定用户的处方历史\n\n支持按 agent_type 过滤, 按时间倒序排列",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "uuid.UUID"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "agent_type",
            "type": "Optional[ExpertAgentType]"
          }
        ]
      }
    ],
    "assessment_assignment": [
      {
        "method": "POST",
        "path": "/api/v1/assessment-assignments/assign",
        "function": "assign_assessment",
        "file": "api/assessment_assignment_api.py",
        "line": 101,
        "module": "assessment_assignment",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练推送评估给学员（支持量表 + 高频题目 + 上限3验证）",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "AssignRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/assessment-assignments/my-pending",
        "function": "get_my_pending_assignments",
        "file": "api/assessment_assignment_api.py",
        "line": 196,
        "module": "assessment_assignment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "学员查看待完成的评估任务",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/assessment-assignments/review-list",
        "function": "get_review_list",
        "file": "api/assessment_assignment_api.py",
        "line": 461,
        "module": "assessment_assignment",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练查看待审核的评估（status=completed）",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/assessment-assignments/pushed-list",
        "function": "get_pushed_list",
        "file": "api/assessment_assignment_api.py",
        "line": 653,
        "module": "assessment_assignment",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "学员查看所有已推送的评估结果列表",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "{assignment_id}": [
      {
        "method": "POST",
        "path": "/api/v1/assessment-assignments/{assignment_id}/submit",
        "function": "submit_assessment",
        "file": "api/assessment_assignment_api.py",
        "line": 225,
        "module": "{assignment_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "学员提交评估答案，触发管道生成处方",
        "is_async": true,
        "parameters": [
          {
            "name": "assignment_id",
            "type": "int"
          },
          {
            "name": "request",
            "type": "SubmitRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/assessment-assignments/{assignment_id}/push",
        "function": "push_reviewed_result",
        "file": "api/assessment_assignment_api.py",
        "line": 539,
        "module": "{assignment_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练推送审核结果给学员",
        "is_async": true,
        "parameters": [
          {
            "name": "assignment_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/assessment-assignments/{assignment_id}/result",
        "function": "get_assignment_result",
        "file": "api/assessment_assignment_api.py",
        "line": 590,
        "module": "{assignment_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "学员查看已推送的结果",
        "is_async": true,
        "parameters": [
          {
            "name": "assignment_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "review-items": [
      {
        "method": "PUT",
        "path": "/api/v1/assessment-assignments/review-items/{item_id}",
        "function": "update_review_item",
        "file": "api/assessment_assignment_api.py",
        "line": 504,
        "module": "review-items",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练审核单条内容",
        "is_async": true,
        "parameters": [
          {
            "name": "item_id",
            "type": "int"
          },
          {
            "name": "request",
            "type": "ReviewItemUpdate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "assessment_pipeline": [
      {
        "method": "POST",
        "path": "/api/v1/assessment/evaluate",
        "function": "evaluate_full_pipeline",
        "file": "api/assessment_pipeline_api.py",
        "line": 76,
        "module": "assessment_pipeline",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "完整评估流水线\n\n流程:\n1. BAPS 评分 (TTM7必填 + BIG5/BPT6/CAPACITY/SPI选填)\n2. BehavioralProfileService 生成/更新画像\n3. StageRuntimeBuilder 判定阶段\n4. InterventionMatcher 匹配干预\n5. PolicyGate 过闸\n6. 返回: 画像摘要 + 干预计划\n\n首次评估: 提交全部5",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "EvaluateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "profile": [
      {
        "method": "GET",
        "path": "/api/v1/assessment/profile/me",
        "function": "get_my_behavioral_profile",
        "file": "api/assessment_pipeline_api.py",
        "line": 212,
        "module": "profile",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户自己的行为画像 (去诊断化)",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/assessment/profile/{user_id}",
        "function": "get_behavioral_profile",
        "file": "api/assessment_pipeline_api.py",
        "line": 224,
        "module": "profile",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户行为画像\n\n- 普通用户只能查看自己的画像 (去诊断化)\n- 教练/管理员可查看任何用户 (完整视图)",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "intervention-plan": [
      {
        "method": "GET",
        "path": "/api/v1/assessment/intervention-plan/{user_id}",
        "function": "get_intervention_plan",
        "file": "api/assessment_pipeline_api.py",
        "line": 252,
        "module": "intervention-plan",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户当前干预计划\n\n基于最新行为画像实时生成干预匹配",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "auth": [
      {
        "method": "POST",
        "path": "/api/v1/auth/register",
        "function": "register",
        "file": "api/auth_api.py",
        "line": 151,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "TokenResponse",
        "return_type": null,
        "docstring": "用户注册\n\n创建新用户并返回认证token",
        "is_async": false,
        "parameters": [
          {
            "name": "request",
            "type": "RegisterRequest"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/auth/login",
        "function": "login",
        "file": "api/auth_api.py",
        "line": 221,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "TokenResponse",
        "return_type": null,
        "docstring": "用户登录\n\n使用用户名/邮箱和密码登录（OAuth2 Password Flow）",
        "is_async": false,
        "parameters": [
          {
            "name": "request",
            "type": "Request"
          },
          {
            "name": "form_data",
            "type": "OAuth2PasswordRequestForm"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/auth/me",
        "function": "get_current_user_info",
        "file": "api/auth_api.py",
        "line": 310,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户信息\n\n需要认证",
        "is_async": true,
        "parameters": [
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/auth/refresh",
        "function": "refresh_token",
        "file": "api/auth_api.py",
        "line": 331,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "刷新访问令牌\n\n使用 refresh_token 获取新的 access_token",
        "is_async": false,
        "parameters": [
          {
            "name": "refresh_token",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/auth/password",
        "function": "change_password",
        "file": "api/auth_api.py",
        "line": 381,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "修改密码",
        "is_async": true,
        "parameters": [
          {
            "name": "old_password",
            "type": "str"
          },
          {
            "name": "new_password",
            "type": "str"
          },
          {
            "name": "current_user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/auth/logout",
        "function": "logout",
        "file": "api/auth_api.py",
        "line": 417,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "security",
            "role": "custom"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户登出\n\n将token加入黑名单",
        "is_async": true,
        "parameters": [
          {
            "name": "credentials",
            "type": "HTTPAuthorizationCredentials"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/auth/register",
        "function": "register",
        "file": "api/routers/auth.py",
        "line": 23,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "手机号 + 密码注册\n\n密码: bcrypt 散列存储, 最少 6 位",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "RegisterRequest"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/auth/login",
        "function": "login",
        "file": "api/routers/auth.py",
        "line": 53,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "手机号 + 密码登录 → 返回 access_token + refresh_token",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "LoginRequest"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/auth/refresh",
        "function": "refresh_token",
        "file": "api/routers/auth.py",
        "line": 76,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "用 refresh_token 换取新的 token 对\n\nrefresh_token 有效期 7 天, access_token 2 小时",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "RefreshRequest"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/auth/me",
        "function": "get_me",
        "file": "api/routers/auth.py",
        "line": 96,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v3/auth/password",
        "function": "change_password",
        "file": "api/routers/auth.py",
        "line": 101,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "ChangePasswordRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v3/auth/profile",
        "function": "update_profile",
        "file": "api/routers/auth.py",
        "line": 115,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "nickname",
            "type": "str | None"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/auth/users",
        "function": "list_users",
        "file": "api/routers/auth.py",
        "line": 129,
        "module": "auth",
        "auth_level": "role_required",
        "dependencies": [
          {
            "dependency": "require_role(admin,bhp_master)",
            "role": "role_required"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "管理员查看用户列表",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "role",
            "type": "str | None"
          },
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/auth/register",
        "function": "register",
        "file": "v3/routers/auth.py",
        "line": 23,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "手机号 + 密码注册\n\n密码: bcrypt 散列存储, 最少 6 位",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "RegisterRequest"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/auth/login",
        "function": "login",
        "file": "v3/routers/auth.py",
        "line": 54,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "手机号或用户名 + 密码登录 → 返回 access_token + refresh_token",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "LoginRequest"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/auth/refresh",
        "function": "refresh_token",
        "file": "v3/routers/auth.py",
        "line": 83,
        "module": "auth",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "用 refresh_token 换取新的 token 对\n\nrefresh_token 有效期 7 天, access_token 2 小时",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "RefreshRequest"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/auth/me",
        "function": "get_me",
        "file": "v3/routers/auth.py",
        "line": 102,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v3/auth/password",
        "function": "change_password",
        "file": "v3/routers/auth.py",
        "line": 107,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "ChangePasswordRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v3/auth/profile",
        "function": "update_profile",
        "file": "v3/routers/auth.py",
        "line": 121,
        "module": "auth",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "nickname",
            "type": "str | None"
          },
          {
            "name": "avatar_url",
            "type": "str | None"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/auth/users",
        "function": "list_users",
        "file": "v3/routers/auth.py",
        "line": 138,
        "module": "auth",
        "auth_level": "role_required",
        "dependencies": [
          {
            "dependency": "require_role(admin,bhp_master)",
            "role": "role_required"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "管理员查看用户列表",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "role",
            "type": "str | None"
          },
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "baps": [
      {
        "method": "GET",
        "path": "/",
        "function": "root",
        "file": "api/baps_api.py",
        "line": 145,
        "module": "baps",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "API根路径",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/health",
        "function": "health_check",
        "file": "api/baps_api.py",
        "line": 161,
        "module": "baps",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "健康检查",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/questionnaires",
        "function": "list_questionnaires",
        "file": "api/baps_api.py",
        "line": 169,
        "module": "baps",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取所有可用问卷列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/openapi-tools.json",
        "function": "get_dify_tools_schema",
        "file": "api/baps_api.py",
        "line": 387,
        "module": "baps",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取Dify自定义工具Schema\n\n在Dify中创建自定义工具时，导入此Schema",
        "is_async": true,
        "parameters": []
      }
    ],
    "questionnaires": [
      {
        "method": "GET",
        "path": "/questionnaires/{questionnaire_type}",
        "function": "get_questionnaire",
        "file": "api/baps_api.py",
        "line": 185,
        "module": "questionnaires",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取指定问卷的详细信息和题目",
        "is_async": true,
        "parameters": [
          {
            "name": "questionnaire_type",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/questionnaires/{questionnaire_type}/items",
        "function": "get_questionnaire_items",
        "file": "api/baps_api.py",
        "line": 211,
        "module": "questionnaires",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取问卷题目列表",
        "is_async": true,
        "parameters": [
          {
            "name": "questionnaire_type",
            "type": "str"
          },
          {
            "name": "dimension",
            "type": "Optional[str]"
          }
        ]
      }
    ],
    "assess": [
      {
        "method": "POST",
        "path": "/assess/big_five",
        "function": "assess_big_five",
        "file": "api/baps_api.py",
        "line": 235,
        "module": "assess",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "大五人格评估\n\n提交50题答案，返回五维度得分和人格画像",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "BigFiveAnswers"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/assess/bpt6",
        "function": "assess_bpt6",
        "file": "api/baps_api.py",
        "line": 250,
        "module": "assess",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "BPT-6行为模式分型评估\n\n提交18题答案，返回行为类型分类和干预建议",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "BPT6Answers"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/assess/capacity",
        "function": "assess_capacity",
        "file": "api/baps_api.py",
        "line": 265,
        "module": "assess",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "CAPACITY改变潜力诊断\n\n提交32题答案，返回8维度改变潜力评估",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "CAPACITYAnswers"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/assess/spi",
        "function": "assess_spi",
        "file": "api/baps_api.py",
        "line": 280,
        "module": "assess",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "SPI成功可能性评估\n\n提交50题答案，返回SPI指数和成功预测",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "SPIAnswers"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/assess/ttm7",
        "function": "assess_ttm7",
        "file": "api/baps_api.py",
        "line": 295,
        "module": "assess",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "TTM7改变阶段评估\n\n提交21题答案，返回行为改变阶段(S0-S6)判定和子维度分析\n结果包含去诊断化的友好展示名称",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "TTM7Answers"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/assess/comprehensive",
        "function": "assess_comprehensive",
        "file": "api/baps_api.py",
        "line": 310,
        "module": "assess",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "综合评估\n\n提交四份问卷全部答案，返回综合评估报告",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ComprehensiveAnswers"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/assess/comprehensive/markdown",
        "function": "assess_comprehensive_markdown",
        "file": "api/baps_api.py",
        "line": 334,
        "module": "assess",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "综合评估（Markdown格式）\n\n返回Markdown格式的综合评估报告",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ComprehensiveAnswers"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/assess/quick",
        "function": "quick_assess",
        "file": "api/baps_api.py",
        "line": 355,
        "module": "assess",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "快速评估\n\n通用评估接口，根据assessment_type自动路由",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "QuickAssessmentRequest"
          }
        ]
      }
    ],
    "test": [
      {
        "method": "GET",
        "path": "/test/sample-answers/{questionnaire_type}",
        "function": "get_sample_answers",
        "file": "api/baps_api.py",
        "line": 487,
        "module": "test",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取问卷的示例答案（用于测试）",
        "is_async": true,
        "parameters": [
          {
            "name": "questionnaire_type",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/test/full-assessment",
        "function": "test_full_assessment",
        "file": "api/baps_api.py",
        "line": 513,
        "module": "test",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "完整评估测试\n\n使用模拟数据进行四份问卷的完整评估",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/test",
        "function": "test_endpoint",
        "file": "tests/conftest.py",
        "line": 96,
        "module": "test",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": true,
        "parameters": []
      }
    ],
    "batch_ingestion": [
      {
        "method": "POST",
        "path": "/api/v1/knowledge/batch-upload",
        "function": "batch_upload",
        "file": "api/batch_ingestion_api.py",
        "line": 25,
        "module": "batch_ingestion",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "批量上传知识文件(multipart)",
        "is_async": true,
        "parameters": [
          {
            "name": "file",
            "type": "UploadFile"
          },
          {
            "name": "scope",
            "type": "str"
          },
          {
            "name": "domain_id",
            "type": "Optional[str]"
          },
          {
            "name": "tenant_id",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/knowledge/batch-jobs",
        "function": "list_batch_jobs",
        "file": "api/batch_ingestion_api.py",
        "line": 76,
        "module": "batch_ingestion",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出批量灌注任务",
        "is_async": false,
        "parameters": [
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "batch-jobs": [
      {
        "method": "GET",
        "path": "/api/v1/knowledge/batch-jobs/{job_id}",
        "function": "get_batch_job",
        "file": "api/batch_ingestion_api.py",
        "line": 109,
        "module": "batch-jobs",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取批量灌注任务进度",
        "is_async": false,
        "parameters": [
          {
            "name": "job_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/knowledge/batch-jobs/{job_id}",
        "function": "cancel_batch_job",
        "file": "api/batch_ingestion_api.py",
        "line": 138,
        "module": "batch-jobs",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "取消/删除批量灌注任务",
        "is_async": false,
        "parameters": [
          {
            "name": "job_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "challenge": [
      {
        "method": "GET",
        "path": "/api/v1/challenges",
        "function": "list_challenges",
        "file": "api/challenge_api.py",
        "line": 191,
        "module": "challenge",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "挑战列表",
        "is_async": true,
        "parameters": [
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "category",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges",
        "function": "create_challenge",
        "file": "api/challenge_api.py",
        "line": 245,
        "module": "challenge",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建挑战模板（L3+）",
        "is_async": true,
        "parameters": [
          {
            "name": "req",
            "type": "ChallengeCreateRequest"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "challenges": [
      {
        "method": "GET",
        "path": "/api/v1/challenges/my-enrollments",
        "function": "my_enrollments",
        "file": "api/challenge_api.py",
        "line": 206,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "我的挑战列表",
        "is_async": true,
        "parameters": [
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/challenges/{challenge_id}",
        "function": "get_challenge",
        "file": "api/challenge_api.py",
        "line": 232,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "挑战详情（含推送内容）",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/challenges/{challenge_id}",
        "function": "update_challenge",
        "file": "api/challenge_api.py",
        "line": 261,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新挑战模板",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "req",
            "type": "ChallengeUpdateRequest"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/import/{config_key}",
        "function": "import_challenge",
        "file": "api/challenge_api.py",
        "line": 278,
        "module": "challenges",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "从JSON配置导入挑战（admin）",
        "is_async": true,
        "parameters": [
          {
            "name": "config_key",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/challenges/{challenge_id}",
        "function": "delete_challenge",
        "file": "api/challenge_api.py",
        "line": 294,
        "module": "challenges",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除挑战模板（admin）",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/challenges/{challenge_id}/pushes",
        "function": "get_pushes",
        "file": "api/challenge_api.py",
        "line": 322,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取全部推送内容",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/challenges/{challenge_id}/pushes/day/{day_number}",
        "function": "get_day_pushes",
        "file": "api/challenge_api.py",
        "line": 333,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取指定天推送",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "day_number",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/{challenge_id}/pushes",
        "function": "add_push",
        "file": "api/challenge_api.py",
        "line": 345,
        "module": "challenges",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "添加推送内容",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "req",
            "type": "PushCreateRequest"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/challenges/pushes/{push_id}",
        "function": "update_push",
        "file": "api/challenge_api.py",
        "line": 358,
        "module": "challenges",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新推送内容",
        "is_async": true,
        "parameters": [
          {
            "name": "push_id",
            "type": "int"
          },
          {
            "name": "req",
            "type": "PushUpdateRequest"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/challenges/pushes/{push_id}",
        "function": "delete_push",
        "file": "api/challenge_api.py",
        "line": 373,
        "module": "challenges",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除推送内容",
        "is_async": true,
        "parameters": [
          {
            "name": "push_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/{challenge_id}/submit-review",
        "function": "submit_review",
        "file": "api/challenge_api.py",
        "line": 388,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交审核",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/{challenge_id}/review",
        "function": "review",
        "file": "api/challenge_api.py",
        "line": 404,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "专家审核",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "req",
            "type": "ReviewRequest"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/{challenge_id}/enroll",
        "function": "enroll_challenge",
        "file": "api/challenge_api.py",
        "line": 428,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "报名挑战",
        "is_async": true,
        "parameters": [
          {
            "name": "challenge_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/enrollments/{enrollment_id}/start",
        "function": "start_challenge",
        "file": "api/challenge_api.py",
        "line": 442,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "开始挑战",
        "is_async": true,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/enrollments/{enrollment_id}/advance",
        "function": "advance_challenge_day",
        "file": "api/challenge_api.py",
        "line": 459,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "推进到下一天",
        "is_async": true,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/challenges/enrollments/{enrollment_id}/today",
        "function": "get_today_pushes",
        "file": "api/challenge_api.py",
        "line": 476,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "今日推送内容",
        "is_async": true,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/enrollments/{enrollment_id}/read/{push_id}",
        "function": "mark_read",
        "file": "api/challenge_api.py",
        "line": 501,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "标记推送已读",
        "is_async": true,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "int"
          },
          {
            "name": "push_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/challenges/enrollments/{enrollment_id}/progress",
        "function": "get_progress",
        "file": "api/challenge_api.py",
        "line": 516,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "进度详情",
        "is_async": true,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/challenges/enrollments/{enrollment_id}/survey/{push_id}",
        "function": "submit_survey",
        "file": "api/challenge_api.py",
        "line": 539,
        "module": "challenges",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交问卷回答",
        "is_async": true,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "int"
          },
          {
            "name": "push_id",
            "type": "int"
          },
          {
            "name": "req",
            "type": "SurveySubmitRequest"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "coach": [
      {
        "method": "POST",
        "path": "/api/v1/coach/challenges/assign",
        "function": "coach_assign",
        "file": "api/challenge_api.py",
        "line": 569,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练为学员报名挑战",
        "is_async": true,
        "parameters": [
          {
            "name": "req",
            "type": "CoachAssignRequest"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/challenges/students/{student_id}",
        "function": "coach_view_student_challenges",
        "file": "api/challenge_api.py",
        "line": 587,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练查看学员挑战列表",
        "is_async": true,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Any"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/dashboard",
        "function": "get_coach_dashboard",
        "file": "api/coach_api.py",
        "line": 62,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练工作台 - 聚合数据\n\n返回: coach 信息、今日统计、待跟进学员列表",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/students",
        "function": "list_my_students",
        "file": "api/coach_api.py",
        "line": 232,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前教练的学员列表",
        "is_async": false,
        "parameters": [
          {
            "name": "search",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/performance",
        "function": "get_my_performance",
        "file": "api/coach_api.py",
        "line": 330,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取教练绩效数据",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/my-certification",
        "function": "get_my_certification",
        "file": "api/coach_api.py",
        "line": 773,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练认证信息\n\n返回: 当前等级、升级进度、升级要求(基于真实数据)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/my-tools-stats",
        "function": "get_my_tools_stats",
        "file": "api/coach_api.py",
        "line": 876,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练工具使用统计\n\n返回: 各工具使用次数(基于消息类型/操作类型聚合)、最近活动",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/directory",
        "function": "coach_directory",
        "file": "api/coach_api.py",
        "line": 1222,
        "module": "coach",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "公开教练/专家目录 (无需登录)\n\n返回角色为 coach 及以上的公开信息列表",
        "is_async": false,
        "parameters": [
          {
            "name": "keyword",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/coach/messages",
        "function": "send_message",
        "file": "api/coach_message_api.py",
        "line": 37,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练发消息给学员",
        "is_async": true,
        "parameters": [
          {
            "name": "body",
            "type": "SendMessageRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/messages/{student_id}",
        "function": "get_conversation",
        "file": "api/coach_message_api.py",
        "line": 65,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练查看与学员的消息历史",
        "is_async": true,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/students-with-messages",
        "function": "get_students_with_messages",
        "file": "api/coach_message_api.py",
        "line": 97,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取教练的学员列表（带最近消息和未读数）",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/learning/coach/points/{user_id}",
        "function": "get_coach_points",
        "file": "api/learning_api.py",
        "line": 183,
        "module": "coach",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取教练积分详情（三积分体系）",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/learning/coach/points/{user_id}/history",
        "function": "get_coach_points_history",
        "file": "api/learning_api.py",
        "line": 246,
        "module": "coach",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取教练积分历史",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "category",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/learning/coach/points/add",
        "function": "add_coach_points",
        "file": "api/learning_api.py",
        "line": 284,
        "module": "coach",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "添加教练积分",
        "is_async": false,
        "parameters": [
          {
            "name": "event",
            "type": "LearningEvent"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/coach/reminders",
        "function": "create_coach_reminder",
        "file": "api/reminder_api.py",
        "line": 169,
        "module": "coach",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练为学员创建提醒",
        "is_async": true,
        "parameters": [
          {
            "name": "body",
            "type": "CoachReminderRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "chat_rest": [
      {
        "method": "GET",
        "path": "/api/v1/chat/sessions",
        "function": "list_sessions",
        "file": "api/chat_rest_api.py",
        "line": 63,
        "module": "chat_rest",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户的聊天会话列表",
        "is_async": false,
        "parameters": [
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/chat/sessions",
        "function": "create_session",
        "file": "api/chat_rest_api.py",
        "line": 96,
        "module": "chat_rest",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建新的聊天会话",
        "is_async": false,
        "parameters": [
          {
            "name": "request",
            "type": "CreateSessionRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "sessions": [
      {
        "method": "GET",
        "path": "/api/v1/chat/sessions/{session_id}/messages",
        "function": "get_messages",
        "file": "api/chat_rest_api.py",
        "line": 129,
        "module": "sessions",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取会话消息历史",
        "is_async": false,
        "parameters": [
          {
            "name": "session_id",
            "type": "str"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "before_id",
            "type": "Optional[int]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/chat/sessions/{session_id}/messages",
        "function": "send_message",
        "file": "api/chat_rest_api.py",
        "line": 169,
        "module": "sessions",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "发送消息并获取AI回复\n\n1. 保存用户消息\n2. 调用AI助手\n3. 保存AI回复\n4. 返回完整对话",
        "is_async": true,
        "parameters": [
          {
            "name": "session_id",
            "type": "str"
          },
          {
            "name": "request",
            "type": "SendMessageRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/chat/sessions/{session_id}",
        "function": "delete_session",
        "file": "api/chat_rest_api.py",
        "line": 333,
        "module": "sessions",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除会话（软删除）",
        "is_async": false,
        "parameters": [
          {
            "name": "session_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "students": [
      {
        "method": "GET",
        "path": "/api/v1/coach/students/{student_id}",
        "function": "get_student_detail",
        "file": "api/coach_api.py",
        "line": 286,
        "module": "students",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取学员详情",
        "is_async": false,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/students/{student_id}/behavioral-profile",
        "function": "get_student_behavioral_profile",
        "file": "api/coach_api.py",
        "line": 375,
        "module": "students",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取学员行为画像（教练完整视图）\n\n返回:\n- 行为阶段、稳定性、置信度\n- 行为类型 (BPT6) + 人格特征 (BIG5)\n- 心理层级 + 交互模式\n- 领域干预矩阵 (每个领域: 策略/语气/推荐/禁忌)\n- 改变潜力 (CAPACITY 8维度)\n- 风险标记\n- 推荐教练动作",
        "is_async": false,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/students/{student_id}/assessment-detail",
        "function": "get_student_assessment_detail",
        "file": "api/coach_api.py",
        "line": 443,
        "module": "students",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "学员测评交互 - 完整测评数据\n\n返回: 学员概览, 测评记录(含详情), 前后对比, 教练消息/随访",
        "is_async": false,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/students/{student_id}/glucose",
        "function": "get_student_glucose",
        "file": "api/coach_api.py",
        "line": 1040,
        "module": "students",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练查看学员血糖数据",
        "is_async": false,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/students/{student_id}/sleep",
        "function": "get_student_sleep",
        "file": "api/coach_api.py",
        "line": 1080,
        "module": "students",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练查看学员睡眠数据",
        "is_async": false,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/students/{student_id}/activity",
        "function": "get_student_activity",
        "file": "api/coach_api.py",
        "line": 1124,
        "module": "students",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练查看学员运动数据",
        "is_async": false,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/students/{student_id}/vitals",
        "function": "get_student_vitals",
        "file": "api/coach_api.py",
        "line": 1165,
        "module": "students",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练查看学员体征数据（体重、血压等）",
        "is_async": false,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "data_type",
            "type": "Optional[str]"
          },
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "messages": [
      {
        "method": "GET",
        "path": "/api/v1/messages/inbox",
        "function": "get_inbox",
        "file": "api/coach_message_api.py",
        "line": 155,
        "module": "messages",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户查看收到的教练消息",
        "is_async": true,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/messages/{message_id}/read",
        "function": "mark_read",
        "file": "api/coach_message_api.py",
        "line": 191,
        "module": "messages",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "标记消息已读",
        "is_async": true,
        "parameters": [
          {
            "name": "message_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/messages/unread-count",
        "function": "get_unread_count",
        "file": "api/coach_message_api.py",
        "line": 215,
        "module": "messages",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取未读消息数",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "coach_push_queue": [
      {
        "method": "GET",
        "path": "/api/v1/coach/push-queue/",
        "function": "list_queue_items",
        "file": "api/coach_push_queue_api.py",
        "line": 52,
        "module": "coach_push_queue",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取待审批推送列表",
        "is_async": false,
        "parameters": [
          {
            "name": "student_id",
            "type": "Optional[int]"
          },
          {
            "name": "source_type",
            "type": "Optional[str]"
          },
          {
            "name": "priority",
            "type": "Optional[str]"
          },
          {
            "name": "status",
            "type": "str"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach/push-queue/stats",
        "function": "queue_stats",
        "file": "api/coach_push_queue_api.py",
        "line": 76,
        "module": "coach_push_queue",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "各状态数量统计",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/coach/push-queue/{item_id}",
        "function": "update_queue_item",
        "file": "api/coach_push_queue_api.py",
        "line": 85,
        "module": "coach_push_queue",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "修改待审批条目的内容/时间",
        "is_async": false,
        "parameters": [
          {
            "name": "item_id",
            "type": "int"
          },
          {
            "name": "body",
            "type": "UpdateItemBody"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/coach/push-queue/batch-approve",
        "function": "batch_approve_items",
        "file": "api/coach_push_queue_api.py",
        "line": 148,
        "module": "coach_push_queue",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "批量审批通过",
        "is_async": false,
        "parameters": [
          {
            "name": "body",
            "type": "BatchApproveBody"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{item_id}": [
      {
        "method": "POST",
        "path": "/api/v1/coach/push-queue/{item_id}/approve",
        "function": "approve_queue_item",
        "file": "api/coach_push_queue_api.py",
        "line": 106,
        "module": "{item_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审批通过",
        "is_async": false,
        "parameters": [
          {
            "name": "item_id",
            "type": "int"
          },
          {
            "name": "body",
            "type": "ApproveBody"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/coach/push-queue/{item_id}/reject",
        "function": "reject_queue_item",
        "file": "api/coach_push_queue_api.py",
        "line": 128,
        "module": "{item_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "拒绝推送",
        "is_async": false,
        "parameters": [
          {
            "name": "item_id",
            "type": "int"
          },
          {
            "name": "body",
            "type": "RejectBody"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content-manage/{item_id}/publish",
        "function": "publish_content",
        "file": "api/content_manage_api.py",
        "line": 181,
        "module": "{item_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "发布单个内容",
        "is_async": false,
        "parameters": [
          {
            "name": "item_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "companion": [
      {
        "method": "GET",
        "path": "/api/v1/companions/my-mentees",
        "function": "get_my_mentees",
        "file": "api/companion_api.py",
        "line": 22,
        "module": "companion",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取我带教的同道者列表",
        "is_async": false,
        "parameters": [
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/companions/my-mentors",
        "function": "get_my_mentors",
        "file": "api/companion_api.py",
        "line": 56,
        "module": "companion",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取我的导师列表",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/companions/stats",
        "function": "get_companion_stats",
        "file": "api/companion_api.py",
        "line": 84,
        "module": "companion",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取我的同道者统计",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/companions/invite",
        "function": "invite_mentee",
        "file": "api/companion_api.py",
        "line": 104,
        "module": "companion",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "邀请同道者(建立带教关系)",
        "is_async": false,
        "parameters": [
          {
            "name": "mentee_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/companions/all",
        "function": "admin_list_all_relations",
        "file": "api/companion_api.py",
        "line": 146,
        "module": "companion",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "管理员/教练查看所有同道者关系",
        "is_async": false,
        "parameters": [
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "mentor_id",
            "type": "Optional[int]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{relation_id}": [
      {
        "method": "PUT",
        "path": "/api/v1/companions/{relation_id}/graduate",
        "function": "graduate_mentee",
        "file": "api/companion_api.py",
        "line": 186,
        "module": "{relation_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "标记同道者毕业",
        "is_async": false,
        "parameters": [
          {
            "name": "relation_id",
            "type": "str"
          },
          {
            "name": "quality_score",
            "type": "Optional[float]"
          },
          {
            "name": "notes",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "content": [
      {
        "method": "GET",
        "path": "/api/v1/content/recommended",
        "function": "get_recommended_content",
        "file": "api/content_api.py",
        "line": 245,
        "module": "content",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取推荐内容（按热度排序）",
        "is_async": false,
        "parameters": [
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/content/cases",
        "function": "get_case_list",
        "file": "api/content_api.py",
        "line": 507,
        "module": "content",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取案例列表",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "keyword",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/case",
        "function": "create_case_share",
        "file": "api/content_api.py",
        "line": 566,
        "module": "content",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建案例分享",
        "is_async": false,
        "parameters": [
          {
            "name": "case",
            "type": "CaseShareCreate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/content/recommendations",
        "function": "get_content_recommendations",
        "file": "api/content_api.py",
        "line": 1067,
        "module": "content",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取推荐内容",
        "is_async": false,
        "parameters": [
          {
            "name": "content_id",
            "type": "Optional[int]"
          },
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "course": [
      {
        "method": "GET",
        "path": "/api/v1/content/course/{course_id}",
        "function": "get_course_detail",
        "file": "api/content_api.py",
        "line": 264,
        "module": "course",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取课程详情（含等级门控）",
        "is_async": false,
        "parameters": [
          {
            "name": "course_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/course/{course_id}/enroll",
        "function": "enroll_course",
        "file": "api/content_api.py",
        "line": 287,
        "module": "course",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "报名课程",
        "is_async": false,
        "parameters": [
          {
            "name": "course_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/course/{course_id}/progress",
        "function": "update_course_progress",
        "file": "api/content_api.py",
        "line": 318,
        "module": "course",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新课程学习进度",
        "is_async": false,
        "parameters": [
          {
            "name": "course_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "LearningProgressUpdate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "video": [
      {
        "method": "GET",
        "path": "/api/v1/content/video/{video_id}",
        "function": "get_video_detail",
        "file": "api/content_api.py",
        "line": 367,
        "module": "video",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取视频详情",
        "is_async": false,
        "parameters": [
          {
            "name": "video_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/content/video/{video_id}/quiz",
        "function": "get_video_quiz",
        "file": "api/content_api.py",
        "line": 384,
        "module": "video",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取视频配套测试",
        "is_async": false,
        "parameters": [
          {
            "name": "video_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/video/{video_id}/quiz/submit",
        "function": "submit_video_quiz",
        "file": "api/content_api.py",
        "line": 420,
        "module": "video",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交视频测试",
        "is_async": false,
        "parameters": [
          {
            "name": "video_id",
            "type": "int"
          },
          {
            "name": "submission",
            "type": "QuizSubmission"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "case": [
      {
        "method": "GET",
        "path": "/api/v1/content/case/{case_id}",
        "function": "get_case_detail",
        "file": "api/content_api.py",
        "line": 546,
        "module": "case",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取案例详情",
        "is_async": false,
        "parameters": [
          {
            "name": "case_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/case/{case_id}/like",
        "function": "like_case",
        "file": "api/content_api.py",
        "line": 604,
        "module": "case",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "点赞案例（复用通用 like 逻辑）",
        "is_async": false,
        "parameters": [
          {
            "name": "case_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/case/{case_id}/helpful",
        "function": "mark_case_helpful",
        "file": "api/content_api.py",
        "line": 630,
        "module": "case",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "标记案例有帮助（复用收藏逻辑）",
        "is_async": false,
        "parameters": [
          {
            "name": "case_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "review": [
      {
        "method": "GET",
        "path": "/api/v1/content/review/queue",
        "function": "get_review_queue",
        "file": "api/content_api.py",
        "line": 862,
        "module": "review",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取审核队列",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "type",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/review/submit",
        "function": "submit_review",
        "file": "api/content_api.py",
        "line": 893,
        "module": "review",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交审核决定",
        "is_async": false,
        "parameters": [
          {
            "name": "decision",
            "type": "ReviewDecision"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/contributions/review/pending",
        "function": "list_pending",
        "file": "api/content_contribution_api.py",
        "line": 202,
        "module": "review",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出待审核投稿 (coach+)",
        "is_async": false,
        "parameters": [
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/contributions/review/{doc_id}/approve",
        "function": "approve",
        "file": "api/content_contribution_api.py",
        "line": 213,
        "module": "review",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核通过投稿 (coach+)",
        "is_async": false,
        "parameters": [
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/contributions/review/{doc_id}/reject",
        "function": "reject",
        "file": "api/content_contribution_api.py",
        "line": 227,
        "module": "review",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核拒绝投稿 (coach+)",
        "is_async": false,
        "parameters": [
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/promotion/review/{application_id}",
        "function": "review_promotion",
        "file": "api/promotion_api.py",
        "line": 190,
        "module": "review",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核晋级申请",
        "is_async": false,
        "parameters": [
          {
            "name": "application_id",
            "type": "str"
          },
          {
            "name": "action",
            "type": "str"
          },
          {
            "name": "comment",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "detail": [
      {
        "method": "GET",
        "path": "/api/v1/content/detail/{content_type}/{content_id}",
        "function": "get_content_detail",
        "file": "api/content_api.py",
        "line": 921,
        "module": "detail",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取内容详情（统一接口）",
        "is_async": false,
        "parameters": [
          {
            "name": "content_type",
            "type": "str"
          },
          {
            "name": "content_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/segments/detail/{segment_id}",
        "function": "get_segment_detail",
        "file": "api/segments_api.py",
        "line": 327,
        "module": "detail",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "SegmentDetailResponse",
        "return_type": null,
        "docstring": "获取用户分群详情",
        "is_async": true,
        "parameters": [
          {
            "name": "segment_id",
            "type": "str"
          }
        ]
      }
    ],
    "{content_id}": [
      {
        "method": "GET",
        "path": "/api/v1/content/{content_id}/comments",
        "function": "get_content_comments",
        "file": "api/content_api.py",
        "line": 952,
        "module": "{content_id}",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取内容评论",
        "is_async": false,
        "parameters": [
          {
            "name": "content_id",
            "type": "int"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "sort_by",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/{content_id}/comment",
        "function": "add_content_comment",
        "file": "api/content_api.py",
        "line": 996,
        "module": "{content_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "添加评论",
        "is_async": false,
        "parameters": [
          {
            "name": "content_id",
            "type": "int"
          },
          {
            "name": "content",
            "type": "str"
          },
          {
            "name": "rating",
            "type": "Optional[int]"
          },
          {
            "name": "parent_id",
            "type": "Optional[int]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/{content_id}/like",
        "function": "like_content",
        "file": "api/content_api.py",
        "line": 1103,
        "module": "{content_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "点赞/取消点赞内容 (toggle)",
        "is_async": false,
        "parameters": [
          {
            "name": "content_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/{content_id}/collect",
        "function": "collect_content",
        "file": "api/content_api.py",
        "line": 1135,
        "module": "{content_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "收藏/取消收藏内容 (toggle)",
        "is_async": false,
        "parameters": [
          {
            "name": "content_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content/{content_id}/share",
        "function": "share_content",
        "file": "api/content_api.py",
        "line": 1163,
        "module": "{content_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "生成分享数据",
        "is_async": false,
        "parameters": [
          {
            "name": "content_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "feed": [
      {
        "method": "GET",
        "path": "/api/v1/content/feed/related",
        "function": "get_related_feed",
        "file": "api/content_api.py",
        "line": 1036,
        "module": "feed",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取相关动态（最近发布的内容）",
        "is_async": false,
        "parameters": [
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "content_id",
            "type": "Optional[int]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "stream": [
      {
        "method": "GET",
        "path": "/api/v1/content/stream/{content_id}",
        "function": "stream_content_updates",
        "file": "api/content_api.py",
        "line": 1233,
        "module": "stream",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "内容更新流（SSE）— 实时评论/统计更新",
        "is_async": true,
        "parameters": [
          {
            "name": "content_id",
            "type": "int"
          }
        ]
      }
    ],
    "content_contribution": [
      {
        "method": "POST",
        "path": "/api/v1/contributions/submit",
        "function": "submit_contribution",
        "file": "api/content_contribution_api.py",
        "line": 94,
        "module": "content_contribution",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "投稿知识内容 (grower+)",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "ContributionCreate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/contributions/my",
        "function": "list_my_contributions",
        "file": "api/content_contribution_api.py",
        "line": 132,
        "module": "content_contribution",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出我的投稿 (grower+)",
        "is_async": false,
        "parameters": [
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "my": [
      {
        "method": "GET",
        "path": "/api/v1/contributions/my/{doc_id}",
        "function": "get_my_contribution",
        "file": "api/content_contribution_api.py",
        "line": 144,
        "module": "my",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取投稿详情 (grower+)",
        "is_async": false,
        "parameters": [
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/contributions/my/{doc_id}",
        "function": "update_my_contribution",
        "file": "api/content_contribution_api.py",
        "line": 161,
        "module": "my",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新草稿投稿 (grower+, 仅 draft/error)",
        "is_async": false,
        "parameters": [
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "ContributionUpdate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/credits/my/records",
        "function": "get_my_credit_records",
        "file": "api/credits_api.py",
        "line": 120,
        "module": "my",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户学分明细",
        "is_async": false,
        "parameters": [
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/programs/my/{enrollment_id}/today",
        "function": "get_today_content",
        "file": "api/program_api.py",
        "line": 141,
        "module": "my",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/programs/my/{enrollment_id}/interact",
        "function": "submit_interaction",
        "file": "api/program_api.py",
        "line": 154,
        "module": "my",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "str"
          },
          {
            "name": "request",
            "type": "InteractionRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/programs/my/{enrollment_id}/timeline",
        "function": "get_timeline",
        "file": "api/program_api.py",
        "line": 176,
        "module": "my",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/programs/my/{enrollment_id}/progress",
        "function": "get_progress_radar",
        "file": "api/program_api.py",
        "line": 189,
        "module": "my",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/programs/my/{enrollment_id}/status",
        "function": "update_enrollment_status",
        "file": "api/program_api.py",
        "line": 202,
        "module": "my",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "enrollment_id",
            "type": "str"
          },
          {
            "name": "request",
            "type": "PauseResumeRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "content_manage": [
      {
        "method": "POST",
        "path": "/api/v1/content-manage/create",
        "function": "create_content",
        "file": "api/content_manage_api.py",
        "line": 66,
        "module": "content_manage",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建内容条目",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "ContentCreateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content-manage/batch-create",
        "function": "batch_create_content",
        "file": "api/content_manage_api.py",
        "line": 94,
        "module": "content_manage",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "批量创建内容 (JSON数组)",
        "is_async": false,
        "parameters": [
          {
            "name": "items",
            "type": "List[ContentCreateRequest]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/content-manage/list",
        "function": "list_content",
        "file": "api/content_manage_api.py",
        "line": 124,
        "module": "content_manage",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出内容",
        "is_async": false,
        "parameters": [
          {
            "name": "content_type",
            "type": "Optional[str]"
          },
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/content-manage/{item_id}",
        "function": "update_content",
        "file": "api/content_manage_api.py",
        "line": 148,
        "module": "content_manage",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "编辑内容",
        "is_async": false,
        "parameters": [
          {
            "name": "item_id",
            "type": "int"
          },
          {
            "name": "req",
            "type": "ContentUpdateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/content-manage/batch-publish",
        "function": "batch_publish",
        "file": "api/content_manage_api.py",
        "line": 198,
        "module": "content_manage",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "批量发布",
        "is_async": false,
        "parameters": [
          {
            "name": "item_ids",
            "type": "List[int]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/content-manage/{item_id}",
        "function": "delete_content",
        "file": "api/content_manage_api.py",
        "line": 216,
        "module": "content_manage",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除内容（标记归档）",
        "is_async": false,
        "parameters": [
          {
            "name": "item_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "credits": [
      {
        "method": "GET",
        "path": "/api/v1/credits/modules",
        "function": "list_course_modules",
        "file": "api/credits_api.py",
        "line": 58,
        "module": "credits",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取课程模块列表",
        "is_async": false,
        "parameters": [
          {
            "name": "module_type",
            "type": "Optional[str]"
          },
          {
            "name": "tier",
            "type": "Optional[str]"
          },
          {
            "name": "target_role",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/credits/my",
        "function": "get_my_credits",
        "file": "api/credits_api.py",
        "line": 93,
        "module": "credits",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户学分汇总",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "admin": [
      {
        "method": "GET",
        "path": "/api/v1/credits/admin/modules",
        "function": "admin_list_modules",
        "file": "api/credits_api.py",
        "line": 143,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "管理员查看所有课程模块（含停用）",
        "is_async": false,
        "parameters": [
          {
            "name": "include_inactive",
            "type": "bool"
          },
          {
            "name": "module_type",
            "type": "Optional[str]"
          },
          {
            "name": "target_role",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/credits/admin/modules",
        "function": "admin_create_module",
        "file": "api/credits_api.py",
        "line": 184,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "管理员创建课程模块",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "ModuleCreateSchema"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/credits/admin/modules/{module_id}",
        "function": "admin_update_module",
        "file": "api/credits_api.py",
        "line": 215,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "管理员更新课程模块",
        "is_async": false,
        "parameters": [
          {
            "name": "module_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "ModuleUpdateSchema"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/credits/admin/modules/{module_id}",
        "function": "admin_delete_module",
        "file": "api/credits_api.py",
        "line": 236,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "管理员停用课程模块（软删除）",
        "is_async": false,
        "parameters": [
          {
            "name": "module_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/credits/admin/stats",
        "function": "admin_credit_stats",
        "file": "api/credits_api.py",
        "line": 253,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "管理员学分统计概览",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/expert-registration/admin/applications",
        "function": "list_applications",
        "file": "api/expert_registration_api.py",
        "line": 453,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出专家入驻申请",
        "is_async": false,
        "parameters": [
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/expert-registration/admin/applications/{tenant_id}",
        "function": "get_application_detail",
        "file": "api/expert_registration_api.py",
        "line": 480,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查看申请详情",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/expert-registration/admin/applications/{tenant_id}/approve",
        "function": "approve_application",
        "file": "api/expert_registration_api.py",
        "line": 514,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核通过入驻申请",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/expert-registration/admin/applications/{tenant_id}/reject",
        "function": "reject_application",
        "file": "api/expert_registration_api.py",
        "line": 572,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核拒绝入驻申请",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "RejectRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/programs/admin/analytics",
        "function": "admin_analytics",
        "file": "api/program_api.py",
        "line": 223,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "template_id",
            "type": "Optional[str]"
          },
          {
            "name": "category",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/programs/admin/enrollments",
        "function": "admin_enrollments",
        "file": "api/program_api.py",
        "line": 234,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "template_id",
            "type": "Optional[str]"
          },
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "coach_id",
            "type": "Optional[int]"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/stats/admin/grower-report",
        "function": "grower_report",
        "file": "api/user_stats_api.py",
        "line": 119,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "成长者统计报告",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/stats/admin/sharer-report",
        "function": "sharer_report",
        "file": "api/user_stats_api.py",
        "line": 142,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "分享者统计报告",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/stats/admin/activity-report",
        "function": "activity_report",
        "file": "api/user_stats_api.py",
        "line": 164,
        "module": "admin",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "全平台活动报告",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/admin/behavior/rules",
        "function": "get_behavior_rules",
        "file": "api/v14/admin_routes.py",
        "line": 83,
        "module": "admin",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前母库逻辑\n\nGET /api/v1/admin/behavior/rules",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "PUT",
        "path": "/admin/behavior/rules",
        "function": "update_behavior_rules",
        "file": "api/v14/admin_routes.py",
        "line": 111,
        "module": "admin",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "更新母库逻辑\n\nPUT /api/v1/admin/behavior/rules",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "UpdateRulesRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/admin/behavior/actions",
        "function": "get_action_packages",
        "file": "api/v14/admin_routes.py",
        "line": 229,
        "module": "admin",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取动作包列表\n\nGET /api/v1/admin/behavior/actions",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/admin/behavior/stages",
        "function": "get_stage_definitions",
        "file": "api/v14/admin_routes.py",
        "line": 265,
        "module": "admin",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取阶段定义\n\nGET /api/v1/admin/behavior/stages",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/admin/behavior/triggers",
        "function": "get_trigger_rules",
        "file": "api/v14/admin_routes.py",
        "line": 304,
        "module": "admin",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取触发规则列表\n\nGET /api/v1/admin/behavior/triggers",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/admin/behavior/stats",
        "function": "get_behavior_stats",
        "file": "api/v14/admin_routes.py",
        "line": 456,
        "module": "admin",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取行为系统统计\n\nGET /api/v1/admin/behavior/stats",
        "is_async": true,
        "parameters": []
      }
    ],
    "device_alert": [
      {
        "method": "GET",
        "path": "/api/v1/alerts/my",
        "function": "get_my_alerts",
        "file": "api/device_alert_api.py",
        "line": 29,
        "module": "device_alert",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户查看自己的预警（分页）",
        "is_async": true,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "severity",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/alerts/coach",
        "function": "get_coach_alerts",
        "file": "api/device_alert_api.py",
        "line": 60,
        "module": "device_alert",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练查看学员预警（分页）",
        "is_async": true,
        "parameters": [
          {
            "name": "unread_only",
            "type": "bool"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{alert_id}": [
      {
        "method": "POST",
        "path": "/api/v1/alerts/{alert_id}/read",
        "function": "mark_alert_read",
        "file": "api/device_alert_api.py",
        "line": 99,
        "module": "{alert_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "标记预警已读（区分 user_read / coach_read）",
        "is_async": true,
        "parameters": [
          {
            "name": "alert_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/alerts/{alert_id}/resolve",
        "function": "resolve_alert",
        "file": "api/device_alert_api.py",
        "line": 122,
        "module": "{alert_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练标记预警已处理",
        "is_async": true,
        "parameters": [
          {
            "name": "alert_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "device_data": [
      {
        "method": "GET",
        "path": "/devices",
        "function": "list_devices",
        "file": "api/device_data.py",
        "line": 211,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": "Dict[str, Any]",
        "return_type": null,
        "docstring": "获取用户已绑定的设备列表",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/glucose",
        "function": "get_glucose_readings",
        "file": "api/device_data.py",
        "line": 378,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取血糖数据",
        "is_async": true,
        "parameters": [
          {
            "name": "start_date",
            "type": "Optional[str]"
          },
          {
            "name": "end_date",
            "type": "Optional[str]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/device/weight",
        "function": "record_weight",
        "file": "api/device_data.py",
        "line": 532,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "记录体重",
        "is_async": true,
        "parameters": [
          {
            "name": "data",
            "type": "WeightInput"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/weight",
        "function": "get_weight_records",
        "file": "api/device_data.py",
        "line": 573,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取体重记录",
        "is_async": true,
        "parameters": [
          {
            "name": "start_date",
            "type": "Optional[str]"
          },
          {
            "name": "end_date",
            "type": "Optional[str]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/device/blood-pressure",
        "function": "record_blood_pressure",
        "file": "api/device_data.py",
        "line": 635,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "记录血压",
        "is_async": true,
        "parameters": [
          {
            "name": "data",
            "type": "BloodPressureInput"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/blood-pressure",
        "function": "get_blood_pressure_records",
        "file": "api/device_data.py",
        "line": 684,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取血压记录",
        "is_async": true,
        "parameters": [
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/device/sync",
        "function": "sync_device_data",
        "file": "api/device_data.py",
        "line": 860,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "同步设备数据 (通用接口)",
        "is_async": true,
        "parameters": [
          {
            "name": "device_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "Dict[str, Any]"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/sleep",
        "function": "get_sleep_records",
        "file": "api/device_data.py",
        "line": 1282,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取睡眠记录",
        "is_async": true,
        "parameters": [
          {
            "name": "start_date",
            "type": "Optional[str]"
          },
          {
            "name": "end_date",
            "type": "Optional[str]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/activity",
        "function": "get_activity_records",
        "file": "api/device_data.py",
        "line": 1403,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取活动数据",
        "is_async": true,
        "parameters": [
          {
            "name": "date",
            "type": "Optional[str]"
          },
          {
            "name": "start_date",
            "type": "Optional[str]"
          },
          {
            "name": "end_date",
            "type": "Optional[str]"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/heart-rate",
        "function": "get_heart_rate_data",
        "file": "api/device_data.py",
        "line": 1469,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取心率数据",
        "is_async": true,
        "parameters": [
          {
            "name": "date",
            "type": "Optional[str]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/hrv",
        "function": "get_hrv_data",
        "file": "api/device_data.py",
        "line": 1524,
        "module": "device_data",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取 HRV 数据",
        "is_async": true,
        "parameters": [
          {
            "name": "start_date",
            "type": "Optional[str]"
          },
          {
            "name": "end_date",
            "type": "Optional[str]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      }
    ],
    "devices": [
      {
        "method": "POST",
        "path": "/devices/bind",
        "function": "bind_device",
        "file": "api/device_data.py",
        "line": 242,
        "module": "devices",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "绑定新设备",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "DeviceBindRequest"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/devices/{device_id}",
        "function": "unbind_device",
        "file": "api/device_data.py",
        "line": 297,
        "module": "devices",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "解绑设备",
        "is_async": true,
        "parameters": [
          {
            "name": "device_id",
            "type": "str"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/devices/bind",
        "function": "bind_device",
        "file": "api/device_rest_api.py",
        "line": 286,
        "module": "devices",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "DeviceOut",
        "return_type": null,
        "docstring": "Bind a new device to the current user.\n\n- If a serial_number is provided, checks it is not already bound.\n- Generates a unique device_id automatically.\n- Initial status is PAIRING.",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "DeviceBindRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/devices/{device_id}/sync",
        "function": "trigger_device_sync",
        "file": "api/device_rest_api.py",
        "line": 346,
        "module": "devices",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "DeviceSyncResponse",
        "return_type": null,
        "docstring": "Trigger a data sync for the specified device.\n\n- Only CONNECTED or PAIRING devices may be synced.\n- Updates last_sync_at and sets status to CONNECTED.",
        "is_async": false,
        "parameters": [
          {
            "name": "device_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/devices/{device_id}",
        "function": "unbind_device",
        "file": "api/device_rest_api.py",
        "line": 400,
        "module": "devices",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "Unbind (delete) the specified device.\nOnly devices belonging to the current user may be deleted.",
        "is_async": false,
        "parameters": [
          {
            "name": "device_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "glucose": [
      {
        "method": "POST",
        "path": "/device/glucose/manual",
        "function": "record_glucose_manual",
        "file": "api/device_data.py",
        "line": 331,
        "module": "glucose",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "手动记录血糖",
        "is_async": true,
        "parameters": [
          {
            "name": "reading",
            "type": "GlucoseReadingInput"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/glucose/current",
        "function": "get_current_glucose",
        "file": "api/device_data.py",
        "line": 438,
        "module": "glucose",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取最新血糖读数",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/glucose/chart/daily",
        "function": "get_glucose_daily_chart",
        "file": "api/device_data.py",
        "line": 472,
        "module": "glucose",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取每日血糖图表数据",
        "is_async": true,
        "parameters": [
          {
            "name": "date",
            "type": "str"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      }
    ],
    "dashboard": [
      {
        "method": "GET",
        "path": "/device/dashboard/today",
        "function": "get_today_dashboard",
        "file": "api/device_data.py",
        "line": 734,
        "module": "dashboard",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": "DashboardResponse",
        "return_type": null,
        "docstring": "获取今日健康概览",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/dashboard/{user_id}",
        "function": "get_dashboard",
        "file": "api/main.py",
        "line": 687,
        "module": "dashboard",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户个人看板数据",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "str"
          }
        ]
      }
    ],
    "sync": [
      {
        "method": "POST",
        "path": "/device/sync/batch",
        "function": "sync_device_data_batch",
        "file": "api/device_data.py",
        "line": 942,
        "module": "sync",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "批量同步设备数据 (增强版)\n\n支持多种数据类型:\n- glucose: 血糖数据\n- heart_rate: 心率数据\n- hrv: HRV数据\n- sleep: 睡眠数据\n- activity: 活动数据\n- workout: 运动记录",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "SyncRequest"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/device/sync/status/{device_id}",
        "function": "get_sync_status",
        "file": "api/device_data.py",
        "line": 1233,
        "module": "sync",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取设备同步状态",
        "is_async": true,
        "parameters": [
          {
            "name": "device_id",
            "type": "str"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/admin/behavior/sync/process",
        "function": "process_sync_event",
        "file": "api/v14/admin_routes.py",
        "line": 342,
        "module": "sync",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "处理同步事件\n\nPOST /api/v1/admin/behavior/sync/process",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ProcessEventRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/admin/behavior/sync/view/{event_id}",
        "function": "get_sync_view",
        "file": "api/v14/admin_routes.py",
        "line": 373,
        "module": "sync",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取事件视图\n\nGET /api/v1/admin/behavior/sync/view/{event_id}?role=patient|coach|expert|admin",
        "is_async": true,
        "parameters": [
          {
            "name": "event_id",
            "type": "str"
          },
          {
            "name": "role",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/admin/behavior/sync/user/{user_id}",
        "function": "get_user_sync_events",
        "file": "api/v14/admin_routes.py",
        "line": 402,
        "module": "sync",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户的同步事件列表\n\nGET /api/v1/admin/behavior/sync/user/{user_id}?role=patient&limit=10",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "role",
            "type": "str"
          },
          {
            "name": "limit",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/admin/behavior/sync/pending",
        "function": "get_pending_reviews",
        "file": "api/v14/admin_routes.py",
        "line": 432,
        "module": "sync",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取待审核事件\n\nGET /api/v1/admin/behavior/sync/pending",
        "is_async": true,
        "parameters": []
      }
    ],
    "sleep": [
      {
        "method": "GET",
        "path": "/device/sleep/last-night",
        "function": "get_last_night_sleep",
        "file": "api/device_data.py",
        "line": 1344,
        "module": "sleep",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_current_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取昨晚睡眠数据",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      }
    ],
    "device_rest": [
      {
        "method": "GET",
        "path": "/api/v1/devices",
        "function": "list_devices",
        "file": "api/device_rest_api.py",
        "line": 256,
        "module": "device_rest",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "List[DeviceOut]",
        "return_type": null,
        "docstring": "Return all devices bound to the current user.\nOptionally filter by device_type or status.",
        "is_async": false,
        "parameters": [
          {
            "name": "device_type",
            "type": "Optional[DeviceType]"
          },
          {
            "name": "status_filter",
            "type": "Optional[DeviceStatus]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "health-data": [
      {
        "method": "GET",
        "path": "/api/v1/health-data/glucose",
        "function": "get_glucose_readings",
        "file": "api/device_rest_api.py",
        "line": 442,
        "module": "health-data",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "List[GlucoseOut]",
        "return_type": null,
        "docstring": "Retrieve glucose readings for the current user within the specified\nnumber of days, ordered by recorded_at descending.",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "source",
            "type": "Optional[str]"
          },
          {
            "name": "meal_tag",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/health-data/glucose",
        "function": "create_glucose_reading",
        "file": "api/device_rest_api.py",
        "line": 481,
        "module": "health-data",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "GlucoseOut",
        "return_type": null,
        "docstring": "Manually record a single glucose reading.\n\n- source is always set to \"manual\".\n- If recorded_at is omitted, the current UTC time is used.",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "GlucoseCreateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/health-data/sleep",
        "function": "get_sleep_records",
        "file": "api/device_rest_api.py",
        "line": 544,
        "module": "health-data",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "List[SleepOut]",
        "return_type": null,
        "docstring": "Retrieve sleep records for the current user within the specified\nnumber of days, ordered by sleep_date descending.",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/health-data/activity",
        "function": "get_activity_records",
        "file": "api/device_rest_api.py",
        "line": 580,
        "module": "health-data",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "List[ActivityOut]",
        "return_type": null,
        "docstring": "Retrieve daily activity records for the current user within the\nspecified number of days, ordered by activity_date descending.",
        "is_async": false,
        "parameters": [
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/health-data/vitals",
        "function": "get_vital_signs",
        "file": "api/device_rest_api.py",
        "line": 616,
        "module": "health-data",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "List[VitalSignOut]",
        "return_type": null,
        "docstring": "Retrieve vital sign records (weight, blood pressure, temperature, SpO2)\nfor the current user, ordered by recorded_at descending.\n\n- Omit data_type to return all types.\n- Defaults to the last 30 days, ",
        "is_async": false,
        "parameters": [
          {
            "name": "data_type",
            "type": "Optional[str]"
          },
          {
            "name": "days",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/health-data/vitals",
        "function": "create_vital_sign",
        "file": "api/device_rest_api.py",
        "line": 666,
        "module": "health-data",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "VitalSignOut",
        "return_type": null,
        "docstring": "Manually record a single vital sign measurement.\n\nPopulate the relevant fields based on data_type:\n- weight: weight_kg, bmi, body_fat_percent, etc.\n- blood_pressure: systolic, diastolic, pulse\n- tempe",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "VitalSignCreateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/health-data/summary",
        "function": "get_health_summary",
        "file": "api/device_rest_api.py",
        "line": 721,
        "module": "health-data",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": "DashboardSummary",
        "return_type": null,
        "docstring": "Aggregate the user's key health metrics into a single dashboard payload:\n\n- **latest_glucose** - most recent glucose reading (value, unit, trend, time)\n- **sleep_score** - most recent night's sleep sc",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "device": [
      {
        "method": "POST",
        "path": "/device/cgm/sync",
        "function": "handle_cgm_sync",
        "file": "api/device_trigger.py",
        "line": 12,
        "module": "device",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": true,
        "parameters": [
          {
            "name": "payload",
            "type": "dict"
          }
        ]
      }
    ],
    "exam": [
      {
        "method": "GET",
        "path": "/api/v1/certification/exams/{exam_id}",
        "function": "get_exam",
        "file": "api/exam_api.py",
        "line": 111,
        "module": "exam",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取考试详情",
        "is_async": false,
        "parameters": [
          {
            "name": "exam_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/certification/exams/{exam_id}",
        "function": "update_exam",
        "file": "api/exam_api.py",
        "line": 124,
        "module": "exam",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新考试",
        "is_async": false,
        "parameters": [
          {
            "name": "exam_id",
            "type": "str"
          },
          {
            "name": "req",
            "type": "ExamUpdateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/certification/exams/{exam_id}",
        "function": "delete_exam",
        "file": "api/exam_api.py",
        "line": 148,
        "module": "exam",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除考试(归档)",
        "is_async": false,
        "parameters": [
          {
            "name": "exam_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{exam_id}": [
      {
        "method": "POST",
        "path": "/api/v1/certification/exams/{exam_id}/questions",
        "function": "assign_questions",
        "file": "api/exam_api.py",
        "line": 164,
        "module": "{exam_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "分配题目到考试",
        "is_async": false,
        "parameters": [
          {
            "name": "exam_id",
            "type": "str"
          },
          {
            "name": "question_ids",
            "type": "List[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/certification/exams/{exam_id}/publish",
        "function": "publish_exam",
        "file": "api/exam_api.py",
        "line": 181,
        "module": "{exam_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "发布考试",
        "is_async": false,
        "parameters": [
          {
            "name": "exam_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "exam_session": [
      {
        "method": "POST",
        "path": "/api/v1/certification/sessions/start",
        "function": "start_exam",
        "file": "api/exam_session_api.py",
        "line": 27,
        "module": "exam_session",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "开始考试: 返回题目列表(不含答案)",
        "is_async": false,
        "parameters": [
          {
            "name": "exam_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/certification/sessions/submit",
        "function": "submit_exam",
        "file": "api/exam_session_api.py",
        "line": 72,
        "module": "exam_session",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交考试 → 自动评分",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "ExamSubmitRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/certification/sessions/my-results",
        "function": "my_results",
        "file": "api/exam_session_api.py",
        "line": 207,
        "module": "exam_session",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "我的考试历史",
        "is_async": false,
        "parameters": [
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{result_id}": [
      {
        "method": "GET",
        "path": "/api/v1/certification/sessions/{result_id}/result",
        "function": "get_result",
        "file": "api/exam_session_api.py",
        "line": 162,
        "module": "{result_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取考试结果",
        "is_async": false,
        "parameters": [
          {
            "name": "result_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "tenants": [
      {
        "method": "POST",
        "path": "/api/v1/tenants/{tenant_id}/my-agents",
        "function": "create_agent",
        "file": "api/expert_agent_api.py",
        "line": 93,
        "module": "tenants",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建专家自定义 Agent (dynamic_llm 模板 + TenantAgentMapping)",
        "is_async": true,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "req",
            "type": "CreateAgentRequest"
          },
          {
            "name": "current_user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/my-agents",
        "function": "list_my_agents",
        "file": "api/expert_agent_api.py",
        "line": 172,
        "module": "tenants",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出专家自己的 Agent (含预置 + 自建)",
        "is_async": true,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "current_user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/tenants/{tenant_id}/my-agents/{agent_id}",
        "function": "update_agent",
        "file": "api/expert_agent_api.py",
        "line": 210,
        "module": "tenants",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新 Agent 的 prompt/keywords/correlations",
        "is_async": true,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "req",
            "type": "UpdateAgentRequest"
          },
          {
            "name": "current_user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/tenants/{tenant_id}/my-agents/{agent_id}/toggle",
        "function": "toggle_agent",
        "file": "api/expert_agent_api.py",
        "line": 256,
        "module": "tenants",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "启用/停用 Agent (crisis 不可停用)",
        "is_async": true,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "current_user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/tenants/{tenant_id}/my-agents/test-routing",
        "function": "test_routing",
        "file": "api/expert_agent_api.py",
        "line": 297,
        "module": "tenants",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "测试路由 (dry-run): 对比平台默认 vs 租户定制路由结果",
        "is_async": true,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "req",
            "type": "TestRoutingRequest"
          },
          {
            "name": "current_user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/tenants/{tenant_id}/my-agents/{agent_id}",
        "function": "delete_agent",
        "file": "api/expert_agent_api.py",
        "line": 357,
        "module": "tenants",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除专家自建 Agent (仅非预置)",
        "is_async": true,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "current_user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "expert_content": [
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/content/documents",
        "function": "api_list_documents",
        "file": "api/expert_content_api.py",
        "line": 109,
        "module": "expert_content",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出知识文档",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "keyword",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/tenants/{tenant_id}/content/documents",
        "function": "api_create_document",
        "file": "api/expert_content_api.py",
        "line": 128,
        "module": "expert_content",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建草稿文档",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "DocumentCreate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/content/challenges",
        "function": "api_list_challenges",
        "file": "api/expert_content_api.py",
        "line": 280,
        "module": "expert_content",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "列出本专家创建的挑战模板",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "documents": [
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}",
        "function": "api_get_document",
        "file": "api/expert_content_api.py",
        "line": 167,
        "module": "documents",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取文档详情（含 raw_content）",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}",
        "function": "api_update_document",
        "file": "api/expert_content_api.py",
        "line": 182,
        "module": "documents",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新草稿文档",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "DocumentUpdate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}/publish",
        "function": "api_publish_document",
        "file": "api/expert_content_api.py",
        "line": 222,
        "module": "documents",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "发布文档（分块 + 嵌入）",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}/unpublish",
        "function": "api_unpublish_document",
        "file": "api/expert_content_api.py",
        "line": 244,
        "module": "documents",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "撤回文档",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/tenants/{tenant_id}/content/documents/{doc_id}",
        "function": "api_delete_document",
        "file": "api/expert_content_api.py",
        "line": 260,
        "module": "documents",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除文档",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "doc_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "expert_registration": [
      {
        "method": "GET",
        "path": "/api/v1/expert-registration/domains",
        "function": "get_domains",
        "file": "api/expert_registration_api.py",
        "line": 191,
        "module": "expert_registration",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取领域列表 + 推荐 Agent (公开)",
        "is_async": false,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/api/v1/expert-registration/upload-credential",
        "function": "upload_credential_image",
        "file": "api/expert_registration_api.py",
        "line": 213,
        "module": "expert_registration",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "上传资质证书图片，返回 URL",
        "is_async": true,
        "parameters": [
          {
            "name": "file",
            "type": "UploadFile"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/expert-registration/apply",
        "function": "apply_registration",
        "file": "api/expert_registration_api.py",
        "line": 238,
        "module": "expert_registration",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交专家入驻申请",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "ApplyRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/expert-registration/my-application",
        "function": "get_my_application",
        "file": "api/expert_registration_api.py",
        "line": 366,
        "module": "expert_registration",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查询当前用户的入驻申请状态",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/expert-registration/my-application",
        "function": "update_my_application",
        "file": "api/expert_registration_api.py",
        "line": 396,
        "module": "expert_registration",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "修改入驻申请 (仅 pending_review 可改)",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "ApplicationUpdateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "food_recognition": [
      {
        "method": "POST",
        "path": "/api/v1/food/recognize",
        "function": "recognize_food",
        "file": "api/food_recognition_api.py",
        "line": 93,
        "module": "food_recognition",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "食物拍照识别\n\n上传食物图片，AI 分析营养成分并给出饮食建议。\n- 支持 jpg/png/webp/bmp，最大 5MB\n- meal_type 可选: breakfast / lunch / dinner / snack",
        "is_async": true,
        "parameters": [
          {
            "name": "file",
            "type": "UploadFile"
          },
          {
            "name": "meal_type",
            "type": "Optional[str]"
          },
          {
            "name": "current_user",
            "type": "Any"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/food/history",
        "function": "food_history",
        "file": "api/food_recognition_api.py",
        "line": 198,
        "module": "food_recognition",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户的食物分析历史",
        "is_async": true,
        "parameters": [
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "offset",
            "type": "int"
          },
          {
            "name": "current_user",
            "type": "Any"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "high_freq": [
      {
        "method": "GET",
        "path": "/api/v1/high-freq-questions/presets",
        "function": "list_presets",
        "file": "api/high_freq_api.py",
        "line": 27,
        "module": "high_freq",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "列出可用的高频题目预设",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/high-freq-questions/all",
        "function": "get_all_questions",
        "file": "api/high_freq_api.py",
        "line": 33,
        "module": "high_freq",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取所有171题（供自选模式使用）",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/high-freq-questions/by-ids",
        "function": "get_questions_by_ids",
        "file": "api/high_freq_api.py",
        "line": 40,
        "module": "high_freq",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "根据题目ID列表获取完整题目信息",
        "is_async": true,
        "parameters": [
          {
            "name": "ids",
            "type": "List[str]"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/high-freq-questions/{preset}",
        "function": "get_preset_items",
        "file": "api/high_freq_api.py",
        "line": 47,
        "module": "high_freq",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取某预设的完整题目列表（含题目文本+选项）",
        "is_async": true,
        "parameters": [
          {
            "name": "preset",
            "type": "str"
          }
        ]
      }
    ],
    "knowledge": [
      {
        "method": "GET",
        "path": "/knowledge/docs",
        "function": "list_documents",
        "file": "api/knowledge.py",
        "line": 38,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "文档列表",
        "is_async": true,
        "parameters": [
          {
            "name": "scope",
            "type": "Optional[str]"
          },
          {
            "name": "domain_id",
            "type": "Optional[str]"
          },
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/knowledge/search",
        "function": "search_knowledge",
        "file": "api/knowledge.py",
        "line": 75,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "SearchResponse",
        "return_type": null,
        "docstring": "语义检索",
        "is_async": true,
        "parameters": [
          {
            "name": "q",
            "type": "str"
          },
          {
            "name": "scope",
            "type": "Optional[str]"
          },
          {
            "name": "domain_id",
            "type": "Optional[str]"
          },
          {
            "name": "top_k",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/knowledge/domains",
        "function": "list_domains",
        "file": "api/knowledge.py",
        "line": 86,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "领域列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/knowledge/stats",
        "function": "knowledge_stats",
        "file": "api/knowledge.py",
        "line": 99,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "知识库统计",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/api/v3/chat/knowledge/search",
        "function": "knowledge_search",
        "file": "api/routers/chat.py",
        "line": 82,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rag_pipeline",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "纯向量检索, 返回相似文档片段, 不调 LLM",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "KnowledgeQueryRequest"
          },
          {
            "name": "pipeline",
            "type": "RAGPipeline"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/admin/knowledge/stats",
        "function": "knowledge_stats",
        "file": "api/routers/knowledge.py",
        "line": 20,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_qdrant_store",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "查看 Qdrant 集合统计: 文档数/向量数/状态",
        "is_async": false,
        "parameters": [
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "store",
            "type": "QdrantStore"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/admin/knowledge/load-file",
        "function": "load_file",
        "file": "api/routers/knowledge.py",
        "line": 33,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_knowledge_loader",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "加载单个文件到知识库 (.md / .txt / .json)",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "KnowledgeLoadFileRequest"
          },
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "loader",
            "type": "KnowledgeLoader"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/admin/knowledge/load-dir",
        "function": "load_directory",
        "file": "api/routers/knowledge.py",
        "line": 53,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_knowledge_loader",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "批量加载目录下所有 .md/.txt/.json 文件",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "KnowledgeLoadDirRequest"
          },
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "loader",
            "type": "KnowledgeLoader"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/admin/knowledge/init",
        "function": "init_collection",
        "file": "api/routers/knowledge.py",
        "line": 72,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_qdrant_store",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "创建 Qdrant 集合 (如不存在)",
        "is_async": false,
        "parameters": [
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "store",
            "type": "QdrantStore"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v3/admin/knowledge/reset",
        "function": "reset_collection",
        "file": "api/routers/knowledge.py",
        "line": 85,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_qdrant_store",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "删除并重建 Qdrant 集合 (危险操作!)",
        "is_async": false,
        "parameters": [
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "store",
            "type": "QdrantStore"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/knowledge/docs",
        "function": "list_documents",
        "file": "backend/api/knowledge.py",
        "line": 26,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "文档列表",
        "is_async": true,
        "parameters": [
          {
            "name": "scope",
            "type": "Optional[str]"
          },
          {
            "name": "domain_id",
            "type": "Optional[str]"
          },
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/knowledge/docs/upload",
        "function": "upload_document",
        "file": "backend/api/knowledge.py",
        "line": 38,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "上传并入库文档",
        "is_async": true,
        "parameters": [
          {
            "name": "file",
            "type": "UploadFile"
          },
          {
            "name": "scope",
            "type": "str"
          },
          {
            "name": "domain_id",
            "type": "str"
          },
          {
            "name": "tenant_id",
            "type": "Optional[str]"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/knowledge/docs/{doc_id}",
        "function": "get_document",
        "file": "backend/api/knowledge.py",
        "line": 51,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "文档详情",
        "is_async": true,
        "parameters": [
          {
            "name": "doc_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/knowledge/docs/{doc_id}",
        "function": "delete_document",
        "file": "backend/api/knowledge.py",
        "line": 57,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "删除文档",
        "is_async": true,
        "parameters": [
          {
            "name": "doc_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/knowledge/search",
        "function": "search_knowledge",
        "file": "backend/api/knowledge.py",
        "line": 63,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "语义检索",
        "is_async": true,
        "parameters": [
          {
            "name": "q",
            "type": "str"
          },
          {
            "name": "scope",
            "type": "Optional[str]"
          },
          {
            "name": "domain_id",
            "type": "Optional[str]"
          },
          {
            "name": "top_k",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/knowledge/domains",
        "function": "list_domains",
        "file": "backend/api/knowledge.py",
        "line": 74,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "领域列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/knowledge/stats",
        "function": "knowledge_stats",
        "file": "backend/api/knowledge.py",
        "line": 84,
        "module": "knowledge",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "知识库统计",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/api/v3/chat/knowledge/search",
        "function": "knowledge_search",
        "file": "v3/routers/chat.py",
        "line": 86,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rag_pipeline",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "纯向量检索, 返回相似文档片段, 不调 LLM",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "KnowledgeQueryRequest"
          },
          {
            "name": "pipeline",
            "type": "RAGPipeline"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/admin/knowledge/stats",
        "function": "knowledge_stats",
        "file": "v3/routers/knowledge.py",
        "line": 20,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_qdrant_store",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "查看 Qdrant 集合统计: 文档数/向量数/状态",
        "is_async": false,
        "parameters": [
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "store",
            "type": "QdrantStore"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/admin/knowledge/load-file",
        "function": "load_file",
        "file": "v3/routers/knowledge.py",
        "line": 33,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_knowledge_loader",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "加载单个文件到知识库 (.md / .txt / .json)",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "KnowledgeLoadFileRequest"
          },
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "loader",
            "type": "KnowledgeLoader"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/admin/knowledge/load-dir",
        "function": "load_directory",
        "file": "v3/routers/knowledge.py",
        "line": 53,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_knowledge_loader",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "批量加载目录下所有 .md/.txt/.json 文件",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "KnowledgeLoadDirRequest"
          },
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "loader",
            "type": "KnowledgeLoader"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/admin/knowledge/init",
        "function": "init_collection",
        "file": "v3/routers/knowledge.py",
        "line": 72,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_qdrant_store",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "创建 Qdrant 集合 (如不存在)",
        "is_async": false,
        "parameters": [
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "store",
            "type": "QdrantStore"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v3/admin/knowledge/reset",
        "function": "reset_collection",
        "file": "v3/routers/knowledge.py",
        "line": 85,
        "module": "knowledge",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_admin_dep",
            "role": "custom"
          },
          {
            "dependency": "get_qdrant_store",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "删除并重建 Qdrant 集合 (危险操作!)",
        "is_async": false,
        "parameters": [
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "store",
            "type": "QdrantStore"
          }
        ]
      }
    ],
    "docs": [
      {
        "method": "POST",
        "path": "/knowledge/docs/upload",
        "function": "upload_document",
        "file": "api/knowledge.py",
        "line": 50,
        "module": "docs",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "上传并入库文档",
        "is_async": true,
        "parameters": [
          {
            "name": "file",
            "type": "UploadFile"
          },
          {
            "name": "scope",
            "type": "str"
          },
          {
            "name": "domain_id",
            "type": "str"
          },
          {
            "name": "tenant_id",
            "type": "Optional[str]"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/knowledge/docs/{doc_id}",
        "function": "get_document",
        "file": "api/knowledge.py",
        "line": 63,
        "module": "docs",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "文档详情",
        "is_async": true,
        "parameters": [
          {
            "name": "doc_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/knowledge/docs/{doc_id}",
        "function": "delete_document",
        "file": "api/knowledge.py",
        "line": 69,
        "module": "docs",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "删除文档",
        "is_async": true,
        "parameters": [
          {
            "name": "doc_id",
            "type": "int"
          }
        ]
      }
    ],
    "knowledge_sharing": [
      {
        "method": "POST",
        "path": "/api/v1/knowledge-sharing/contribute",
        "function": "contribute_knowledge",
        "file": "api/knowledge_sharing_api.py",
        "line": 48,
        "module": "knowledge_sharing",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交知识共享申请 — 将私有文档贡献到领域共享池",
        "is_async": false,
        "parameters": [
          {
            "name": "data",
            "type": "ContributeRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/knowledge-sharing/my-contributions",
        "function": "my_contributions",
        "file": "api/knowledge_sharing_api.py",
        "line": 80,
        "module": "knowledge_sharing",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查询我的知识贡献记录",
        "is_async": false,
        "parameters": [
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/knowledge-sharing/review-queue",
        "function": "review_queue",
        "file": "api/knowledge_sharing_api.py",
        "line": 131,
        "module": "knowledge_sharing",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取待审核贡献队列",
        "is_async": false,
        "parameters": [
          {
            "name": "domain_id",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/knowledge-sharing/domain-pool",
        "function": "domain_pool",
        "file": "api/knowledge_sharing_api.py",
        "line": 200,
        "module": "knowledge_sharing",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查询领域共享知识库",
        "is_async": false,
        "parameters": [
          {
            "name": "domain_id",
            "type": "Optional[str]"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/knowledge-sharing/stats",
        "function": "sharing_stats",
        "file": "api/knowledge_sharing_api.py",
        "line": 221,
        "module": "knowledge_sharing",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "知识共享统计",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/knowledge-sharing/domains",
        "function": "list_domains",
        "file": "api/knowledge_sharing_api.py",
        "line": 233,
        "module": "knowledge_sharing",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "可用知识领域列表",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{contribution_id}": [
      {
        "method": "POST",
        "path": "/api/v1/knowledge-sharing/{contribution_id}/revoke",
        "function": "revoke_contribution",
        "file": "api/knowledge_sharing_api.py",
        "line": 108,
        "module": "{contribution_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "撤回已共享的知识 — 恢复为私有",
        "is_async": false,
        "parameters": [
          {
            "name": "contribution_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/knowledge-sharing/{contribution_id}/approve",
        "function": "approve_contribution_endpoint",
        "file": "api/knowledge_sharing_api.py",
        "line": 152,
        "module": "{contribution_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核通过知识贡献 — 文档 scope 从 tenant → domain",
        "is_async": false,
        "parameters": [
          {
            "name": "contribution_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "ReviewRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/knowledge-sharing/{contribution_id}/reject",
        "function": "reject_contribution_endpoint",
        "file": "api/knowledge_sharing_api.py",
        "line": 175,
        "module": "{contribution_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "审核拒绝知识贡献",
        "is_async": false,
        "parameters": [
          {
            "name": "contribution_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "ReviewRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "grower": [
      {
        "method": "GET",
        "path": "/api/v1/learning/grower/stats/{user_id}",
        "function": "get_grower_stats",
        "file": "api/learning_api.py",
        "line": 325,
        "module": "grower",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取成长者学习统计（时长+积分分开）",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/learning/grower/time/{user_id}",
        "function": "get_grower_time",
        "file": "api/learning_api.py",
        "line": 395,
        "module": "grower",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取成长者学习时长（单独）",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/learning/grower/points/{user_id}",
        "function": "get_grower_points",
        "file": "api/learning_api.py",
        "line": 459,
        "module": "grower",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取成长者学习积分（测试积分，单独）",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/learning/grower/points/add",
        "function": "add_grower_quiz_points",
        "file": "api/learning_api.py",
        "line": 508,
        "module": "grower",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "添加成长者测试积分",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "quiz_id",
            "type": "str"
          },
          {
            "name": "score",
            "type": "int"
          },
          {
            "name": "correct_count",
            "type": "int"
          },
          {
            "name": "total_count",
            "type": "int"
          },
          {
            "name": "is_first_try",
            "type": "bool"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/learning/grower/time/{user_id}/history",
        "function": "get_grower_time_history",
        "file": "api/learning_api.py",
        "line": 562,
        "module": "grower",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取成长者学习时长历史",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "start_date",
            "type": "Optional[str]"
          },
          {
            "name": "end_date",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/learning/grower/time/add",
        "function": "add_grower_time",
        "file": "api/learning_api.py",
        "line": 617,
        "module": "grower",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "添加成长者学习时长",
        "is_async": false,
        "parameters": [
          {
            "name": "event",
            "type": "LearningEvent"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/learning/grower/streak/{user_id}",
        "function": "get_grower_streak",
        "file": "api/learning_api.py",
        "line": 652,
        "module": "grower",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取成长者连续学习记录",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "rewards": [
      {
        "method": "GET",
        "path": "/api/v1/learning/rewards/{user_id}",
        "function": "get_user_rewards",
        "file": "api/learning_api.py",
        "line": 687,
        "module": "rewards",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户奖励列表",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "user_type",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/learning/rewards/claim",
        "function": "claim_reward",
        "file": "api/learning_api.py",
        "line": 750,
        "module": "rewards",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "领取奖励",
        "is_async": false,
        "parameters": [
          {
            "name": "claim",
            "type": "RewardClaim"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "leaderboard": [
      {
        "method": "GET",
        "path": "/api/v1/learning/leaderboard/coaches",
        "function": "get_coach_leaderboard",
        "file": "api/learning_api.py",
        "line": 777,
        "module": "leaderboard",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "教练积分排行榜",
        "is_async": false,
        "parameters": [
          {
            "name": "period",
            "type": "str"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/learning/leaderboard/growers",
        "function": "get_grower_leaderboard",
        "file": "api/learning_api.py",
        "line": 821,
        "module": "leaderboard",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "成长者学习时长排行榜",
        "is_async": false,
        "parameters": [
          {
            "name": "period",
            "type": "str"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "learning": [
      {
        "method": "POST",
        "path": "/api/v1/learning/event",
        "function": "handle_learning_event",
        "file": "api/learning_api.py",
        "line": 851,
        "module": "learning",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "处理学习事件（统一入口）— 写入真实 DB",
        "is_async": false,
        "parameters": [
          {
            "name": "event",
            "type": "LearningEvent"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "chat": [
      {
        "method": "POST",
        "path": "/api/v1/chat",
        "function": "chat_endpoint",
        "file": "api/main-old.py",
        "line": 79,
        "module": "chat",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": true,
        "parameters": [
          {
            "name": "message",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/mp/chat/stream",
        "function": "chat_stream",
        "file": "api/miniprogram.py",
        "line": 894,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "与 AI 健康教练对话（流式）\n\n返回 SSE 流，支持 Dify / Ollama 双模式路由",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ChatRequest"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/mp/chat/history/{session_id}",
        "function": "get_chat_history",
        "file": "api/miniprogram.py",
        "line": 1003,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取聊天历史记录\n\nArgs:\n    session_id: 会话ID\n    limit: 返回消息数量限制",
        "is_async": true,
        "parameters": [
          {
            "name": "session_id",
            "type": "str"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/mp/chat/sessions",
        "function": "get_user_chat_sessions",
        "file": "api/miniprogram.py",
        "line": 1039,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户的所有聊天会话",
        "is_async": true,
        "parameters": [
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/mp/chat/session/{session_id}",
        "function": "delete_chat_session",
        "file": "api/miniprogram.py",
        "line": 1069,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除聊天会话",
        "is_async": true,
        "parameters": [
          {
            "name": "session_id",
            "type": "str"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/mp/chat/history",
        "function": "clear_user_chat_history",
        "file": "api/miniprogram.py",
        "line": 1089,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "清空用户所有聊天历史",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/chat/message",
        "function": "chat_message",
        "file": "api/routers/chat.py",
        "line": 25,
        "module": "chat",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_coach_agent",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "智能对话入口: 自动意图分类 → 路由到合适的模型 → RAG 增强\n\n意图类型:\n- greeting / checkin_confirm → 快捷回复 (不调 LLM)\n- knowledge_qa / strategy_explain → RAG 检索 + LLM\n- coach_dialogue / crisis_support → 画像注入 + RAG + 高级模型\n- general_",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "ChatRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "agent",
            "type": "CoachAgent"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/chat/knowledge",
        "function": "knowledge_query",
        "file": "api/routers/chat.py",
        "line": 65,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rag_pipeline",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "知识库检索 + LLM 生成回答\n\ndoc_type 过滤: spec / strategy / tcm / clinical / course / faq",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "KnowledgeQueryRequest"
          },
          {
            "name": "pipeline",
            "type": "RAGPipeline"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/chat/prescription",
        "function": "generate_prescription",
        "file": "api/routers/chat.py",
        "line": 98,
        "module": "chat",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_coach_agent",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "结合用户画像 + 知识库中的干预策略 → LLM 生成个性化行为处方",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "PrescriptionRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "agent",
            "type": "CoachAgent"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/chat/stats",
        "function": "chat_stats",
        "file": "api/routers/chat.py",
        "line": 122,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_coach_agent",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "返回 LLM 路由统计: 调用量/成本/延迟/降级率",
        "is_async": false,
        "parameters": [
          {
            "name": "agent",
            "type": "CoachAgent"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/chat/message",
        "function": "chat_message",
        "file": "v3/routers/chat.py",
        "line": 26,
        "module": "chat",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_coach_agent",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "智能对话入口: 自动意图分类 → 路由到合适的模型 → RAG 增强\n\n意图类型:\n- greeting / checkin_confirm → 快捷回复 (不调 LLM)\n- knowledge_qa / strategy_explain → RAG 检索 + LLM\n- coach_dialogue / crisis_support → 画像注入 + RAG + 高级模型\n- general_",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "ChatRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "agent",
            "type": "CoachAgent"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/chat/knowledge",
        "function": "knowledge_query",
        "file": "v3/routers/chat.py",
        "line": 66,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rag_pipeline",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "知识库检索 + LLM 生成回答\n\ndoc_type 过滤: spec / strategy / tcm / clinical / course / faq",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "KnowledgeQueryRequest"
          },
          {
            "name": "pipeline",
            "type": "RAGPipeline"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/chat/prescription",
        "function": "generate_prescription",
        "file": "v3/routers/chat.py",
        "line": 105,
        "module": "chat",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_coach_agent",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "结合用户画像 + 知识库中的干预策略 → LLM 生成个性化行为处方",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "PrescriptionRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "agent",
            "type": "CoachAgent"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/chat/stats",
        "function": "chat_stats",
        "file": "v3/routers/chat.py",
        "line": 129,
        "module": "chat",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_coach_agent",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "返回 LLM 路由统计: 调用量/成本/延迟/降级率",
        "is_async": false,
        "parameters": [
          {
            "name": "agent",
            "type": "CoachAgent"
          }
        ]
      }
    ],
    "main-old": [
      {
        "method": "GET",
        "path": "/health",
        "function": "health_check",
        "file": "api/main-old.py",
        "line": 91,
        "module": "main-old",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": true,
        "parameters": []
      }
    ],
    "dispatch": [
      {
        "method": "POST",
        "path": "/api/v1/dispatch",
        "function": "dispatch_request",
        "file": "api/main.py",
        "line": 587,
        "module": "dispatch",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "行健行为教练分发中心：根据模式选择路由",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "str"
          },
          {
            "name": "message",
            "type": "str"
          },
          {
            "name": "mode",
            "type": "str"
          },
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "tenant_id",
            "type": "str"
          }
        ]
      }
    ],
    "experts": [
      {
        "method": "GET",
        "path": "/api/v1/experts",
        "function": "get_experts",
        "file": "api/main.py",
        "line": 675,
        "module": "experts",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取可用专家列表",
        "is_async": true,
        "parameters": []
      }
    ],
    "decompose": [
      {
        "method": "POST",
        "path": "/api/v1/decompose",
        "function": "decompose_tasks",
        "file": "api/main.py",
        "line": 718,
        "module": "decompose",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "根据用户消息和效能感分解任务",
        "is_async": true,
        "parameters": [
          {
            "name": "message",
            "type": "str"
          },
          {
            "name": "efficacy_score",
            "type": "int"
          }
        ]
      }
    ],
    "orchestrator": [
      {
        "method": "POST",
        "path": "/api/v1/orchestrator/process",
        "function": "orchestrator_process",
        "file": "api/main.py",
        "line": 754,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "OrchestratorResponse",
        "return_type": null,
        "docstring": "Master Agent 核心处理接口\n\n完整 9 步流程:\n1. Input Handler - 输入处理\n2. Profile Manager - 画像管理\n3. Risk Analyzer - 风险分析\n4. Agent Router - Agent 路由\n5. Multi-Agent Coordinator - 多 Agent 协调\n6. Intervention Planner - 干预",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "OrchestratorRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/orchestrator/briefing",
        "function": "get_daily_briefing",
        "file": "api/main.py",
        "line": 822,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取每日简报\n\n返回格式:\n{\n  \"user_id\": \"U12345\",\n  \"date\": \"2026-01-23\",\n  \"tasks\": [\"今晚22:30前上床\", ...],\n  \"coach_message\": \"今晚我们先从规律作息开始...\"\n}",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "DailyBriefingRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/orchestrator/briefing/{user_id}/message",
        "function": "get_daily_message",
        "file": "api/main.py",
        "line": 846,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取格式化的每日推送消息",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/orchestrator/agent-task",
        "function": "execute_agent_task",
        "file": "api/main.py",
        "line": 860,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "执行单个 Agent 任务\n\n支持的 Agent 类型:\n- SleepAgent: 睡眠分析\n- GlucoseAgent: 血糖分析\n- StressAgent: 压力分析\n- NutritionAgent: 营养分析\n- MentalHealthAgent: 心理健康",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "AgentTaskRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/orchestrator/action-plan",
        "function": "create_action_plan",
        "file": "api/main.py",
        "line": 891,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "创建行动计划\n\n返回阶段性干预方案，包含:\n- goal: 干预目标\n- phase: 当前阶段\n- actions: 行动项列表\n- evaluation: 评估标准",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ActionPlanRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/orchestrator/action-plan/{user_id}/phased",
        "function": "get_phased_plan",
        "file": "api/main.py",
        "line": 926,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取多阶段行动计划",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "str"
          },
          {
            "name": "goal",
            "type": "str"
          },
          {
            "name": "weeks",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/orchestrator/profile/{user_id}",
        "function": "get_user_profile",
        "file": "api/main.py",
        "line": 946,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户画像",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/orchestrator/device-sync",
        "function": "sync_device_data",
        "file": "api/main.py",
        "line": 960,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "同步穿戴设备数据",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "str"
          },
          {
            "name": "device_data",
            "type": "DeviceDataInput"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/orchestrator/coordinate",
        "function": "coordinate_agents",
        "file": "api/main.py",
        "line": 999,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "协调多个 Agent 结果 - 冲突消解 + 权重融合\n\n输入: 多个 Agent 的分析结果\n输出: 融合后的统一分析\n\n示例请求:\n{\n  \"agent_results\": [\n    {\"agent\": \"GlucoseAgent\", \"analysis\": \"血糖偏高\", \"risk_level\": \"medium\", \"suggestions\": [\"控制饮食\"]},\n    {\"age",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "CoordinateRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/orchestrator/route",
        "function": "route_agents",
        "file": "api/main.py",
        "line": 1032,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "Agent 路由 - 选择最合适的 Agent 组合\n\n返回格式:\n[\n  {\"agent\": \"GlucoseAgent\", \"priority\": 1},\n  {\"agent\": \"SleepAgent\", \"priority\": 2}\n]",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "RouteRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/orchestrator/route/detailed",
        "function": "route_agents_detailed",
        "file": "api/main.py",
        "line": 1076,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "Agent 路由 (详细版) - 返回完整路由信息",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "RouteRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/orchestrator/status",
        "function": "orchestrator_status",
        "file": "api/main.py",
        "line": 1114,
        "module": "orchestrator",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取 Orchestrator 状态",
        "is_async": true,
        "parameters": []
      }
    ],
    "brain": [
      {
        "method": "POST",
        "path": "/api/v1/brain/evaluate",
        "function": "brain_evaluate",
        "file": "api/main.py",
        "line": 1197,
        "module": "brain",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "TTM 阶段跃迁判定入口\n\n- X-Source-UI: UI-1 → SOP 6.2 防火墙静默\n- X-Source-UI: UI-3 等 → 进入大脑判定 + L6 叙事重写\n- 数据库写入通过 BackgroundTasks 异步执行，不阻塞响应",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "BrainEvaluateRequest"
          },
          {
            "name": "background_tasks",
            "type": "BackgroundTasks"
          },
          {
            "name": "x_source_ui",
            "type": "Optional[str]"
          }
        ]
      }
    ],
    "micro_action": [
      {
        "method": "GET",
        "path": "/api/v1/micro-actions/today",
        "function": "get_today_tasks",
        "file": "api/micro_action_api.py",
        "line": 45,
        "module": "micro_action",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取今日微行动任务列表\n\n如果今日还没有任务，会自动基于用户的干预计划生成",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/micro-actions/history",
        "function": "get_task_history",
        "file": "api/micro_action_api.py",
        "line": 108,
        "module": "micro_action",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取微行动历史记录（分页，按日期筛选）",
        "is_async": true,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "date_from",
            "type": "Optional[str]"
          },
          {
            "name": "date_to",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/micro-actions/stats",
        "function": "get_task_stats",
        "file": "api/micro_action_api.py",
        "line": 125,
        "module": "micro_action",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取统计数据：连续天数/完成率/领域分布",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/micro-actions/facts",
        "function": "get_behavior_facts",
        "file": "api/micro_action_api.py",
        "line": 134,
        "module": "micro_action",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取行为事实（供 StageRuntime 使用）",
        "is_async": true,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "{task_id}": [
      {
        "method": "POST",
        "path": "/api/v1/micro-actions/{task_id}/complete",
        "function": "complete_task",
        "file": "api/micro_action_api.py",
        "line": 63,
        "module": "{task_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "完成一个微行动任务",
        "is_async": true,
        "parameters": [
          {
            "name": "task_id",
            "type": "int"
          },
          {
            "name": "body",
            "type": "CompleteRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/micro-actions/{task_id}/skip",
        "function": "skip_task",
        "file": "api/micro_action_api.py",
        "line": 86,
        "module": "{task_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "跳过一个微行动任务",
        "is_async": true,
        "parameters": [
          {
            "name": "task_id",
            "type": "int"
          },
          {
            "name": "body",
            "type": "SkipRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "task": [
      {
        "method": "GET",
        "path": "/mp/task/today",
        "function": "get_today_task",
        "file": "api/miniprogram.py",
        "line": 389,
        "module": "task",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": "TodayTaskResponse",
        "return_type": null,
        "docstring": "获取今日任务与状态\n\n返回当前阶段、天数、任务、焦点等信息",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/mp/task/feedback",
        "function": "submit_task_feedback",
        "file": "api/miniprogram.py",
        "line": 433,
        "module": "task",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": "TaskFeedbackResponse",
        "return_type": null,
        "docstring": "提交任务反馈\n\n触发状态机流转，返回Agent响应和下一阶段",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "TaskFeedbackRequest"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      }
    ],
    "progress": [
      {
        "method": "GET",
        "path": "/mp/progress/summary",
        "function": "get_progress_summary",
        "file": "api/miniprogram.py",
        "line": 656,
        "module": "progress",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取进度摘要",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      }
    ],
    "risk": [
      {
        "method": "GET",
        "path": "/mp/risk/status",
        "function": "get_risk_status",
        "file": "api/miniprogram.py",
        "line": 680,
        "module": "risk",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取风险状态",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      }
    ],
    "llm": [
      {
        "method": "GET",
        "path": "/mp/llm/health",
        "function": "llm_health_check",
        "file": "api/miniprogram.py",
        "line": 728,
        "module": "llm",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "检查 LLM 服务健康状态\n\n返回 Ollama 和 Dify 服务状态",
        "is_async": true,
        "parameters": []
      }
    ],
    "miniprogram": [
      {
        "method": "POST",
        "path": "/mp/chat",
        "function": "chat_with_agent",
        "file": "api/miniprogram.py",
        "line": 784,
        "module": "miniprogram",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_mp_user",
            "role": "custom"
          }
        ],
        "response_model": "ChatResponse",
        "return_type": null,
        "docstring": "与 AI 健康教练对话\n\n非流式响应，支持 Dify / Ollama 双模式路由和历史记录持久化",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ChatRequest"
          },
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      }
    ],
    "paths": [
      {
        "method": "GET",
        "path": "/api/v1/coach-levels/levels",
        "function": "get_coach_levels",
        "file": "api/paths_api.py",
        "line": 74,
        "module": "paths",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取行为健康教练六级四同道者体系",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/coach-levels/modules",
        "function": "get_coach_learning_modules",
        "file": "api/paths_api.py",
        "line": 239,
        "module": "paths",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取教练学习模块",
        "is_async": true,
        "parameters": [
          {
            "name": "level",
            "type": "Optional[int]"
          },
          {
            "name": "category",
            "type": "Optional[str]"
          },
          {
            "name": "user_id",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach-levels/progress",
        "function": "get_coach_progress",
        "file": "api/paths_api.py",
        "line": 305,
        "module": "paths",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取教练成长进度（六级四同道者体系）— 真实 DB",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach-levels/practice-records",
        "function": "get_practice_records",
        "file": "api/paths_api.py",
        "line": 396,
        "module": "paths",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取实践记录 — 真实 DB（基于学习时长日志）",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach-levels/companions",
        "function": "get_companions_progress",
        "file": "api/paths_api.py",
        "line": 438,
        "module": "paths",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取四同道者培养进度 — 真实 DB",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/coach-levels/overview",
        "function": "get_six_level_overview",
        "file": "api/paths_api.py",
        "line": 525,
        "module": "paths",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取六级体系概览",
        "is_async": true,
        "parameters": []
      }
    ],
    "policy": [
      {
        "method": "GET",
        "path": "/api/v1/policy/rules",
        "function": "list_rules",
        "file": "api/policy_api.py",
        "line": 66,
        "module": "policy",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查询策略规则列表",
        "is_async": false,
        "parameters": [
          {
            "name": "rule_type",
            "type": "Optional[str]"
          },
          {
            "name": "tenant_id",
            "type": "Optional[str]"
          },
          {
            "name": "is_enabled",
            "type": "bool"
          },
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "per_page",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/policy/rules",
        "function": "create_rule",
        "file": "api/policy_api.py",
        "line": 117,
        "module": "policy",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建新策略规则",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "RuleCreateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/policy/simulate",
        "function": "simulate_policy",
        "file": "api/policy_api.py",
        "line": 190,
        "module": "policy",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "完整策略模拟: 给定Event和Context, 返回ExecutionPlan\n不实际执行Agent, 仅返回决策结果",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "SimulateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      }
    ],
    "rules": [
      {
        "method": "PUT",
        "path": "/api/v1/policy/rules/{rule_id}",
        "function": "update_rule",
        "file": "api/policy_api.py",
        "line": 132,
        "module": "rules",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新策略规则",
        "is_async": false,
        "parameters": [
          {
            "name": "rule_id",
            "type": "int"
          },
          {
            "name": "req",
            "type": "RuleUpdateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/policy/rules/{rule_id}",
        "function": "delete_rule",
        "file": "api/policy_api.py",
        "line": 151,
        "module": "rules",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除策略规则",
        "is_async": false,
        "parameters": [
          {
            "name": "rule_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/policy/rules/{rule_id}/test",
        "function": "test_rule",
        "file": "api/policy_api.py",
        "line": 173,
        "module": "rules",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "测试规则: 给定上下文, 返回匹配结果",
        "is_async": false,
        "parameters": [
          {
            "name": "rule_id",
            "type": "int"
          },
          {
            "name": "req",
            "type": "RuleTestRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/policy/rules/refresh",
        "function": "refresh_rules",
        "file": "api/policy_api.py",
        "line": 314,
        "module": "rules",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "触发规则热刷新 (无需重启服务)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/policy/rules/seed",
        "function": "seed_rules",
        "file": "api/policy_api.py",
        "line": 332,
        "module": "rules",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "注入默认种子规则 (首次部署使用)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/admin/behavior/rules/validate",
        "function": "validate_behavior_rules",
        "file": "api/v14/admin_routes.py",
        "line": 158,
        "module": "rules",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "验证逻辑表达式是否合法\n\nPOST /api/v1/admin/behavior/rules/validate\n\n防止专家写错 Python 表达式导致系统崩溃",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ValidateConditionRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/admin/behavior/rules/reload",
        "function": "reload_behavior_rules",
        "file": "api/v14/admin_routes.py",
        "line": 200,
        "module": "rules",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "热重载配置\n\nPOST /api/v1/admin/behavior/rules/reload",
        "is_async": true,
        "parameters": []
      }
    ],
    "traces": [
      {
        "method": "GET",
        "path": "/api/v1/policy/traces/user/{user_id}",
        "function": "get_user_traces",
        "file": "api/policy_api.py",
        "line": 239,
        "module": "traces",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查询用户的决策历史",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "offset",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/policy/traces/{trace_id}",
        "function": "get_trace_detail",
        "file": "api/policy_api.py",
        "line": 256,
        "module": "traces",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取可解释的决策追踪详情 (含自然语言说明)",
        "is_async": false,
        "parameters": [
          {
            "name": "trace_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/policy/traces/agent/{agent_id}/stats",
        "function": "get_agent_trace_stats",
        "file": "api/policy_api.py",
        "line": 274,
        "module": "traces",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查询某Agent的决策统计 — 专家用: '为什么我的Agent没被触发?'",
        "is_async": false,
        "parameters": [
          {
            "name": "agent_id",
            "type": "str"
          },
          {
            "name": "tenant_id",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      }
    ],
    "cost": [
      {
        "method": "GET",
        "path": "/api/v1/policy/cost/report",
        "function": "get_cost_report",
        "file": "api/policy_api.py",
        "line": 294,
        "module": "cost",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取成本使用报告",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "user_id",
            "type": "Optional[int]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      }
    ],
    "program": [
      {
        "method": "GET",
        "path": "/api/v1/programs/templates",
        "function": "list_templates",
        "file": "api/program_api.py",
        "line": 62,
        "module": "program",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "category",
            "type": "Optional[str]"
          },
          {
            "name": "tenant_id",
            "type": "Optional[int]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/programs/templates",
        "function": "create_template",
        "file": "api/program_api.py",
        "line": 73,
        "module": "program",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "request",
            "type": "CreateTemplateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/programs/enroll",
        "function": "enroll_program",
        "file": "api/program_api.py",
        "line": 113,
        "module": "program",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "request",
            "type": "EnrollRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/programs/my",
        "function": "get_my_programs",
        "file": "api/program_api.py",
        "line": 132,
        "module": "program",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "templates": [
      {
        "method": "GET",
        "path": "/api/v1/programs/templates/{template_id}",
        "function": "get_template",
        "file": "api/program_api.py",
        "line": 83,
        "module": "templates",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "template_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/programs/templates/{template_id}",
        "function": "update_template",
        "file": "api/program_api.py",
        "line": 96,
        "module": "templates",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "template_id",
            "type": "str"
          },
          {
            "name": "request",
            "type": "UpdateTemplateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "promotion": [
      {
        "method": "GET",
        "path": "/api/v1/promotion/progress",
        "function": "get_promotion_progress",
        "file": "api/promotion_api.py",
        "line": 31,
        "module": "promotion",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户晋级进度（四维雷达数据）",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/promotion/rules",
        "function": "get_promotion_rules",
        "file": "api/promotion_api.py",
        "line": 59,
        "module": "promotion",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取所有晋级规则配置",
        "is_async": false,
        "parameters": [
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/promotion/check",
        "function": "check_eligibility",
        "file": "api/promotion_api.py",
        "line": 67,
        "module": "promotion",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "校验当前用户晋级资格（不提交申请）",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/promotion/apply",
        "function": "apply_for_promotion",
        "file": "api/promotion_api.py",
        "line": 77,
        "module": "promotion",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "提交晋级申请（自动校验条件）",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/promotion/applications",
        "function": "list_promotion_applications",
        "file": "api/promotion_api.py",
        "line": 167,
        "module": "promotion",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查看晋级申请列表（教练/管理员）",
        "is_async": false,
        "parameters": [
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "push_recommendation": [
      {
        "method": "GET",
        "path": "/api/v1/push-recommendations/{student_id}",
        "function": "get_student_recommendation",
        "file": "api/push_recommendation_api.py",
        "line": 42,
        "module": "push_recommendation",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取某个学员的推送建议",
        "is_async": true,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{student_id}": [
      {
        "method": "POST",
        "path": "/api/v1/push-recommendations/{student_id}/apply",
        "function": "apply_recommendation",
        "file": "api/push_recommendation_api.py",
        "line": 55,
        "module": "{student_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "一键应用建议（返回预填的推送表单数据）\n\n前端收到后可直接填入推送抽屉表单",
        "is_async": true,
        "parameters": [
          {
            "name": "student_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "question": [
      {
        "method": "GET",
        "path": "/api/v1/certification/questions/{question_id}",
        "function": "get_question",
        "file": "api/question_api.py",
        "line": 111,
        "module": "question",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取题目详情",
        "is_async": false,
        "parameters": [
          {
            "name": "question_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/certification/questions/{question_id}",
        "function": "update_question",
        "file": "api/question_api.py",
        "line": 124,
        "module": "question",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新题目",
        "is_async": false,
        "parameters": [
          {
            "name": "question_id",
            "type": "str"
          },
          {
            "name": "req",
            "type": "QuestionUpdateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/certification/questions/{question_id}",
        "function": "delete_question",
        "file": "api/question_api.py",
        "line": 148,
        "module": "question",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除题目",
        "is_async": false,
        "parameters": [
          {
            "name": "question_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "reminders": [
      {
        "method": "GET",
        "path": "/api/v1/reminders",
        "function": "list_reminders",
        "file": "api/reminder_api.py",
        "line": 60,
        "module": "reminders",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户的提醒列表",
        "is_async": true,
        "parameters": [
          {
            "name": "active_only",
            "type": "bool"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/reminders",
        "function": "create_reminder",
        "file": "api/reminder_api.py",
        "line": 78,
        "module": "reminders",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "创建提醒",
        "is_async": true,
        "parameters": [
          {
            "name": "body",
            "type": "CreateReminderRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/reminders/{reminder_id}",
        "function": "update_reminder",
        "file": "api/reminder_api.py",
        "line": 110,
        "module": "reminders",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新提醒",
        "is_async": true,
        "parameters": [
          {
            "name": "reminder_id",
            "type": "int"
          },
          {
            "name": "body",
            "type": "UpdateReminderRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/reminders/{reminder_id}",
        "function": "delete_reminder",
        "file": "api/reminder_api.py",
        "line": 146,
        "module": "reminders",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除提醒",
        "is_async": true,
        "parameters": [
          {
            "name": "reminder_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "routes": [
      {
        "method": "GET",
        "path": "/api/v1/health",
        "function": "health_check",
        "file": "api/routes.py",
        "line": 96,
        "module": "routes",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "HealthCheckResponse",
        "return_type": null,
        "docstring": "健康检查端点",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/experts",
        "function": "list_experts",
        "file": "api/routes.py",
        "line": 120,
        "module": "routes",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          }
        ],
        "response_model": "ExpertsListResponse",
        "return_type": null,
        "docstring": "获取专家列表",
        "is_async": true,
        "parameters": [
          {
            "name": "orchestrator",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/chat",
        "function": "chat",
        "file": "api/routes.py",
        "line": 153,
        "module": "routes",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          }
        ],
        "response_model": "OctopusChatResponse",
        "return_type": null,
        "docstring": "八爪鱼智能对话接口\n\n- 自动路由到合适的专家\n- 集成效能感限幅 (Octopus Clamping)\n- 返回 reasoning_path 和 clamped_tasks\n- 支持穿戴设备数据 (wearable_data) 输入",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "OctopusChatRequest"
          },
          {
            "name": "orchestrator",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/decompose",
        "function": "decompose_advice",
        "file": "api/routes.py",
        "line": 292,
        "module": "routes",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_decomposer",
            "role": "custom"
          }
        ],
        "response_model": "DecomposeResponse",
        "return_type": null,
        "docstring": "任务分解接口\n\n- 将长建议拆解为具体任务\n- 每个任务包含效能评分\n- 支持个性化分解",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "DecomposeRequest"
          },
          {
            "name": "decomposer",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v2/status",
        "function": "get_v14_status",
        "file": "api/v14/routes.py",
        "line": 80,
        "module": "routes",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取v14版本状态",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v2/health",
        "function": "v14_health_check",
        "file": "api/v14/routes.py",
        "line": 99,
        "module": "routes",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "v14健康检查",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v2/features",
        "function": "get_features",
        "file": "api/v14/routes.py",
        "line": 123,
        "module": "routes",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取功能开关状态",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/health",
        "function": "health_check",
        "file": "xingjian-agent/api/routes.py",
        "line": 96,
        "module": "routes",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "HealthCheckResponse",
        "return_type": null,
        "docstring": "健康检查端点",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/experts",
        "function": "list_experts",
        "file": "xingjian-agent/api/routes.py",
        "line": 120,
        "module": "routes",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          }
        ],
        "response_model": "ExpertsListResponse",
        "return_type": null,
        "docstring": "获取专家列表",
        "is_async": true,
        "parameters": [
          {
            "name": "orchestrator",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/chat",
        "function": "chat",
        "file": "xingjian-agent/api/routes.py",
        "line": 153,
        "module": "routes",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          }
        ],
        "response_model": "OctopusChatResponse",
        "return_type": null,
        "docstring": "八爪鱼智能对话接口\n\n- 自动路由到合适的专家\n- 集成效能感限幅 (Octopus Clamping)\n- 返回 reasoning_path 和 clamped_tasks\n- 支持穿戴设备数据 (wearable_data) 输入",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "OctopusChatRequest"
          },
          {
            "name": "orchestrator",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/decompose",
        "function": "decompose_advice",
        "file": "xingjian-agent/api/routes.py",
        "line": 292,
        "module": "routes",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_decomposer",
            "role": "custom"
          }
        ],
        "response_model": "DecomposeResponse",
        "return_type": null,
        "docstring": "任务分解接口\n\n- 将长建议拆解为具体任务\n- 每个任务包含效能评分\n- 支持个性化分解",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "DecomposeRequest"
          },
          {
            "name": "decomposer",
            "type": "Any"
          }
        ]
      }
    ],
    "session": [
      {
        "method": "DELETE",
        "path": "/api/v1/session/{session_id}",
        "function": "delete_session",
        "file": "api/routes.py",
        "line": 343,
        "module": "session",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "删除会话",
        "is_async": true,
        "parameters": [
          {
            "name": "session_id",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/session/reset-all",
        "function": "reset_all_sessions",
        "file": "api/routes.py",
        "line": 359,
        "module": "session",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "重置所有会话",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "DELETE",
        "path": "/api/v1/session/{session_id}",
        "function": "delete_session",
        "file": "xingjian-agent/api/routes.py",
        "line": 343,
        "module": "session",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "删除会话",
        "is_async": true,
        "parameters": [
          {
            "name": "session_id",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/session/reset-all",
        "function": "reset_all_sessions",
        "file": "xingjian-agent/api/routes.py",
        "line": 359,
        "module": "session",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "重置所有会话",
        "is_async": true,
        "parameters": []
      }
    ],
    "safety": [
      {
        "method": "GET",
        "path": "/api/v1/safety/dashboard",
        "function": "safety_dashboard",
        "file": "api/safety_api.py",
        "line": 48,
        "module": "safety",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "安全仪表盘 — 今日/本周/本月统计",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/safety/logs",
        "function": "safety_logs",
        "file": "api/safety_api.py",
        "line": 108,
        "module": "safety",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "安全日志列表 (分页+筛选)",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "event_type",
            "type": "Optional[str]"
          },
          {
            "name": "severity",
            "type": "Optional[str]"
          },
          {
            "name": "resolved",
            "type": "Optional[bool]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/safety/review-queue",
        "function": "safety_review_queue",
        "file": "api/safety_api.py",
        "line": 217,
        "module": "safety",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "待审核安全事件队列",
        "is_async": false,
        "parameters": [
          {
            "name": "page",
            "type": "int"
          },
          {
            "name": "page_size",
            "type": "int"
          },
          {
            "name": "severity",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/safety/config",
        "function": "get_safety_config",
        "file": "api/safety_api.py",
        "line": 269,
        "module": "safety",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前安全关键词/规则配置",
        "is_async": false,
        "parameters": [
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/safety/config",
        "function": "update_safety_config",
        "file": "api/safety_api.py",
        "line": 291,
        "module": "safety",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新安全关键词配置 (仅更新传入的字段)",
        "is_async": false,
        "parameters": [
          {
            "name": "body",
            "type": "SafetyConfigUpdate"
          },
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      }
    ],
    "logs": [
      {
        "method": "GET",
        "path": "/api/v1/safety/logs/{log_id}",
        "function": "safety_log_detail",
        "file": "api/safety_api.py",
        "line": 159,
        "module": "logs",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "安全日志详情",
        "is_async": false,
        "parameters": [
          {
            "name": "log_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/safety/logs/{log_id}/resolve",
        "function": "resolve_safety_log",
        "file": "api/safety_api.py",
        "line": 189,
        "module": "logs",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "标记安全事件为已处理",
        "is_async": false,
        "parameters": [
          {
            "name": "log_id",
            "type": "int"
          },
          {
            "name": "body",
            "type": "ResolveRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "Any"
          }
        ]
      }
    ],
    "reports": [
      {
        "method": "GET",
        "path": "/api/v1/safety/reports/daily",
        "function": "safety_daily_report",
        "file": "api/safety_api.py",
        "line": 334,
        "module": "reports",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "查看安全日报 (默认昨天)",
        "is_async": false,
        "parameters": [
          {
            "name": "date",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "admin",
            "type": "Any"
          }
        ]
      }
    ],
    "search": [
      {
        "method": "GET",
        "path": "/api/v1/search",
        "function": "global_search",
        "file": "api/search_api.py",
        "line": 104,
        "module": "search",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "全平台搜索（标准路径）",
        "is_async": false,
        "parameters": [
          {
            "name": "q",
            "type": "str"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "current_user",
            "type": "Any"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "segments": [
      {
        "method": "GET",
        "path": "/api/v1/segments/permissions",
        "function": "get_user_permissions",
        "file": "api/segments_api.py",
        "line": 128,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "UserPermissionsResponse",
        "return_type": null,
        "docstring": "获取用户权限\n\n根据角色、来源和服务等级计算用户的可用功能",
        "is_async": true,
        "parameters": [
          {
            "name": "role",
            "type": "str"
          },
          {
            "name": "source",
            "type": "str"
          },
          {
            "name": "service_tier",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/segments/check-feature",
        "function": "check_feature_access",
        "file": "api/segments_api.py",
        "line": 190,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "检查用户是否有某功能的权限",
        "is_async": true,
        "parameters": [
          {
            "name": "feature",
            "type": "str"
          },
          {
            "name": "role",
            "type": "str"
          },
          {
            "name": "source",
            "type": "str"
          },
          {
            "name": "service_tier",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/segments/upgrade-suggestion",
        "function": "get_upgrade_suggestion_api",
        "file": "api/segments_api.py",
        "line": 235,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "UpgradeSuggestionResponse",
        "return_type": null,
        "docstring": "获取升级建议",
        "is_async": true,
        "parameters": [
          {
            "name": "feature",
            "type": "str"
          },
          {
            "name": "service_tier",
            "type": "str"
          },
          {
            "name": "source",
            "type": "str"
          },
          {
            "name": "role",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/segments/list",
        "function": "list_segments",
        "file": "api/segments_api.py",
        "line": 291,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "List[SegmentInfo]",
        "return_type": null,
        "docstring": "获取用户分群列表",
        "is_async": true,
        "parameters": [
          {
            "name": "source",
            "type": "Optional[str]"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/segments/roles",
        "function": "list_roles",
        "file": "api/segments_api.py",
        "line": 359,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "List[RoleInfo]",
        "return_type": null,
        "docstring": "获取所有角色列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/segments/tiers",
        "function": "list_service_tiers",
        "file": "api/segments_api.py",
        "line": 373,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "List[TierInfo]",
        "return_type": null,
        "docstring": "获取所有服务等级列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/segments/sources",
        "function": "list_user_sources",
        "file": "api/segments_api.py",
        "line": 394,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "List[SourceInfo]",
        "return_type": null,
        "docstring": "获取所有用户来源列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v1/segments/features",
        "function": "list_features",
        "file": "api/segments_api.py",
        "line": 414,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "List[dict]",
        "return_type": null,
        "docstring": "获取所有功能模块列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/api/v1/segments/check-role-permission",
        "function": "check_role_permission_api",
        "file": "api/segments_api.py",
        "line": 431,
        "module": "segments",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "检查角色权限",
        "is_async": true,
        "parameters": [
          {
            "name": "user_role",
            "type": "str"
          },
          {
            "name": "required_role",
            "type": "str"
          }
        ]
      }
    ],
    "survey": [
      {
        "method": "GET",
        "path": "/api/v1/surveys/{survey_id}",
        "function": "get_survey",
        "file": "api/survey_api.py",
        "line": 97,
        "module": "survey",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PATCH",
        "path": "/api/v1/surveys/{survey_id}",
        "function": "update_survey",
        "file": "api/survey_api.py",
        "line": 114,
        "module": "survey",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "dict"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/surveys/{survey_id}",
        "function": "delete_survey",
        "file": "api/survey_api.py",
        "line": 129,
        "module": "survey",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{survey_id}": [
      {
        "method": "POST",
        "path": "/api/v1/surveys/{survey_id}/publish",
        "function": "publish_survey",
        "file": "api/survey_api.py",
        "line": 143,
        "module": "{survey_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/surveys/{survey_id}/close",
        "function": "close_survey",
        "file": "api/survey_api.py",
        "line": 163,
        "module": "{survey_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/surveys/{survey_id}/questions",
        "function": "save_questions",
        "file": "api/survey_api.py",
        "line": 179,
        "module": "{survey_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "questions",
            "type": "List[dict]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/surveys/{survey_id}/questions/reorder",
        "function": "reorder_questions",
        "file": "api/survey_api.py",
        "line": 194,
        "module": "{survey_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "question_ids",
            "type": "List[int]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/surveys/{survey_id}/questions/{question_id}",
        "function": "delete_question",
        "file": "api/survey_api.py",
        "line": 209,
        "module": "{survey_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "question_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/surveys/{survey_id}/stats",
        "function": "get_stats",
        "file": "api/survey_stats_api.py",
        "line": 32,
        "module": "{survey_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/surveys/{survey_id}/responses",
        "function": "list_responses",
        "file": "api/survey_stats_api.py",
        "line": 46,
        "module": "{survey_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "skip",
            "type": "int"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/surveys/{survey_id}/export",
        "function": "export_csv",
        "file": "api/survey_stats_api.py",
        "line": 60,
        "module": "{survey_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "survey_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "survey_response": [
      {
        "method": "GET",
        "path": "/api/v1/surveys/s/{short_code}",
        "function": "get_survey_by_short_code",
        "file": "api/survey_response_api.py",
        "line": 38,
        "module": "survey_response",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "short_code",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "{short_code}": [
      {
        "method": "POST",
        "path": "/api/v1/surveys/s/{short_code}/submit",
        "function": "submit_response",
        "file": "api/survey_response_api.py",
        "line": 80,
        "module": "{short_code}",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "_get_optional_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "short_code",
            "type": "str"
          },
          {
            "name": "request",
            "type": "Request"
          },
          {
            "name": "answers",
            "type": "List[dict]"
          },
          {
            "name": "duration_sec",
            "type": "Optional[int]"
          },
          {
            "name": "device_type",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "user_id",
            "type": "Optional[int]"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/surveys/s/{short_code}/save-draft",
        "function": "save_draft",
        "file": "api/survey_response_api.py",
        "line": 113,
        "module": "{short_code}",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "_get_optional_user_id",
            "role": "custom"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": false,
        "parameters": [
          {
            "name": "short_code",
            "type": "str"
          },
          {
            "name": "answers",
            "type": "List[dict]"
          },
          {
            "name": "current_page",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "user_id",
            "type": "Optional[int]"
          }
        ]
      }
    ],
    "tenant": [
      {
        "method": "GET",
        "path": "/api/v1/tenants/mine",
        "function": "get_my_tenant",
        "file": "api/tenant_api.py",
        "line": 225,
        "module": "tenant",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取当前用户关联的租户 (作为 owner 或 client)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/tenants/hub",
        "function": "tenant_hub",
        "file": "api/tenant_api.py",
        "line": 272,
        "module": "tenant",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "专家目录列表 (公开)",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}",
        "function": "get_tenant",
        "file": "api/tenant_api.py",
        "line": 298,
        "module": "tenant",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "租户详情 (owner/admin)",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PATCH",
        "path": "/api/v1/tenants/{tenant_id}",
        "function": "update_tenant",
        "file": "api/tenant_api.py",
        "line": 312,
        "module": "tenant",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新品牌/配置 (owner/admin)",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "TenantUpdateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "{tenant_id}": [
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/public",
        "function": "tenant_public",
        "file": "api/tenant_api.py",
        "line": 285,
        "module": "{tenant_id}",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "专家公开信息",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/clients",
        "function": "list_clients",
        "file": "api/tenant_api.py",
        "line": 348,
        "module": "{tenant_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "客户列表",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "status",
            "type": "Optional[str]"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/tenants/{tenant_id}/clients",
        "function": "add_client",
        "file": "api/tenant_api.py",
        "line": 387,
        "module": "{tenant_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "添加客户",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "ClientAddRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PATCH",
        "path": "/api/v1/tenants/{tenant_id}/clients/{client_id}",
        "function": "update_client",
        "file": "api/tenant_api.py",
        "line": 435,
        "module": "{tenant_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新客户",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "client_id",
            "type": "int"
          },
          {
            "name": "data",
            "type": "ClientUpdateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/agents",
        "function": "list_agents",
        "file": "api/tenant_api.py",
        "line": 470,
        "module": "{tenant_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "Agent 映射列表",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/tenants/{tenant_id}/agents",
        "function": "batch_update_agents",
        "file": "api/tenant_api.py",
        "line": 506,
        "module": "{tenant_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "批量更新 Agent 配置",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "AgentBatchUpdate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/stats",
        "function": "tenant_stats",
        "file": "api/tenant_api.py",
        "line": 564,
        "module": "{tenant_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "客户统计",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/tenants/{tenant_id}/routing",
        "function": "get_routing_config",
        "file": "api/tenant_api.py",
        "line": 615,
        "module": "{tenant_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "获取租户路由配置",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/tenants/{tenant_id}/routing",
        "function": "update_routing_config",
        "file": "api/tenant_api.py",
        "line": 654,
        "module": "{tenant_id}",
        "auth_level": "coach_or_admin",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_coach_or_admin",
            "role": "coach_or_admin"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新租户路由配置",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "RoutingConfigUpdate"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/tenants/{tenant_id}/routing/test",
        "function": "test_routing",
        "file": "api/tenant_api.py",
        "line": 712,
        "module": "{tenant_id}",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "测试路由效果 — 给定消息, 返回路由结果 (不执行Agent)",
        "is_async": false,
        "parameters": [
          {
            "name": "tenant_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "RoutingTestRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "upload": [
      {
        "method": "POST",
        "path": "/api/v1/upload/survey-image",
        "function": "upload_survey_image",
        "file": "api/upload_api.py",
        "line": 28,
        "module": "upload",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "上传问卷图片\n\n- 限制: 5MB, image/jpeg|png|webp|gif\n- 存储: static/uploads/survey_images/{userId}_{timestamp}_{uuid8}.{ext}\n- 返回: { url: \"/api/static/uploads/survey_images/xxx.jpg\" }",
        "is_async": true,
        "parameters": [
          {
            "name": "file",
            "type": "UploadFile"
          },
          {
            "name": "current_user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "users": [
      {
        "method": "GET",
        "path": "/api/v1/admin/users/{user_id}",
        "function": "get_user_detail",
        "file": "api/user_api.py",
        "line": 129,
        "module": "users",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户详情",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/admin/users/{user_id}",
        "function": "update_user",
        "file": "api/user_api.py",
        "line": 191,
        "module": "users",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "更新用户信息",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "request",
            "type": "UpdateUserRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v1/admin/users/{user_id}/status",
        "function": "update_status",
        "file": "api/user_api.py",
        "line": 222,
        "module": "users",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "启用/停用用户",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "request",
            "type": "UpdateStatusRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/api/v1/admin/users/{user_id}",
        "function": "delete_user",
        "file": "api/user_api.py",
        "line": 243,
        "module": "users",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "删除用户",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v3/auth/users/{user_id}/role",
        "function": "update_role",
        "file": "api/routers/auth.py",
        "line": 153,
        "module": "users",
        "auth_level": "role_required",
        "dependencies": [
          {
            "dependency": "require_role(admin)",
            "role": "role_required"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "仅 admin 可修改角色",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "new_role",
            "type": "str"
          },
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "PUT",
        "path": "/api/v3/auth/users/{user_id}/role",
        "function": "update_role",
        "file": "v3/routers/auth.py",
        "line": 162,
        "module": "users",
        "auth_level": "role_required",
        "dependencies": [
          {
            "dependency": "require_role(admin)",
            "role": "role_required"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "仅 admin 可修改角色",
        "is_async": false,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "new_role",
            "type": "str"
          },
          {
            "name": "_admin",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "distribution": [
      {
        "method": "GET",
        "path": "/api/v1/admin/distribution/pending",
        "function": "list_pending",
        "file": "api/user_api.py",
        "line": 322,
        "module": "distribution",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "待分配成长者",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/admin/distribution/assign",
        "function": "assign_grower",
        "file": "api/user_api.py",
        "line": 357,
        "module": "distribution",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "分配成长者给教练",
        "is_async": false,
        "parameters": [
          {
            "name": "request",
            "type": "AssignRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/admin/distribution/transfers",
        "function": "list_transfers",
        "file": "api/user_api.py",
        "line": 389,
        "module": "distribution",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "待审批转移",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/admin/distribution/transfers/{grower_id}/approve",
        "function": "approve_transfer",
        "file": "api/user_api.py",
        "line": 414,
        "module": "distribution",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "批准转移",
        "is_async": false,
        "parameters": [
          {
            "name": "grower_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/admin/distribution/transfers/{grower_id}/reject",
        "function": "reject_transfer",
        "file": "api/user_api.py",
        "line": 444,
        "module": "distribution",
        "auth_level": "admin_only",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "require_admin",
            "role": "admin_only"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "拒绝转移",
        "is_async": false,
        "parameters": [
          {
            "name": "grower_id",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "current_user",
            "type": "User"
          }
        ]
      }
    ],
    "xingjian": [
      {
        "method": "GET",
        "path": "/",
        "function": "root",
        "file": "api/xingjian_api.py",
        "line": 102,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "API 根路径",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/health",
        "function": "health_check",
        "file": "api/xingjian_api.py",
        "line": 113,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "健康检查",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/experts",
        "function": "list_experts",
        "file": "api/xingjian_api.py",
        "line": 123,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "List[ExpertInfo]",
        "return_type": null,
        "docstring": "获取可用专家列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/chat",
        "function": "chat",
        "file": "api/xingjian_api.py",
        "line": 132,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "ChatResponse",
        "return_type": null,
        "docstring": "健康咨询接口\n\n- 自动路由到合适的专家\n- 支持多专家协作\n- 可指定专家直接对话",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ChatRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/clamping",
        "function": "octopus_clamping",
        "file": "api/xingjian_api.py",
        "line": 168,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "ClampingResponse",
        "return_type": null,
        "docstring": "八爪鱼效能限幅接口\n\n根据用户效能分和穿戴数据，动态裁剪任务难度和数量",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ClampingRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/reset",
        "function": "reset_conversation",
        "file": "api/xingjian_api.py",
        "line": 189,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "重置所有对话历史",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/openapi-tools.json",
        "function": "get_dify_tools_schema",
        "file": "api/xingjian_api.py",
        "line": 201,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取 Dify 自定义工具 Schema\n\n在 Dify 中创建自定义工具时，导入此 Schema",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/",
        "function": "root",
        "file": "xingjian-agent/api/xingjian_api.py",
        "line": 102,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "API 根路径",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/health",
        "function": "health_check",
        "file": "xingjian-agent/api/xingjian_api.py",
        "line": 113,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "健康检查",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/experts",
        "function": "list_experts",
        "file": "xingjian-agent/api/xingjian_api.py",
        "line": 123,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "List[ExpertInfo]",
        "return_type": null,
        "docstring": "获取可用专家列表",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/chat",
        "function": "chat",
        "file": "xingjian-agent/api/xingjian_api.py",
        "line": 132,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "ChatResponse",
        "return_type": null,
        "docstring": "健康咨询接口\n\n- 自动路由到合适的专家\n- 支持多专家协作\n- 可指定专家直接对话",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ChatRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/clamping",
        "function": "octopus_clamping",
        "file": "xingjian-agent/api/xingjian_api.py",
        "line": 168,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": "ClampingResponse",
        "return_type": null,
        "docstring": "八爪鱼效能限幅接口\n\n根据用户效能分和穿戴数据，动态裁剪任务难度和数量",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ClampingRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/reset",
        "function": "reset_conversation",
        "file": "xingjian-agent/api/xingjian_api.py",
        "line": 189,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "重置所有对话历史",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/openapi-tools.json",
        "function": "get_dify_tools_schema",
        "file": "xingjian-agent/api/xingjian_api.py",
        "line": 201,
        "module": "xingjian",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取 Dify 自定义工具 Schema\n\n在 Dify 中创建自定义工具时，导入此 Schema",
        "is_async": true,
        "parameters": []
      }
    ],
    "diagnostic": [
      {
        "method": "POST",
        "path": "/api/v3/diagnostic/minimal",
        "function": "diagnostic_minimal",
        "file": "api/routers/diagnostic.py",
        "line": 37,
        "module": "diagnostic",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "TTM 7 题 + SPI quick 5 题 = 12 题即可生成基础处方\n\n返回: Layer1 + Layer2 + Layer4(基础处方)",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "DiagnosticMinimalRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/diagnostic/full",
        "function": "diagnostic_full",
        "file": "api/routers/diagnostic.py",
        "line": 61,
        "module": "diagnostic",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "完整诊断管道: Layer1(行为诊断) → Layer2(SPI) → Layer3(能力与支持) → Layer4(处方)",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "DiagnosticFullRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/diagnostic/minimal",
        "function": "diagnostic_minimal",
        "file": "v3/routers/diagnostic.py",
        "line": 37,
        "module": "diagnostic",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "TTM 7 题 + SPI quick 5 题 = 12 题即可生成基础处方\n\n返回: Layer1 + Layer2 + Layer4(基础处方)",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "DiagnosticMinimalRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/diagnostic/full",
        "function": "diagnostic_full",
        "file": "v3/routers/diagnostic.py",
        "line": 61,
        "module": "diagnostic",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "完整诊断管道: Layer1(行为诊断) → Layer2(SPI) → Layer3(能力与支持) → Layer4(处方)",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "DiagnosticFullRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "v3": [
      {
        "method": "GET",
        "path": "/api/v3/status",
        "function": "system_status",
        "file": "api/routers/health.py",
        "line": 33,
        "module": "v3",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_qdrant_store",
            "role": "custom"
          },
          {
            "dependency": "get_llm_router",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "完整系统状态:\n- 数据库连接\n- Qdrant 向量库\n- LLM 路由统计\n- 环境变量检查",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "store",
            "type": "QdrantStore"
          },
          {
            "name": "router_inst",
            "type": "LLMRouter"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/status",
        "function": "system_status",
        "file": "v3/routers/health.py",
        "line": 33,
        "module": "v3",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_qdrant_store",
            "role": "custom"
          },
          {
            "dependency": "get_llm_router",
            "role": "custom"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "完整系统状态:\n- 数据库连接\n- Qdrant 向量库\n- LLM 路由统计\n- 环境变量检查",
        "is_async": false,
        "parameters": [
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "store",
            "type": "QdrantStore"
          },
          {
            "name": "router_inst",
            "type": "LLMRouter"
          }
        ]
      }
    ],
    "incentive": [
      {
        "method": "POST",
        "path": "/api/v3/incentive/checkin",
        "function": "checkin",
        "file": "api/routers/incentive.py",
        "line": 19,
        "module": "incentive",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "每日打卡获得积分",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/incentive/task-complete",
        "function": "task_complete",
        "file": "api/routers/incentive.py",
        "line": 31,
        "module": "incentive",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "完成单个任务获得积分",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "TaskCompleteRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/incentive/balance",
        "function": "get_balance",
        "file": "api/routers/incentive.py",
        "line": 44,
        "module": "incentive",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "查询用户积分余额和成长等级",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/incentive/rx-context",
        "function": "rx_context",
        "file": "api/routers/incentive.py",
        "line": 61,
        "module": "incentive",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "获取当前成长等级下的处方模式和激励参数",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/incentive/checkin",
        "function": "checkin",
        "file": "v3/routers/incentive.py",
        "line": 19,
        "module": "incentive",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "每日打卡获得积分",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/incentive/task-complete",
        "function": "task_complete",
        "file": "v3/routers/incentive.py",
        "line": 31,
        "module": "incentive",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "完成单个任务获得积分",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "TaskCompleteRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/incentive/balance",
        "function": "get_balance",
        "file": "v3/routers/incentive.py",
        "line": 44,
        "module": "incentive",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "查询用户积分余额和成长等级",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v3/incentive/rx-context",
        "function": "rx_context",
        "file": "v3/routers/incentive.py",
        "line": 63,
        "module": "incentive",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "获取当前成长等级下的处方模式和激励参数",
        "is_async": false,
        "parameters": [
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "tracking": [
      {
        "method": "POST",
        "path": "/api/v3/tracking/daily",
        "function": "record_daily",
        "file": "api/routers/tracking.py",
        "line": 22,
        "module": "tracking",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "每日打卡后提交: 任务完成情况 + 心情 + 难度反馈\n\n自动触发 PDCA 检查:\n- 连续3天完成率<50% → 降低难度\n- 连续7天完成率>90% → 可升级",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "DailyOutcomeRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/tracking/weekly-review",
        "function": "weekly_review",
        "file": "api/routers/tracking.py",
        "line": 60,
        "module": "tracking",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "生成过去 7 天的效果报告:\n- 完成率趋势\n- SPI 变化\n- 阶段转变建议\n- PDCA 调整汇总",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "WeeklyReviewRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/tracking/stage-transition",
        "function": "stage_transition",
        "file": "api/routers/tracking.py",
        "line": 83,
        "module": "tracking",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "记录行为阶段变化 (S0→S1 等)",
        "is_async": false,
        "parameters": [
          {
            "name": "from_stage",
            "type": "str"
          },
          {
            "name": "to_stage",
            "type": "str"
          },
          {
            "name": "trigger",
            "type": "str"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/tracking/daily",
        "function": "record_daily",
        "file": "v3/routers/tracking.py",
        "line": 22,
        "module": "tracking",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "每日打卡后提交: 任务完成情况 + 心情 + 难度反馈\n\n自动触发 PDCA 检查:\n- 连续3天完成率<50% → 降低难度\n- 连续7天完成率>90% → 可升级",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "DailyOutcomeRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/tracking/weekly-review",
        "function": "weekly_review",
        "file": "v3/routers/tracking.py",
        "line": 60,
        "module": "tracking",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "生成过去 7 天的效果报告:\n- 完成率趋势\n- SPI 变化\n- 阶段转变建议\n- PDCA 调整汇总",
        "is_async": false,
        "parameters": [
          {
            "name": "req",
            "type": "WeeklyReviewRequest"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v3/tracking/stage-transition",
        "function": "stage_transition",
        "file": "v3/routers/tracking.py",
        "line": 91,
        "module": "tracking",
        "auth_level": "authenticated",
        "dependencies": [
          {
            "dependency": "get_current_user",
            "role": "authenticated"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "APIResponse",
        "return_type": null,
        "docstring": "记录行为阶段变化 (S0→S1 等)",
        "is_async": false,
        "parameters": [
          {
            "name": "from_stage",
            "type": "str"
          },
          {
            "name": "to_stage",
            "type": "str"
          },
          {
            "name": "trigger",
            "type": "str"
          },
          {
            "name": "user",
            "type": "User"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "actions": [
      {
        "method": "GET",
        "path": "/admin/behavior/actions/{action_id}",
        "function": "get_action_by_id",
        "file": "api/v14/admin_routes.py",
        "line": 247,
        "module": "actions",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取单个动作包",
        "is_async": true,
        "parameters": [
          {
            "name": "action_id",
            "type": "str"
          }
        ]
      }
    ],
    "stages": [
      {
        "method": "GET",
        "path": "/admin/behavior/stages/{stage_id}",
        "function": "get_stage_by_id",
        "file": "api/v14/admin_routes.py",
        "line": 286,
        "module": "stages",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取单个阶段定义",
        "is_async": true,
        "parameters": [
          {
            "name": "stage_id",
            "type": "str"
          }
        ]
      }
    ],
    "triggers": [
      {
        "method": "GET",
        "path": "/admin/behavior/triggers/for-stage/{stage_id}",
        "function": "get_triggers_for_stage",
        "file": "api/v14/admin_routes.py",
        "line": 322,
        "module": "triggers",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取适用于指定阶段的触发规则",
        "is_async": true,
        "parameters": [
          {
            "name": "stage_id",
            "type": "str"
          }
        ]
      }
    ],
    "copilot": [
      {
        "method": "POST",
        "path": "/copilot/analyze",
        "function": "copilot_analyze",
        "file": "api/v14/copilot_routes.py",
        "line": 60,
        "module": "copilot",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "CoachCopilot 分析端点 (生产环境)\nLayer 1: 关键词匹配\nLayer 2: BehaviorEngine 条件引擎 (可选)\n返回与沙盒 simulate-chat 相同的响应格式",
        "is_async": true,
        "parameters": [
          {
            "name": "uid",
            "type": "str"
          },
          {
            "name": "message",
            "type": "str"
          },
          {
            "name": "context",
            "type": "dict"
          }
        ]
      }
    ],
    "decision": [
      {
        "method": "POST",
        "path": "/disclosure/decision/create",
        "function": "create_disclosure_decision",
        "file": "api/v14/disclosure_routes.py",
        "line": 96,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "创建披露决策",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "CreateDecisionRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/disclosure/decision/{report_id}",
        "function": "get_disclosure_decision",
        "file": "api/v14/disclosure_routes.py",
        "line": 118,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取披露决策",
        "is_async": true,
        "parameters": [
          {
            "name": "report_id",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/disclosure/decision/{report_id}/sign",
        "function": "sign_disclosure",
        "file": "api/v14/disclosure_routes.py",
        "line": 133,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "签名披露决策",
        "is_async": true,
        "parameters": [
          {
            "name": "report_id",
            "type": "str"
          },
          {
            "name": "request",
            "type": "SignRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/disclosure/decision/{report_id}/approve",
        "function": "approve_disclosure",
        "file": "api/v14/disclosure_routes.py",
        "line": 171,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "批准披露",
        "is_async": true,
        "parameters": [
          {
            "name": "report_id",
            "type": "str"
          },
          {
            "name": "expert_id",
            "type": "str"
          },
          {
            "name": "expert_name",
            "type": "str"
          },
          {
            "name": "role",
            "type": "str"
          },
          {
            "name": "notes",
            "type": "Optional[str]"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/disclosure/decision/{report_id}/reject",
        "function": "reject_disclosure",
        "file": "api/v14/disclosure_routes.py",
        "line": 204,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "驳回披露",
        "is_async": true,
        "parameters": [
          {
            "name": "report_id",
            "type": "str"
          },
          {
            "name": "expert_id",
            "type": "str"
          },
          {
            "name": "expert_name",
            "type": "str"
          },
          {
            "name": "reason",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/disclosure/decision/{report_id}/chapter",
        "function": "set_chapter_visibility",
        "file": "api/v14/disclosure_routes.py",
        "line": 230,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "设置章节可见性",
        "is_async": true,
        "parameters": [
          {
            "name": "report_id",
            "type": "str"
          },
          {
            "name": "request",
            "type": "ChapterVisibilityRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/disclosure/decision/{report_id}/rewrite",
        "function": "add_content_rewrite",
        "file": "api/v14/disclosure_routes.py",
        "line": 253,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "添加内容重写",
        "is_async": true,
        "parameters": [
          {
            "name": "report_id",
            "type": "str"
          },
          {
            "name": "request",
            "type": "RewriteRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/disclosure/decision/{report_id}/visible-chapters",
        "function": "get_visible_chapters",
        "file": "api/v14/disclosure_routes.py",
        "line": 274,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取指定角色可见的章节",
        "is_async": true,
        "parameters": [
          {
            "name": "report_id",
            "type": "str"
          },
          {
            "name": "role",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/disclosure/decision/{report_id}/patient-message",
        "function": "get_patient_message",
        "file": "api/v14/disclosure_routes.py",
        "line": 292,
        "module": "decision",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取患者端显示消息",
        "is_async": true,
        "parameters": [
          {
            "name": "report_id",
            "type": "str"
          }
        ]
      }
    ],
    "disclosure": [
      {
        "method": "GET",
        "path": "/disclosure/chapters",
        "function": "get_chapters",
        "file": "api/v14/disclosure_routes.py",
        "line": 310,
        "module": "disclosure",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取所有章节配置",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/disclosure/blacklist",
        "function": "get_blacklist",
        "file": "api/v14/disclosure_routes.py",
        "line": 336,
        "module": "disclosure",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取禁词库",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "POST",
        "path": "/disclosure/rewrite",
        "function": "ai_rewrite",
        "file": "api/v14/disclosure_routes.py",
        "line": 406,
        "module": "disclosure",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "AI重写文本",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "AIRewriteRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/disclosure/pending",
        "function": "get_pending_reviews",
        "file": "api/v14/disclosure_routes.py",
        "line": 457,
        "module": "disclosure",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取待审核列表",
        "is_async": true,
        "parameters": []
      }
    ],
    "blacklist": [
      {
        "method": "POST",
        "path": "/disclosure/blacklist/check",
        "function": "check_blacklist",
        "file": "api/v14/disclosure_routes.py",
        "line": 347,
        "module": "blacklist",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "检查文本中的敏感词",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "BlacklistCheckRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/disclosure/blacklist/auto-replace",
        "function": "auto_replace_blacklist",
        "file": "api/v14/disclosure_routes.py",
        "line": 381,
        "module": "blacklist",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "自动替换敏感词",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "BlacklistCheckRequest"
          }
        ]
      }
    ],
    "rewrite": [
      {
        "method": "POST",
        "path": "/disclosure/rewrite/assessment",
        "function": "rewrite_assessment",
        "file": "api/v14/disclosure_routes.py",
        "line": 420,
        "module": "rewrite",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "重写评估摘要",
        "is_async": true,
        "parameters": [
          {
            "name": "big5_summary",
            "type": "str"
          },
          {
            "name": "ttm_stage",
            "type": "str"
          },
          {
            "name": "bpt6_type",
            "type": "str"
          },
          {
            "name": "risk_level",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/disclosure/rewrite/stage-message/{ttm_stage}",
        "function": "get_stage_message",
        "file": "api/v14/disclosure_routes.py",
        "line": 441,
        "module": "rewrite",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取阶段鼓励消息",
        "is_async": true,
        "parameters": [
          {
            "name": "ttm_stage",
            "type": "str"
          }
        ]
      }
    ],
    "signature": [
      {
        "method": "GET",
        "path": "/disclosure/signature/pending",
        "function": "get_pending_signatures",
        "file": "api/v14/disclosure_routes.py",
        "line": 469,
        "module": "signature",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取待签名请求",
        "is_async": true,
        "parameters": [
          {
            "name": "role",
            "type": "Optional[str]"
          }
        ]
      }
    ],
    "quality": [
      {
        "method": "POST",
        "path": "/quality/audit",
        "function": "start_quality_audit",
        "file": "api/v14/quality_routes.py",
        "line": 47,
        "module": "quality",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "启动质量审计\n\n- sync=False (默认): 异步执行，立即返回，结果通过 /audit/result 查询\n- sync=True: 同步执行，等待结果返回\n\nArgs:\n    payload: 审计请求\n    sync: 是否同步执行\n\nReturns:\n    异步: {\"status\": \"audit_started\", \"trace_id\": \"...\"}\n    同步: Q",
        "is_async": true,
        "parameters": [
          {
            "name": "payload",
            "type": "AuditRequest"
          },
          {
            "name": "background_tasks",
            "type": "BackgroundTasks"
          },
          {
            "name": "sync",
            "type": "bool"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/quality/audit-batch",
        "function": "batch_quality_audit",
        "file": "api/v14/quality_routes.py",
        "line": 105,
        "module": "quality",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "批量质量审计（异步）\n\nArgs:\n    payload: 批量审计请求\n\nReturns:\n    批量审计状态",
        "is_async": true,
        "parameters": [
          {
            "name": "payload",
            "type": "BatchAuditRequest"
          },
          {
            "name": "background_tasks",
            "type": "BackgroundTasks"
          }
        ]
      }
    ],
    "audit": [
      {
        "method": "GET",
        "path": "/quality/audit/result/{trace_id}",
        "function": "get_audit_result",
        "file": "api/v14/quality_routes.py",
        "line": 158,
        "module": "audit",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取审计结果\n\nArgs:\n    trace_id: 追踪ID\n\nReturns:\n    审计结果或状态",
        "is_async": true,
        "parameters": [
          {
            "name": "trace_id",
            "type": "str"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/quality/audit/status",
        "function": "get_audit_status",
        "file": "api/v14/quality_routes.py",
        "line": 188,
        "module": "audit",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取审计系统状态\n\nReturns:\n    系统状态统计",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/quality/audit/list",
        "function": "list_audit_results",
        "file": "api/v14/quality_routes.py",
        "line": 216,
        "module": "audit",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "列出审计结果\n\nArgs:\n    grade: 筛选等级\n    limit: 返回数量\n    offset: 偏移量\n\nReturns:\n    审计结果列表",
        "is_async": true,
        "parameters": [
          {
            "name": "grade",
            "type": "Optional[str]"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "offset",
            "type": "int"
          }
        ]
      },
      {
        "method": "DELETE",
        "path": "/quality/audit/result/{trace_id}",
        "function": "delete_audit_result",
        "file": "api/v14/quality_routes.py",
        "line": 258,
        "module": "audit",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "删除审计结果\n\nArgs:\n    trace_id: 追踪ID",
        "is_async": true,
        "parameters": [
          {
            "name": "trace_id",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/quality/audit/safety-check",
        "function": "safety_focused_audit",
        "file": "api/v14/quality_routes.py",
        "line": 279,
        "module": "audit",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "安全性专项审计\n\n快速检查响应是否存在安全风险",
        "is_async": true,
        "parameters": [
          {
            "name": "response_text",
            "type": "str"
          },
          {
            "name": "trace_id",
            "type": "Optional[str]"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/quality/audit/with-v14-context",
        "function": "audit_with_v14_context",
        "file": "api/v14/quality_routes.py",
        "line": 322,
        "module": "audit",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "带v14上下文的审计\n\n自动获取用户的节律状态和触发事件",
        "is_async": true,
        "parameters": [
          {
            "name": "payload",
            "type": "AuditRequest"
          },
          {
            "name": "include_rhythm",
            "type": "bool"
          },
          {
            "name": "include_triggers",
            "type": "bool"
          }
        ]
      }
    ],
    "trigger": [
      {
        "method": "POST",
        "path": "/api/v2/trigger/emit",
        "function": "emit_trigger_event",
        "file": "api/v14/routes.py",
        "line": 138,
        "module": "trigger",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "发射触发事件\n\n需要启用: ENABLE_TRIGGER_EVENT_ROUTING",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "TriggerEventRequest"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v2/trigger/process",
        "function": "process_trigger_events",
        "file": "api/v14/routes.py",
        "line": 178,
        "module": "trigger",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "处理所有待处理的触发事件\n\n需要启用: ENABLE_TRIGGER_EVENT_ROUTING",
        "is_async": true,
        "parameters": []
      },
      {
        "method": "GET",
        "path": "/api/v2/trigger/stats",
        "function": "get_trigger_stats",
        "file": "api/v14/routes.py",
        "line": 203,
        "module": "trigger",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取Trigger统计信息",
        "is_async": true,
        "parameters": []
      }
    ],
    "rhythm": [
      {
        "method": "POST",
        "path": "/api/v2/rhythm/detect",
        "function": "detect_rhythm",
        "file": "api/v14/routes.py",
        "line": 225,
        "module": "rhythm",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "检测用户节律\n\n需要启用: ENABLE_RHYTHM_MODEL",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "RhythmProcessRequest"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v2/rhythm/current/{user_id}",
        "function": "get_current_rhythm",
        "file": "api/v14/routes.py",
        "line": 268,
        "module": "rhythm",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "获取用户当前节律状态",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          }
        ]
      }
    ],
    "integrated": [
      {
        "method": "POST",
        "path": "/api/v2/integrated/process",
        "function": "integrated_process",
        "file": "api/v14/routes.py",
        "line": 355,
        "module": "integrated",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "整合处理接口\n\n自动调用：\n1. TriggerEngine（v11）识别血糖触发\n2. TriggerRouter（v14）事件路由\n3. RhythmEngine（v14）节律检测\n4. AgentEnhancer（v14）安全检查\n5. DecisionCore（v11）生成响应",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "int"
          },
          {
            "name": "message",
            "type": "str"
          },
          {
            "name": "glucose_value",
            "type": "Optional[float]"
          },
          {
            "name": "context",
            "type": "Dict[str, Any]"
          }
        ]
      }
    ],
    "rx": [
      {
        "method": "POST",
        "path": "/api/v1/rx/compute",
        "function": "compute_rx",
        "file": "behavior_rx/rx_routes.py",
        "line": 273,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_rx_engine",
            "role": "custom"
          },
          {
            "dependency": "get_current_coach()",
            "role": "custom"
          }
        ],
        "response_model": "ComputeRxResponse",
        "return_type": null,
        "docstring": "计算行为处方\n\n输入三维上下文, 输出个性化处方对象:\n  - 目标行为 + 主策略 + 辅助策略\n  - 强度 + 节奏 + 沟通风格\n  - 微行动列表 + 奖励触发器\n  - 阻力阈值 + 升级规则",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ComputeRxRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "engine",
            "type": "BehaviorRxEngine"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/strategies",
        "function": "list_strategy_templates",
        "file": "behavior_rx/rx_routes.py",
        "line": 319,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rx_engine",
            "role": "custom"
          }
        ],
        "response_model": "List[Dict[str, Any]]",
        "return_type": null,
        "docstring": "获取 12 种行为策略模板\n\n可按 domain 过滤 (general/metabolic/cardiac/adherence)\n公开端点, 无需认证。",
        "is_async": true,
        "parameters": [
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "enabled_only",
            "type": "bool"
          },
          {
            "name": "engine",
            "type": "BehaviorRxEngine"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/rx/handoff",
        "function": "initiate_handoff",
        "file": "behavior_rx/rx_routes.py",
        "line": 428,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_handoff_service",
            "role": "custom"
          },
          {
            "dependency": "get_current_coach()",
            "role": "custom"
          }
        ],
        "response_model": "HandoffResponse",
        "return_type": null,
        "docstring": "发起 Agent 交接\n\n交接类型:\n  - stage_promotion: 阶段晋升交接 (Coach → 领域Agent)\n  - stage_regression: 阶段回退接管 (领域Agent → Coach)\n  - domain_coordination: 领域间协作交接\n  - cross_cutting: 横切介入 (Adherence Agent)\n  - emergency",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "HandoffRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "service",
            "type": "AgentHandoffService"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/rx/collaborate",
        "function": "collaborate",
        "file": "behavior_rx/rx_routes.py",
        "line": 507,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          },
          {
            "dependency": "get_current_coach()",
            "role": "custom"
          }
        ],
        "response_model": "CollaborateResponse",
        "return_type": null,
        "docstring": "4-Agent 协作编排执行\n\n自动识别场景并编排:\n  - new_user_assessment: 新用户 → Coach主导\n  - glucose_abnormal: 血糖异常 → Metabolic主导\n  - exercise_fear: 运动恐惧 → Coach前置 + Cardiac待命\n  - multi_morbidity: 多病共管 → 并行 + 横切\n  - stage_r",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "CollaborateRequest"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "orchestrator",
            "type": "AgentCollaborationOrchestrator"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/{rx_id}",
        "function": "get_rx_detail",
        "file": "behavior_rx/rx_routes.py",
        "line": 565,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_coach()",
            "role": "custom"
          }
        ],
        "response_model": "RxPrescriptionDTO",
        "return_type": null,
        "docstring": "通过 rx_id 获取处方详情",
        "is_async": true,
        "parameters": [
          {
            "name": "rx_id",
            "type": "uuid.UUID"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/rx/compute",
        "function": "compute_rx",
        "file": "behavior_rx/api/rx_routes.py",
        "line": 137,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rx_engine",
            "role": "custom"
          }
        ],
        "response_model": "ComputeRxResponse",
        "return_type": null,
        "docstring": "计算行为处方\n\n输入三维上下文, 输出个性化处方对象:\n  - 目标行为 + 主策略 + 辅助策略\n  - 强度 + 节奏 + 沟通风格\n  - 微行动列表 + 奖励触发器\n  - 阻力阈值 + 升级规则",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ComputeRxRequest"
          },
          {
            "name": "engine",
            "type": "BehaviorRxEngine"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/{rx_id}",
        "function": "get_rx_detail",
        "file": "behavior_rx/api/rx_routes.py",
        "line": 182,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "RxPrescriptionDTO",
        "return_type": null,
        "docstring": "通过 rx_id 获取处方详情",
        "is_async": true,
        "parameters": [
          {
            "name": "rx_id",
            "type": "uuid.UUID"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/strategies",
        "function": "list_strategy_templates",
        "file": "behavior_rx/api/rx_routes.py",
        "line": 235,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rx_engine",
            "role": "custom"
          }
        ],
        "response_model": "List[Dict[str, Any]]",
        "return_type": null,
        "docstring": "获取 12 种行为策略模板\n\n可按 domain 过滤 (general/metabolic/cardiac/adherence)",
        "is_async": true,
        "parameters": [
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "enabled_only",
            "type": "bool"
          },
          {
            "name": "engine",
            "type": "BehaviorRxEngine"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/rx/handoff",
        "function": "initiate_handoff",
        "file": "behavior_rx/api/rx_routes.py",
        "line": 268,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_handoff_service",
            "role": "custom"
          }
        ],
        "response_model": "Dict[str, Any]",
        "return_type": null,
        "docstring": "发起 Agent 交接\n\n交接类型:\n  - stage_promotion: 阶段晋升交接 (Coach → 领域Agent)\n  - stage_regression: 阶段回退接管 (领域Agent → Coach)\n  - domain_coordination: 领域间协作交接\n  - cross_cutting: 横切介入 (Adherence Agent)\n  - emergency",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "HandoffRequest"
          },
          {
            "name": "service",
            "type": "AgentHandoffService"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/rx/collaborate",
        "function": "collaborate",
        "file": "behavior_rx/api/rx_routes.py",
        "line": 328,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          }
        ],
        "response_model": "CollaborateResponse",
        "return_type": null,
        "docstring": "4-Agent 协作编排执行\n\n自动识别场景并编排:\n  - new_user_assessment: 新用户 → Coach主导\n  - glucose_abnormal: 血糖异常 → Metabolic主导\n  - exercise_fear: 运动恐惧 → Coach前置 + Cardiac待命\n  - multi_morbidity: 多病共管 → 并行 + 横切\n  - stage_r",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "CollaborateRequest"
          },
          {
            "name": "orchestrator",
            "type": "AgentCollaborationOrchestrator"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/rx/compute",
        "function": "compute_rx",
        "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
        "line": 137,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rx_engine",
            "role": "custom"
          }
        ],
        "response_model": "ComputeRxResponse",
        "return_type": null,
        "docstring": "计算行为处方\n\n输入三维上下文, 输出个性化处方对象:\n  - 目标行为 + 主策略 + 辅助策略\n  - 强度 + 节奏 + 沟通风格\n  - 微行动列表 + 奖励触发器\n  - 阻力阈值 + 升级规则",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "ComputeRxRequest"
          },
          {
            "name": "engine",
            "type": "BehaviorRxEngine"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/{rx_id}",
        "function": "get_rx_detail",
        "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
        "line": 182,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "RxPrescriptionDTO",
        "return_type": null,
        "docstring": "通过 rx_id 获取处方详情",
        "is_async": true,
        "parameters": [
          {
            "name": "rx_id",
            "type": "uuid.UUID"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/strategies",
        "function": "list_strategy_templates",
        "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
        "line": 235,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_rx_engine",
            "role": "custom"
          }
        ],
        "response_model": "List[Dict[str, Any]]",
        "return_type": null,
        "docstring": "获取 12 种行为策略模板\n\n可按 domain 过滤 (general/metabolic/cardiac/adherence)",
        "is_async": true,
        "parameters": [
          {
            "name": "domain",
            "type": "Optional[str]"
          },
          {
            "name": "enabled_only",
            "type": "bool"
          },
          {
            "name": "engine",
            "type": "BehaviorRxEngine"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/rx/handoff",
        "function": "initiate_handoff",
        "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
        "line": 268,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_handoff_service",
            "role": "custom"
          }
        ],
        "response_model": "Dict[str, Any]",
        "return_type": null,
        "docstring": "发起 Agent 交接\n\n交接类型:\n  - stage_promotion: 阶段晋升交接 (Coach → 领域Agent)\n  - stage_regression: 阶段回退接管 (领域Agent → Coach)\n  - domain_coordination: 领域间协作交接\n  - cross_cutting: 横切介入 (Adherence Agent)\n  - emergency",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "HandoffRequest"
          },
          {
            "name": "service",
            "type": "AgentHandoffService"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/rx/collaborate",
        "function": "collaborate",
        "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
        "line": 328,
        "module": "rx",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          }
        ],
        "response_model": "CollaborateResponse",
        "return_type": null,
        "docstring": "4-Agent 协作编排执行\n\n自动识别场景并编排:\n  - new_user_assessment: 新用户 → Coach主导\n  - glucose_abnormal: 血糖异常 → Metabolic主导\n  - exercise_fear: 运动恐惧 → Coach前置 + Cardiac待命\n  - multi_morbidity: 多病共管 → 并行 + 横切\n  - stage_r",
        "is_async": true,
        "parameters": [
          {
            "name": "request",
            "type": "CollaborateRequest"
          },
          {
            "name": "orchestrator",
            "type": "AgentCollaborationOrchestrator"
          }
        ]
      }
    ],
    "agents": [
      {
        "method": "GET",
        "path": "/api/v1/rx/agents/status",
        "function": "get_agents_status",
        "file": "behavior_rx/rx_routes.py",
        "line": 352,
        "module": "agents",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          },
          {
            "dependency": "get_current_coach()",
            "role": "custom"
          }
        ],
        "response_model": "AgentStatusResponse",
        "return_type": null,
        "docstring": "获取 4 款专家 Agent 的注册状态",
        "is_async": true,
        "parameters": [
          {
            "name": "orchestrator",
            "type": "AgentCollaborationOrchestrator"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/agents/status",
        "function": "get_agents_status",
        "file": "behavior_rx/api/rx_routes.py",
        "line": 385,
        "module": "agents",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          }
        ],
        "response_model": "AgentStatusResponse",
        "return_type": null,
        "docstring": "获取 4 款专家 Agent 的注册状态",
        "is_async": true,
        "parameters": [
          {
            "name": "orchestrator",
            "type": "AgentCollaborationOrchestrator"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/agents/status",
        "function": "get_agents_status",
        "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
        "line": 385,
        "module": "agents",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_orchestrator",
            "role": "custom"
          }
        ],
        "response_model": "AgentStatusResponse",
        "return_type": null,
        "docstring": "获取 4 款专家 Agent 的注册状态",
        "is_async": true,
        "parameters": [
          {
            "name": "orchestrator",
            "type": "AgentCollaborationOrchestrator"
          }
        ]
      }
    ],
    "handoff": [
      {
        "method": "GET",
        "path": "/api/v1/rx/handoff/{user_id}",
        "function": "get_handoff_logs",
        "file": "behavior_rx/rx_routes.py",
        "line": 464,
        "module": "handoff",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          },
          {
            "dependency": "get_current_coach()",
            "role": "custom"
          }
        ],
        "response_model": "HandoffListResponse",
        "return_type": null,
        "docstring": "获取指定用户的 Agent 交接历史日志",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "uuid.UUID"
          },
          {
            "name": "limit",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          },
          {
            "name": "_user",
            "type": "Any"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/handoff/{user_id}",
        "function": "get_handoff_logs",
        "file": "behavior_rx/api/rx_routes.py",
        "line": 303,
        "module": "handoff",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "HandoffListResponse",
        "return_type": null,
        "docstring": "获取指定用户的 Agent 交接历史日志",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "uuid.UUID"
          },
          {
            "name": "limit",
            "type": "int"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/rx/handoff/{user_id}",
        "function": "get_handoff_logs",
        "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py",
        "line": 303,
        "module": "handoff",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": "HandoffListResponse",
        "return_type": null,
        "docstring": "获取指定用户的 Agent 交接历史日志",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "uuid.UUID"
          },
          {
            "name": "limit",
            "type": "int"
          }
        ]
      }
    ],
    "milestone_service": [
      {
        "method": "POST",
        "path": "/api/v1/incentive/checkin",
        "function": "checkin",
        "file": "core/milestone_service.py",
        "line": 471,
        "module": "milestone_service",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "每日打卡",
        "is_async": false,
        "parameters": [
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/incentive/first-login",
        "function": "first_login",
        "file": "core/milestone_service.py",
        "line": 477,
        "module": "milestone_service",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "注册后触发种子仪式",
        "is_async": false,
        "parameters": [
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/incentive/dashboard",
        "function": "dash",
        "file": "core/milestone_service.py",
        "line": 483,
        "module": "milestone_service",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "用户激励面板",
        "is_async": false,
        "parameters": [
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/incentive/badges",
        "function": "badges",
        "file": "core/milestone_service.py",
        "line": 512,
        "module": "milestone_service",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "已获徽章列表",
        "is_async": false,
        "parameters": [
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      },
      {
        "method": "GET",
        "path": "/api/v1/incentive/memorials",
        "function": "memorials",
        "file": "core/milestone_service.py",
        "line": 541,
        "module": "milestone_service",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "纪念物列表",
        "is_async": false,
        "parameters": [
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "flip-card": [
      {
        "method": "POST",
        "path": "/api/v1/incentive/flip-card/choose",
        "function": "flip",
        "file": "core/milestone_service.py",
        "line": 489,
        "module": "flip-card",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "翻牌选择",
        "is_async": false,
        "parameters": [
          {
            "name": "body",
            "type": "FlipCardChoice"
          },
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "streak": [
      {
        "method": "POST",
        "path": "/api/v1/incentive/streak/recover",
        "function": "recover",
        "file": "core/milestone_service.py",
        "line": 495,
        "module": "streak",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "断签恢复",
        "is_async": false,
        "parameters": [
          {
            "name": "body",
            "type": "StreakRecoveryReq"
          },
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "ritual": [
      {
        "method": "POST",
        "path": "/api/v1/incentive/ritual/played",
        "function": "ritual",
        "file": "core/milestone_service.py",
        "line": 501,
        "module": "ritual",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "仪式播放完成回调",
        "is_async": false,
        "parameters": [
          {
            "name": "body",
            "type": "RitualPlayed"
          },
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "badges": [
      {
        "method": "GET",
        "path": "/api/v1/incentive/badges/available",
        "function": "badges_avail",
        "file": "core/milestone_service.py",
        "line": 527,
        "module": "badges",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "所有可获徽章+进度",
        "is_async": false,
        "parameters": [
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "ceremony": [
      {
        "method": "GET",
        "path": "/api/v1/incentive/ceremony/{from_role}/{to_role}",
        "function": "ceremony_cfg",
        "file": "core/milestone_service.py",
        "line": 555,
        "module": "ceremony",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "晋级仪式配置",
        "is_async": false,
        "parameters": [
          {
            "name": "from_role",
            "type": "str"
          },
          {
            "name": "to_role",
            "type": "str"
          }
        ]
      },
      {
        "method": "POST",
        "path": "/api/v1/incentive/ceremony/{from_role}/{to_role}/complete",
        "function": "ceremony_done",
        "file": "core/milestone_service.py",
        "line": 564,
        "module": "ceremony",
        "auth_level": "custom",
        "dependencies": [
          {
            "dependency": "_uid",
            "role": "custom"
          },
          {
            "dependency": "get_db",
            "role": "database"
          }
        ],
        "response_model": null,
        "return_type": null,
        "docstring": "晋级仪式完成",
        "is_async": false,
        "parameters": [
          {
            "name": "from_role",
            "type": "str"
          },
          {
            "name": "to_role",
            "type": "str"
          },
          {
            "name": "uid",
            "type": "int"
          },
          {
            "name": "db",
            "type": "Session"
          }
        ]
      }
    ],
    "conftest": [
      {
        "method": "GET",
        "path": "/health",
        "function": "health",
        "file": "tests/conftest.py",
        "line": 92,
        "module": "conftest",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "",
        "is_async": true,
        "parameters": []
      }
    ],
    "behavioral": [
      {
        "method": "POST",
        "path": "/api/v1/behavioral/process",
        "function": "process_octopus_logic",
        "file": "xingjian-agent/api/main.py",
        "line": 141,
        "module": "behavioral",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "八爪鱼全链路干预接口：\n执行：判断 -> 专家路由 -> 任务分解 -> 效能限幅 -> 生成指令",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "str"
          },
          {
            "name": "message",
            "type": "str"
          },
          {
            "name": "wearable_data",
            "type": "Dict[str, Any]"
          }
        ]
      }
    ],
    "telemetry": [
      {
        "method": "POST",
        "path": "/api/v1/telemetry",
        "function": "ingest_telemetry",
        "file": "xingjian-agent/api/main.py",
        "line": 160,
        "module": "telemetry",
        "auth_level": "public",
        "dependencies": [],
        "response_model": null,
        "return_type": null,
        "docstring": "目标 3：模拟穿戴设备生理数据上报接口 (心率、步数、睡眠)",
        "is_async": true,
        "parameters": [
          {
            "name": "user_id",
            "type": "str"
          },
          {
            "name": "data",
            "type": "Dict[str, Any]"
          }
        ]
      }
    ]
  },
  "routers": [
    {
      "variable": "router",
      "prefix": "/v1/xxx",
      "tags": [
        "xxx"
      ],
      "file": "extract_platform_contracts_v2.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/knowledge",
      "tags": [
        "knowledge"
      ],
      "file": "fix_all_41.py"
    },
    {
      "variable": "router",
      "prefix": "/knowledge",
      "tags": [
        "knowledge"
      ],
      "file": "fix_remaining_39.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/analytics/admin",
      "tags": [
        "Admin分析"
      ],
      "file": "api/admin_analytics_api.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "agent"
      ],
      "file": "api/agent_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/agent-ecosystem",
      "tags": [
        "agent-ecosystem"
      ],
      "file": "api/agent_ecosystem_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/agent-feedback",
      "tags": [
        "agent-feedback"
      ],
      "file": "api/agent_feedback_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/agent-templates",
      "tags": [
        "Agent模板管理"
      ],
      "file": "api/agent_template_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/analytics/coach",
      "tags": [
        "Coach分析"
      ],
      "file": "api/analytics_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/assessment",
      "tags": [
        "评估"
      ],
      "file": "api/assessment_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/assessment-assignments",
      "tags": [
        "评估推送与审核"
      ],
      "file": "api/assessment_assignment_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/assessment",
      "tags": [
        "评估管道"
      ],
      "file": "api/assessment_pipeline_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/auth",
      "tags": [
        "认证"
      ],
      "file": "api/auth_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/knowledge",
      "tags": [
        "批量知识灌注"
      ],
      "file": "api/batch_ingestion_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1",
      "tags": [
        "challenges"
      ],
      "file": "api/challenge_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/chat",
      "tags": [
        "聊天"
      ],
      "file": "api/chat_rest_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/coach",
      "tags": [
        "教练端"
      ],
      "file": "api/coach_api.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "教练消息"
      ],
      "file": "api/coach_message_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/coach/push-queue",
      "tags": [
        "coach-push-queue"
      ],
      "file": "api/coach_push_queue_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/companions",
      "tags": [
        "同道者关系"
      ],
      "file": "api/companion_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/content",
      "tags": [
        "内容管理"
      ],
      "file": "api/content_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/contributions",
      "tags": [
        "contributions"
      ],
      "file": "api/content_contribution_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/content-manage",
      "tags": [
        "内容管理"
      ],
      "file": "api/content_manage_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/credits",
      "tags": [
        "学分管理"
      ],
      "file": "api/credits_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/alerts",
      "tags": [
        "设备预警"
      ],
      "file": "api/device_alert_api.py"
    },
    {
      "variable": "router",
      "prefix": "/device",
      "tags": [
        "设备数据"
      ],
      "file": "api/device_data.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1",
      "tags": [
        "Device & Health Data"
      ],
      "file": "api/device_rest_api.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [],
      "file": "api/device_trigger.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/certification/exams",
      "tags": [
        "考试管理"
      ],
      "file": "api/exam_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/certification/sessions",
      "tags": [
        "考试会话"
      ],
      "file": "api/exam_session_api.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "expert-agent"
      ],
      "file": "api/expert_agent_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/tenants/{tenant_id}/content",
      "tags": [
        "expert-content"
      ],
      "file": "api/expert_content_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/expert-registration",
      "tags": [
        "expert-registration"
      ],
      "file": "api/expert_registration_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/food",
      "tags": [
        "食物识别"
      ],
      "file": "api/food_recognition_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/high-freq-questions",
      "tags": [
        "高频题目"
      ],
      "file": "api/high_freq_api.py"
    },
    {
      "variable": "router",
      "prefix": "/knowledge",
      "tags": [
        "knowledge"
      ],
      "file": "api/knowledge.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/knowledge-sharing",
      "tags": [
        "knowledge-sharing"
      ],
      "file": "api/knowledge_sharing_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/learning",
      "tags": [
        "学习激励"
      ],
      "file": "api/learning_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/micro-actions",
      "tags": [
        "微行动"
      ],
      "file": "api/micro_action_api.py"
    },
    {
      "variable": "router",
      "prefix": "/mp",
      "tags": [
        "小程序接口"
      ],
      "file": "api/miniprogram.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/coach-levels",
      "tags": [
        "教练等级体系"
      ],
      "file": "api/paths_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/policy",
      "tags": [
        "V007 Policy Engine"
      ],
      "file": "api/policy_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/programs",
      "tags": [
        "智能监测方案"
      ],
      "file": "api/program_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/promotion",
      "tags": [
        "晋级系统"
      ],
      "file": "api/promotion_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/push-recommendations",
      "tags": [
        "AI推送建议"
      ],
      "file": "api/push_recommendation_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/certification/questions",
      "tags": [
        "题库管理"
      ],
      "file": "api/question_api.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "提醒管理"
      ],
      "file": "api/reminder_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1",
      "tags": [
        "v1"
      ],
      "file": "api/routes.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/safety",
      "tags": [
        "安全管理"
      ],
      "file": "api/safety_api.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "search"
      ],
      "file": "api/search_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/segments",
      "tags": [
        "用户分层"
      ],
      "file": "api/segments_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/surveys",
      "tags": [
        "surveys"
      ],
      "file": "api/survey_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/surveys/s",
      "tags": [
        "survey-respond"
      ],
      "file": "api/survey_response_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/surveys",
      "tags": [
        "survey-stats"
      ],
      "file": "api/survey_stats_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/tenants",
      "tags": [
        "tenants"
      ],
      "file": "api/tenant_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/upload",
      "tags": [
        "Upload"
      ],
      "file": "api/upload_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/admin",
      "tags": [
        "Admin - User Management"
      ],
      "file": "api/user_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/stats",
      "tags": [
        "用户统计"
      ],
      "file": "api/user_stats_api.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "WebSocket"
      ],
      "file": "api/websocket_api.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/assessment",
      "tags": [
        "渐进式评估"
      ],
      "file": "api/routers/assessment.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/auth",
      "tags": [
        "鉴权"
      ],
      "file": "api/routers/auth.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/chat",
      "tags": [
        "对话 & 知识"
      ],
      "file": "api/routers/chat.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/diagnostic",
      "tags": [
        "诊断管道"
      ],
      "file": "api/routers/diagnostic.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "系统"
      ],
      "file": "api/routers/health.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/incentive",
      "tags": [
        "积分激励"
      ],
      "file": "api/routers/incentive.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/admin/knowledge",
      "tags": [],
      "file": "api/routers/knowledge.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/tracking",
      "tags": [
        "效果追踪"
      ],
      "file": "api/routers/tracking.py"
    },
    {
      "variable": "router",
      "prefix": "/admin/behavior",
      "tags": [
        "admin",
        "behavior"
      ],
      "file": "api/v14/admin_routes.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "copilot"
      ],
      "file": "api/v14/copilot_routes.py"
    },
    {
      "variable": "router",
      "prefix": "/disclosure",
      "tags": [
        "disclosure"
      ],
      "file": "api/v14/disclosure_routes.py"
    },
    {
      "variable": "router",
      "prefix": "/quality",
      "tags": [
        "quality"
      ],
      "file": "api/v14/quality_routes.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "v14"
      ],
      "file": "api/v14/routes.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "knowledge"
      ],
      "file": "backend/api/knowledge.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/rx",
      "tags": [
        "Behavioral Prescription"
      ],
      "file": "behavior_rx/rx_routes.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/rx",
      "tags": [
        "Behavioral Prescription"
      ],
      "file": "behavior_rx/api/rx_routes.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1/rx",
      "tags": [
        "Behavioral Prescription"
      ],
      "file": "behavior_rx_v32_complete/behavior_rx/api/rx_routes.py"
    },
    {
      "variable": "incentive_router",
      "prefix": "/api/v1/incentive",
      "tags": [
        "incentive"
      ],
      "file": "core/milestone_service.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/assessment",
      "tags": [
        "渐进式评估"
      ],
      "file": "v3/routers/assessment.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/auth",
      "tags": [
        "鉴权"
      ],
      "file": "v3/routers/auth.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/chat",
      "tags": [
        "对话 & 知识"
      ],
      "file": "v3/routers/chat.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/diagnostic",
      "tags": [
        "诊断管道"
      ],
      "file": "v3/routers/diagnostic.py"
    },
    {
      "variable": "router",
      "prefix": "",
      "tags": [
        "系统"
      ],
      "file": "v3/routers/health.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/incentive",
      "tags": [
        "积分激励"
      ],
      "file": "v3/routers/incentive.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/admin/knowledge",
      "tags": [],
      "file": "v3/routers/knowledge.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v3/tracking",
      "tags": [
        "效果追踪"
      ],
      "file": "v3/routers/tracking.py"
    },
    {
      "variable": "router",
      "prefix": "/api/v1",
      "tags": [
        "v1"
      ],
      "file": "xingjian-agent/api/routes.py"
    }
  ],
  "summary": {
    "total_endpoints": 665,
    "total_modules": 161,
    "total_routers": 86,
    "auth_distribution": {
      "public": 165,
      "admin_only": 66,
      "authenticated": 223,
      "coach_or_admin": 96,
      "custom": 111,
      "role_required": 4
    },
    "methods_distribution": {
      "GET": 0,
      "POST": 0,
      "PUT": 0,
      "DELETE": 0,
      "PATCH": 0
    }
  }
}