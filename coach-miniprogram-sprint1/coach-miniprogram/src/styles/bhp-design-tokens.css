/**
 * BHP Design System Tokens — uni-app 适配版
 * 基于 BHP Design System V5.3.1
 * 适配说明:
 *   - color-mix() 替换为直接色值（小程序不支持）
 *   - html.dark 暗色模式 MVP 暂不实现
 *   - 所有 CSS Variables 在小程序 page {} 作用域下生效
 */

page {
  /* ─── 品牌三色 ─── */
  --bhp-primary-50:  #ecfdf5;
  --bhp-primary-100: #d1fae5;
  --bhp-primary-200: #a7f3d0;
  --bhp-primary-300: #6ee7b7;
  --bhp-primary-400: #34d399;
  --bhp-primary-500: #10b981;   /* ★ 主色 */
  --bhp-primary-600: #059669;
  --bhp-primary-700: #047857;
  --bhp-primary-800: #065f46;
  --bhp-primary-900: #064e3b;

  --bhp-warm-50:  #fffbeb;
  --bhp-warm-100: #fef3c7;
  --bhp-warm-200: #fde68a;
  --bhp-warm-300: #fcd34d;
  --bhp-warm-400: #fbbf24;
  --bhp-warm-500: #f59e0b;      /* ★ 积分/成就 */
  --bhp-warm-600: #d97706;
  --bhp-warm-700: #b45309;
  --bhp-warm-800: #92400e;
  --bhp-warm-900: #78350f;

  --bhp-accent-50:  #eff6ff;
  --bhp-accent-100: #dbeafe;
  --bhp-accent-200: #bfdbfe;
  --bhp-accent-300: #93c5fd;
  --bhp-accent-400: #60a5fa;
  --bhp-accent-500: #3b82f6;    /* ★ AI/数据 */
  --bhp-accent-600: #2563eb;
  --bhp-accent-700: #1d4ed8;
  --bhp-accent-800: #1e40af;
  --bhp-accent-900: #1e3a8a;

  /* ─── 灰度 ─── */
  --bhp-gray-50:  #f9fafb;
  --bhp-gray-100: #f3f4f6;
  --bhp-gray-200: #e5e7eb;
  --bhp-gray-300: #d1d5db;
  --bhp-gray-400: #9ca3af;
  --bhp-gray-500: #6b7280;
  --bhp-gray-600: #4b5563;
  --bhp-gray-700: #374151;
  --bhp-gray-800: #1f2937;
  --bhp-gray-900: #111827;

  /* ─── 语义色 ─── */
  --bhp-success:       #10b981;
  --bhp-success-light: #d1fae5;
  --bhp-warning:       #f59e0b;
  --bhp-warning-light: #fef3c7;
  --bhp-danger:        #ef4444;
  --bhp-danger-light:  #fee2e2;
  --bhp-info:          #3b82f6;
  --bhp-info-light:    #dbeafe;

  /* ─── 风险等级色 ─── */
  --risk-critical: #dc2626;
  --risk-high:     #f97316;
  --risk-moderate: #f59e0b;
  --risk-low:      #10b981;

  /* ─── 六级角色色（六级体系）─── */
  --level-observer:   #8c8c8c;   /* L0 观察员 — 灰 */
  --level-grower:     #52c41a;   /* L1 成长者 — 绿 */
  --level-sharer:     #1890ff;   /* L2 分享者 — 蓝 */
  --level-coach:      #722ed1;   /* L3 教练   — 紫 */
  --level-promoter:   #eb2f96;   /* L4 促进师 — 粉 */
  --level-master:     #faad14;   /* L5 大师   — 金 */

  /* ─── 行为阶段色（TTM S0-S6）─── */
  --bhp-stage-awareness: #0ea5e9;   /* S0/S1 知晓期 — 天蓝 */
  --bhp-stage-action:    #10b981;   /* S2/S3 行动期 — 翠绿 */
  --bhp-stage-stable:    #3b82f6;   /* S4/S5 稳定期 — 蓝 */
  --bhp-stage-relapse:   #f59e0b;   /* 复发/需干预 — 琥珀 */

  /* ─── 语义别名（Surface / Text / Border）─── */
  --surface:          #ffffff;
  --surface-secondary:#f9fafb;
  --text-primary:     #1f2937;
  --text-secondary:   #6b7280;
  --text-tertiary:    #9ca3af;
  --text-disabled:    #d1d5db;
  --border:           #e5e7eb;
  --border-light:     #f3f4f6;
  --divider:          #f3f4f6;
  --overlay:          rgba(0, 0, 0, 0.5);

  /* ─── 间距系统 ─── */
  --space-1:  4px;
  --space-2:  8px;
  --space-3:  12px;
  --space-4:  16px;
  --space-5:  20px;
  --space-6:  24px;
  --space-8:  32px;
  --space-10: 40px;
  --space-12: 48px;
  --space-16: 64px;

  /* ─── 圆角 ─── */
  --radius-sm:   6px;
  --radius-md:   10px;
  --radius-lg:   14px;
  --radius-xl:   18px;
  --radius-2xl:  24px;
  --radius-full: 9999px;

  /* ─── 阴影 ─── */
  --shadow-sm:   0 1px 3px rgba(0, 0, 0, 0.06);
  --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.06);
  --shadow-md:   0 4px 16px rgba(0, 0, 0, 0.08);
  --shadow-lg:   0 8px 32px rgba(0, 0, 0, 0.10);
  --shadow-green:0 4px 16px rgba(16, 185, 129, 0.25);
  --shadow-blue: 0 4px 16px rgba(59, 130, 246, 0.20);

  /* ─── 字体 ─── */
  --font-sans:    -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Helvetica Neue', sans-serif;
  --font-display: 'DIN Alternate', 'SF Pro Display', 'PingFang SC', sans-serif;
  --font-mono:    'SF Mono', 'Menlo', 'Consolas', monospace;

  --text-xs:   22rpx;   /* 11px */
  --text-sm:   24rpx;   /* 12px */
  --text-base: 28rpx;   /* 14px */
  --text-md:   30rpx;   /* 15px */
  --text-lg:   32rpx;   /* 16px */
  --text-xl:   36rpx;   /* 18px */
  --text-2xl:  40rpx;   /* 20px */
  --text-3xl:  48rpx;   /* 24px */
  --text-4xl:  56rpx;   /* 28px */
  --text-5xl:  64rpx;   /* 32px */

  /* ─── 动画 ─── */
  --duration-fast:   150ms;
  --duration-normal: 250ms;
  --duration-slow:   400ms;
  --ease-out:   cubic-bezier(0.16, 1, 0.3, 1);
  --ease-in:    cubic-bezier(0.4, 0, 1, 1);
  --ease-spring:cubic-bezier(0.34, 1.56, 0.64, 1);

  /* ─── Z轴 ─── */
  --z-base:     0;
  --z-dropdown: 100;
  --z-sticky:   200;
  --z-overlay:  300;
  --z-modal:    400;
  --z-toast:    500;
  --z-top:      9999;
}

/* ═══════════════════════════════════════
   全局重置
═══════════════════════════════════════ */
page {
  font-family: var(--font-sans);
  font-size: var(--text-base);
  color: var(--text-primary);
  background-color: var(--surface-secondary);
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
}

view, text, image, input, textarea, button {
  box-sizing: border-box;
}

/* ═══════════════════════════════════════
   卡片组件 .bhp-card
═══════════════════════════════════════ */
.bhp-card {
  background: var(--surface);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  box-shadow: var(--shadow-card);
}
.bhp-card--flat {
  box-shadow: none;
  border: 1px solid var(--border);
}
.bhp-card--hover {
  transition: box-shadow var(--duration-fast) var(--ease-out),
              transform var(--duration-fast) var(--ease-out);
}

/* ═══════════════════════════════════════
   按钮组件 .bhp-btn
═══════════════════════════════════════ */
.bhp-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-3) var(--space-5);
  border-radius: var(--radius-md);
  font-size: var(--text-md);
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}
.bhp-btn--primary {
  background: var(--bhp-primary-500);
  color: #ffffff;
  box-shadow: var(--shadow-green);
}
.bhp-btn--primary:active { opacity: 0.85; transform: scale(0.98); }
.bhp-btn--secondary {
  background: var(--bhp-gray-100);
  color: var(--text-primary);
}
.bhp-btn--outline {
  background: transparent;
  color: var(--bhp-primary-500);
  border: 1.5px solid var(--bhp-primary-500);
}
.bhp-btn--danger {
  background: var(--bhp-danger);
  color: #ffffff;
}
.bhp-btn--ghost {
  background: transparent;
  color: var(--bhp-primary-500);
}
.bhp-btn--full { width: 100%; }
.bhp-btn--sm {
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-sm);
  border-radius: var(--radius-sm);
}
.bhp-btn--lg {
  padding: var(--space-4) var(--space-6);
  font-size: var(--text-lg);
  border-radius: var(--radius-lg);
}
.bhp-btn[disabled], .bhp-btn--disabled {
  opacity: 0.4;
  pointer-events: none;
}

/* ═══════════════════════════════════════
   徽章 .bhp-badge
═══════════════════════════════════════ */
.bhp-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px var(--space-2);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: 600;
  line-height: 1.4;
}
.bhp-badge--primary  { background: var(--bhp-accent-100);  color: var(--bhp-accent-700); }
.bhp-badge--success  { background: var(--bhp-primary-100); color: var(--bhp-primary-700); }
.bhp-badge--warning  { background: var(--bhp-warm-100);    color: var(--bhp-warm-700); }
.bhp-badge--danger   { background: var(--bhp-danger-light);color: #dc2626; }
.bhp-badge--gray     { background: var(--bhp-gray-100);    color: var(--bhp-gray-600); }

/* ═══════════════════════════════════════
   风险徽章 .bhp-risk-badge
═══════════════════════════════════════ */
.bhp-risk-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px var(--space-2);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: 600;
}
.bhp-risk-badge--critical { background: #fee2e2; color: #dc2626; border: 1px solid #fca5a5; }
.bhp-risk-badge--high     { background: #fff7ed; color: #ea580c; border: 1px solid #fed7aa; }
.bhp-risk-badge--moderate { background: #fffbeb; color: #d97706; border: 1px solid #fde68a; }
.bhp-risk-badge--low      { background: #f0fdf4; color: #16a34a; border: 1px solid #bbf7d0; }
.bhp-risk-badge--none     { background: var(--bhp-gray-100); color: var(--bhp-gray-500); border: 1px solid var(--bhp-gray-200); }

/* ═══════════════════════════════════════
   进度条 .bhp-progress
═══════════════════════════════════════ */
.bhp-progress {
  height: 8px;
  background: var(--bhp-gray-200);
  border-radius: var(--radius-full);
  overflow: hidden;
  width: 100%;
}
.bhp-progress__bar {
  height: 100%;
  background: var(--bhp-primary-500);
  border-radius: var(--radius-full);
  transition: width var(--duration-slow) var(--ease-out);
}
.bhp-progress--warm .bhp-progress__bar  { background: var(--bhp-warm-500); }
.bhp-progress--accent .bhp-progress__bar{ background: var(--bhp-accent-500); }

/* ═══════════════════════════════════════
   输入框 .bhp-input
═══════════════════════════════════════ */
.bhp-input-wrap {
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: var(--radius-md);
  padding: var(--space-3) var(--space-4);
  display: flex;
  align-items: center;
  gap: var(--space-2);
  transition: border-color var(--duration-fast);
}
.bhp-input-wrap:focus-within {
  border-color: var(--bhp-primary-500);
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.12);
}
.bhp-input-wrap--error {
  border-color: var(--bhp-danger);
}
.bhp-input {
  flex: 1;
  font-size: var(--text-md);
  color: var(--text-primary);
  background: transparent;
  border: none;
  outline: none;
  padding: 0;
}
.bhp-input::placeholder { color: var(--text-tertiary); }

/* ═══════════════════════════════════════
   分割线
═══════════════════════════════════════ */
.bhp-divider {
  height: 1px;
  background: var(--divider);
  margin: var(--space-4) 0;
}
.bhp-divider--thick {
  height: 8px;
  background: var(--bhp-gray-100);
  margin: 0;
}

/* ═══════════════════════════════════════
   骨架屏
═══════════════════════════════════════ */
.bhp-skeleton {
  background: linear-gradient(
    90deg,
    var(--bhp-gray-100) 25%,
    var(--bhp-gray-200) 50%,
    var(--bhp-gray-100) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s infinite;
  border-radius: var(--radius-sm);
}
@keyframes skeleton-loading {
  0%   { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ═══════════════════════════════════════
   空状态
═══════════════════════════════════════ */
.bhp-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-12) var(--space-8);
  text-align: center;
}
.bhp-empty__icon  { font-size: 80rpx; margin-bottom: var(--space-4); }
.bhp-empty__title { font-size: var(--text-lg); color: var(--text-primary); font-weight: 600; margin-bottom: var(--space-2); }
.bhp-empty__desc  { font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6; }

/* ═══════════════════════════════════════
   通用工具类
═══════════════════════════════════════ */
.flex         { display: flex; }
.flex-col     { display: flex; flex-direction: column; }
.flex-center  { display: flex; align-items: center; justify-content: center; }
.flex-between { display: flex; align-items: center; justify-content: space-between; }
.flex-start   { display: flex; align-items: center; justify-content: flex-start; }
.flex-1       { flex: 1; }
.flex-wrap    { flex-wrap: wrap; }
.gap-1 { gap: var(--space-1); }
.gap-2 { gap: var(--space-2); }
.gap-3 { gap: var(--space-3); }
.gap-4 { gap: var(--space-4); }
.gap-6 { gap: var(--space-6); }

.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-5 { padding: var(--space-5); }
.px-4 { padding-left: var(--space-4); padding-right: var(--space-4); }
.py-3 { padding-top: var(--space-3);  padding-bottom: var(--space-3); }
.py-4 { padding-top: var(--space-4);  padding-bottom: var(--space-4); }

.mt-2 { margin-top: var(--space-2); }
.mt-3 { margin-top: var(--space-3); }
.mt-4 { margin-top: var(--space-4); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }

.text-xs      { font-size: var(--text-xs); }
.text-sm      { font-size: var(--text-sm); }
.text-base    { font-size: var(--text-base); }
.text-lg      { font-size: var(--text-lg); }
.text-xl      { font-size: var(--text-xl); }
.text-2xl     { font-size: var(--text-2xl); }
.text-3xl     { font-size: var(--text-3xl); }
.font-medium  { font-weight: 500; }
.font-semibold{ font-weight: 600; }
.font-bold    { font-weight: 700; }
.text-center  { text-align: center; }
.text-right   { text-align: right; }
.text-primary-color   { color: var(--bhp-primary-500); }
.text-secondary-color { color: var(--text-secondary); }
.text-danger-color    { color: var(--bhp-danger); }
.text-warm-color      { color: var(--bhp-warm-500); }

.w-full       { width: 100%; }
.h-full       { height: 100%; }
.rounded-sm   { border-radius: var(--radius-sm); }
.rounded      { border-radius: var(--radius-md); }
.rounded-lg   { border-radius: var(--radius-lg); }
.rounded-full { border-radius: var(--radius-full); }

.overflow-hidden { overflow: hidden; }
.line-clamp-1 {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

/* ═══════════════════════════════════════
   安全区域适配（iPhone刘海/底部）
═══════════════════════════════════════ */
.safe-area-top    { padding-top: constant(safe-area-inset-top); padding-top: env(safe-area-inset-top); }
.safe-area-bottom { padding-bottom: constant(safe-area-inset-bottom); padding-bottom: env(safe-area-inset-bottom); }
