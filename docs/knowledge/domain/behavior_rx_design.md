# 行为处方设计 · L2领域知识底座
# 知识来源：Fogg行为模型(B=MAP, 2019) + Michie行为改变技术分类(BCTTv1, 2013) + Prochaska变化过程(Processes of Change) + 平台BehaviorRx引擎设计
# 转换日期：2026-02-26 | 状态：草稿待行为医学/行为设计专家审签
# 存放路径：docs/knowledge/domain/behavior_rx_design.md

---

## 一、适用范围

- **适用Agent**：BehaviorCoachAgent（主）、MetabolicExpertAgent、CardiacExpertAgent、AdherenceExpertAgent、CoachCopilotAgent、JourneyCompanionAgent
- **适用情境**：所有需要将干预建议转化为可执行行为的场景（即L3情境包S01~S10的"落地层"）
- **核心理念**：**行为处方(BehaviorRx)是连接"知道"与"做到"的桥梁。好的行为处方不是告诉用户"应该做什么"，而是设计一个"让用户自然做到"的行为路径。**

---

## 二、行为处方基础理论

### 2.1 Fogg行为模型：B = MAP

```
行为(Behavior) = 动机(Motivation) × 能力(Ability) × 提示(Prompt)

当 M × A × P 的乘积超过"行动线"时，行为发生
三者缺一不可：
- 高动机 + 高能力 + 无提示 = 没想起来做
- 高动机 + 低能力 + 有提示 = 想做但做不到
- 低动机 + 高能力 + 有提示 = 能做但不想做
```

**Agent设计原则**：
- **降低能力门槛**(而非提高动机)是最高效的干预策略
- 当动机低时 → 让行为极其简单(微行动)
- 当能力足够时 → 确保提示到位(环境设计)
- 动机是波动的 → 不要依赖动机维持行为

### 2.2 12种标准行为改变策略（RxStrategyType）

| 策略 | 定义 | 适用TTM | 适用BPT6 |
|------|------|---------|---------|
| **consciousness_raising(意识觉醒)** | 提供信息使用户意识到问题 | S0~S1 | K(知识型) |
| **stimulus_control(刺激控制)** | 移除旧行为触发因素/添加新行为触发 | S2~S3 | V(环境型) |
| **habit_stacking(习惯叠加)** | 将新行为绑定到已有习惯之后 | S2~S3 | D(行动型) |
| **cognitive_restructuring(认知重构)** | 改变阻碍行为改变的认知信念 | S1~S3 | E(情绪型)/A(矛盾型) |
| **systematic_desensitization(系统脱敏)** | 渐进暴露减少恐惧/回避行为 | S1~S2 | E(情绪型) |
| **decisional_balance(决策平衡)** | 列出改变与不改变的利弊 | S0~S1 | A(矛盾型)/K(知识型) |
| **self_monitoring(自我监测)** | 记录行为和结果以增强觉察 | S2~S4 | K(知识型)/D(行动型) |
| **self_liberation(自我解放)** | 公开承诺+选择信念 | S2~S3 | R(关系型) |
| **contingency_management(强化管理)** | 设定奖励/后果以强化目标行为 | S3~S4 | D(行动型) |
| **relapse_prevention(复发预防)** | 识别高危情境+预设应对方案 | S4 | 全类型 |
| **social_support(社会支持)** | 动员社交圈参与行为改变 | S2~S4 | R(关系型) |
| **problem_solving(问题解决)** | 结构化解决行为障碍 | S2~S3 | K(知识型)/V(环境型) |

---

## 三、行为处方结构（RxPrescriptionDTO）

### 3.1 处方核心要素

| 要素 | 说明 | 示例 |
|------|------|------|
| **goal_behavior(目标行为)** | 可观察、可测量的具体行为 | "每天午餐先吃蔬菜" |
| **strategy_type(策略类型)** | 12种策略之一 | habit_stacking |
| **micro_actions(微行动列表)** | 将目标行为分解为极小步骤 | 见§4 |
| **intensity(强度)** | minimal/low/moderate/high | 由TTM+CAPACITY决定 |
| **communication_style(沟通风格)** | empathetic/data_driven/exploratory/directive | 由BPT6决定 |
| **barriers_addressed(应对障碍)** | 针对的具体障碍列表 | ["forgetfulness", "fear"] |
| **ttm_stage_target(目标阶段)** | 期望推进到的TTM阶段 | S2→S3 |
| **confidence(置信度)** | 0~1.0，处方匹配度 | 0.85 |

### 3.2 处方强度对应

| 强度等级 | TTM阶段 | CAPACITY分值 | 处方特征 |
|----------|---------|------------|---------|
| **minimal(极微)** | S0~S1 | <0.3 | 仅觉察任务(记录/观察) |
| **low(低)** | S1~S2 | 0.3~0.5 | 1个微行动/天，无量化要求 |
| **moderate(中)** | S2~S3 | 0.5~0.7 | 2~3个微行动/天，有基础量化 |
| **high(高)** | S3~S4 | >0.7 | 结构化行为计划，多维度协同 |

---

## 四、微行动设计（MicroAction）—— 行为处方的最小执行单元

### 4.1 微行动五要素

| 要素 | 定义 | 设计原则 |
|------|------|---------|
| **action(行动)** | 具体做什么 | 用动词开头，≤10个字 |
| **trigger(触发器)** | 什么时候/什么情境做 | 绑定已有习惯或固定时间点 |
| **reward(即时奖励)** | 做完后的正反馈 | 即时+内在(非物质) |
| **difficulty(难度)** | 1~5星(1=极简,5=挑战) | 起始处方≤2星 |
| **duration_min(时长)** | 所需时间(分钟) | 起始处方≤5分钟 |

### 4.2 微行动设计的TINY原则

| 原则 | 含义 | 示例(好) | 反例(差) |
|------|------|---------|---------|
| **T(Tiny-极小)** | 小到不可能失败 | "喝一口水" | "每天喝8杯水" |
| **I(Immediate-即时)** | 做完立刻有感觉 | "做3个深呼吸→感觉肩膀松了" | "坚持运动3个月会变好" |
| **N(Natural-自然)** | 嵌入已有行为流 | "刷牙后做5个深蹲" | "每天下午3点做运动" |
| **Y(Yours-你的)** | 用户自选或参与设计 | "你觉得饭后散步还是走楼梯？" | "你必须每天走10000步" |

### 4.3 各领域微行动示例库

| 领域 | 微行动 | 触发器 | 难度 | 时长 |
|------|--------|--------|------|------|
| **血糖** | 先吃一口蔬菜 | 端起碗/打开外卖 | ⭐ | 0min |
| **血糖** | 餐后站起来走一圈 | 放下筷子时 | ⭐ | 2min |
| **运动** | 站起来伸个懒腰 | 每次上厕所回来 | ⭐ | 1min |
| **运动** | 走楼梯上一层 | 到达电梯口时 | ⭐⭐ | 2min |
| **睡眠** | 手机放到卧室外 | 刷牙时 | ⭐⭐ | 0min |
| **睡眠** | 做3次4-7-8呼吸 | 躺下后 | ⭐ | 2min |
| **饮食** | 拍一张午餐照片 | 开始吃饭前 | ⭐ | 0.5min |
| **压力** | 做一次生理叹息 | 感到紧张时 | ⭐ | 0.5min |
| **用药** | 把药放在牙刷旁边 | 今晚睡前(一次性) | ⭐ | 1min |
| **社交** | 告诉一个人今天的小进步 | 下班回家后 | ⭐⭐ | 2min |

---

## 五、处方剂量递增模型

### 5.1 递增阶梯

```
Week 1-2: 1个微行动(⭐) → 建立"行为锚点"
    ↓ 完成率>80%
Week 3-4: 2个微行动(⭐~⭐⭐) → 扩展行为链
    ↓ 完成率>70%
Week 5-8: 3个微行动(⭐⭐~⭐⭐⭐) → 建立行为习惯
    ↓ 完成率>70%
Week 9-12: 整合为完整行为模式 → 减少外部提醒
    ↓ 自动化(无需提醒仍执行)
Month 4+: 维持模式 → Agent退为监测角色
```

### 5.2 递增/降级规则

| 条件 | 动作 | Agent话术 |
|------|------|----------|
| 完成率>80%×2周 | 提升一级(加行动/升难度) | "做得很好！准备好接受一个小挑战吗？" |
| 完成率60~80% | 维持当前方案 | "继续保持这个节奏，很稳" |
| 完成率40~60% | 降难度不降量 | "我们让这个动作更简单一点" |
| 完成率<40%×2周 | 降级(减行动/降难度) | "没关系，我们找一个更适合你的起点" |
| 完成率=0%×1周 | 暂停处方→回溯BFR | "这个方案可能不太适合，我们聊聊？" |

---

## 六、TTM阶段 × 处方策略矩阵

| TTM阶段 | 首选策略 | 处方特征 | 禁忌策略 |
|---------|---------|---------|---------|
| S0 | consciousness_raising + decisional_balance | 仅觉察(观察自己的行为) | contingency_management(无内在动机不要用奖惩) |
| S1 | cognitive_restructuring + decisional_balance | 认知层干预(改变想法) | habit_stacking(还没准备好执行) |
| S2 | stimulus_control + habit_stacking + problem_solving | 设计行为(低门槛) | 高强度目标(失败→退回S1) |
| S3 | self_monitoring + contingency_management + social_support | 执行+反馈+强化 | 全新策略(已有方案别全换) |
| S4 | relapse_prevention + self_liberation | 维持+预防+身份化 | 过度监控(Agent依赖) |
| S5 | →参考 `ttm_relapse_protocol.md` | 降级重启 | 恢复原方案(需重设) |

---

## 七、BPT6 × 处方沟通风格适配

| BPT6类型 | communication_style | 处方呈现方式 | Agent话术风格 |
|----------|-------------------|-------------|-------------|
| **行动型(D)** | directive | 清单式："1.做X 2.做Y 3.记录" | 简洁+结果导向+"试试这个" |
| **知识型(K)** | data_driven | 科学解释+数据佐证+"因为...所以..." | 先说"为什么"再说"怎么做" |
| **情绪型(E)** | empathetic | 故事化+情感连接+"很多人也..." | 先共情→再建议→用"我们"而非"你" |
| **关系型(R)** | collaborative | 对话式+社交嵌入+"和XX一起..." | 强调社交支持+同伴力量 |
| **环境型(V)** | exploratory | 环境改造清单+视觉化 | 先改环境再改行为+"把X放到Y位置" |
| **矛盾型(A)** | exploratory | 选择式+"A或B你觉得？" | 不催促+给空间+尊重犹豫 |

---

## 八、SMART目标公式（处方目标设计工具）

### 8.1 SMART标准

| 维度 | 定义 | 好的目标 | 差的目标 |
|------|------|---------|---------|
| **S(Specific)** | 具体到行为 | "午餐先吃蔬菜" | "吃健康一点" |
| **M(Measurable)** | 可测量 | "每天走5000步" | "多走走" |
| **A(Achievable)** | 可达成 | "这周3天走楼梯" | "每天跑10公里" |
| **R(Relevant)** | 与核心目标相关 | "控碳→降餐后血糖" | "学书法(无关代谢)" |
| **T(Time-bound)** | 有时间边界 | "本周一到周五" | "以后" |

### 8.2 SMART目标生成模板

```
[时间范围]内，[频率]地做[具体行为]，[量化指标]
```

**示例**：
- "这周(一~五)，每天午餐先吃一口蔬菜（5天中至少做到3天）"
- "接下来2周，每天22:30前手机放到客厅（14天中至少做到10天）"

> **"至少做到X天"** 是关键设计——给予弹性空间，避免一次失误导致目标崩塌

---

## 九、行为处方 × 干预包映射

> **干预包(Intervention Package)** 是预定义的策略组合模板，由BehaviorRxEngine根据用户画像自动匹配。

| 干预包编号 | 名称 | 核心策略组合 | 适用场景 |
|-----------|------|------------|---------|
| IP-01 | 血糖友好饮食启动包 | consciousness_raising + stimulus_control + habit_stacking | 新诊断T2DM/糖前 |
| IP-02 | 运动习惯建立包 | habit_stacking + systematic_desensitization + self_monitoring | 久坐人群/运动恐惧 |
| IP-03 | 情绪进食干预包 | cognitive_restructuring + stimulus_control + social_support | S01情绪进食 |
| IP-04 | 睡眠优化包 | stimulus_control + habit_stacking + cognitive_restructuring | 失眠/熬夜 |
| IP-05 | 用药依从性包 | habit_stacking + stimulus_control + contingency_management | 漏服/忘服 |
| IP-06 | 社交饮食应对包 | problem_solving + self_liberation + social_support | S07社交应酬 |
| IP-07 | 压力管理包 | cognitive_restructuring + systematic_desensitization + self_monitoring | 高PSS/低HRV |
| IP-08 | 体重管理综合包 | self_monitoring + stimulus_control + habit_stacking + contingency_management | BMI≥24 |
| IP-09 | 心脏康复行为包 | systematic_desensitization + habit_stacking + self_monitoring | PCI/CABG术后 |
| IP-10 | 视力保护行为包 | habit_stacking + stimulus_control + contingency_management | 近视防控 |

---

## 十、处方效果评估（闭环反馈）

### 10.1 处方效果指标

| 指标 | 数据源 | 评估周期 | 合格线 |
|------|--------|---------|--------|
| **行为完成率** | 打卡/行为日志 | 每周 | >60% |
| **代谢指标变化** | 设备数据/体检 | 每月 | 趋势改善 |
| **自我效能感** | SPI评估/对话分析 | 每月 | 提升或稳定 |
| **TTM阶段跃迁** | TTM7评估 | 每季度 | 前进≥1阶段 |
| **Agency变化** | Trust Score | 持续 | 稳步提升 |

### 10.2 处方调整决策树

```
处方执行2周后评估
    ↓
├── 完成率≥80% + 指标改善 → 递增方案(§5.1)
├── 完成率60~80% + 指标稳定 → 维持方案
├── 完成率40~60% → 降低难度/减少行动数
├── 完成率<40% → BFR回溯→找障碍→重设处方
└── 完成率=0% → 暂停处方→评估动机→可能回退TTM
```

---

## 十一、冰山模型（BehaviorRx核心设计哲学）

```
┌──────────── 水面上(用户可见) ────────────┐
│  "这周试试餐前先吃蔬菜"                    │
│  "不错！你的餐后血糖比上周好了"              │
│  → 看起来是营养建议 + 数据反馈              │
└─────────────────────────────────────────┘
┌──────────── 水面下(系统运行) ────────────┐
│  策略: habit_stacking (午餐→蔬菜先)       │
│  强度: low (基于TTM=S2, CAPACITY=0.45)    │
│  风格: empathetic (基于BPT6=情绪型)       │
│  目标: S2→S3 阶段跃迁                     │
│  监测: 完成率>60%→2周后加第二个微行动      │
│  预案: 失误→AVE打断话术(非追责)            │
│  → 实质是行为处方引擎的系统化干预           │
└─────────────────────────────────────────┘
```

> **铁律**：用户永远看到的是"友好的建议"，不是"行为处方"。Agent不向用户暴露处方引擎的存在。教练可见完整处方逻辑。

---

## 十二、Agent调用指南

### 调用入口
当以下场景需要将知识转化为行动时调用本知识：
- **处方生成**：任何Agent需要给用户具体行为建议时
- **处方评估**：行为完成率数据更新时
- **处方调整**：用户反馈困难/失误/复发时
- **干预包匹配**：新用户完成评估后自动匹配

### 调用路径
1. 获取RxContext(TTM/BPT6/CAPACITY/SPI/代谢数据)
2. 确定策略类型(12种) → §2.2
3. 设计微行动(TINY原则) → §4
4. 确定强度+沟通风格 → §3.2 + §7
5. 设定SMART目标 → §8
6. 执行 → 递增/降级 → §5
7. 效果评估 → §10

### 禁止行为
- ❌ 一次处方包含>3个微行动(认知过载)
- ❌ 起始难度>⭐⭐(失败率高→自我效能崩塌)
- ❌ 向用户暴露处方引擎/策略名称("你需要habit_stacking")
- ❌ 在动机低时依赖奖惩(contingency_management)(无内在动机，外在奖励无效)
- ❌ 在S0/S1阶段设定行为目标(先觉察，后行动)
- ❌ 所有用户用同一套处方模板(必须个性化)

---

## 十三、交叉参照

| 联动文件 | 联动场景 |
|----------|---------|
| `base/ttm_stages.md` | TTM阶段决定处方强度和策略选择 |
| `base/bpt6_dimensions.md` | BPT6决定沟通风格和微行动设计偏好 |
| `base/bfr_framework.md` | BFR回溯识别行为障碍→处方针对障碍 |
| `base/mi_interview_framework.md` | MI技术在处方推介过程中的应用 |
| `base/ttm_relapse_protocol.md` | 处方失败→复发预防→降级重设 |
| `base/agency_trust_model.md` | Agency模式决定处方介入深度 |
| `domain/baps_assessment_system.md` | CAPACITY/SPI评估→处方强度输入 |
| `domain/metabolic_biomarkers.md` | 代谢指标→处方效果的客观评估 |
| `dietary_s01~s10` | 情境包提供具体场景→处方落地 |

---

## 十四、审签记录

| 版本 | 日期 | 审签人 | 变更 |
|------|------|--------|------|
| V1.0-draft | 2026-02-26 | AI生成 | 初始版本：Fogg B=MAP + 12策略 + RxDTO结构 + 微行动TINY设计 + 剂量递增 + 冰山模型 + 10干预包 |
| — | 待定 | 行为医学/行为设计专家 | 待审签 |
