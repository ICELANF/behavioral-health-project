<template>
  <div class="component-showcase">
    <!-- å¯¼èˆªæ  -->
    <div class="showcase-header">
      <div class="header-back" @click="goBack">
        <LeftOutlined />
      </div>
      <h1 class="header-title">å¥åº·ç»„ä»¶åº“å±•ç¤º</h1>
      <div class="header-right"></div>
    </div>

    <!-- ç»„ä»¶å±•ç¤ºåŒº -->
    <div class="showcase-content">
      <!-- 1. HealthScoreCircle -->
      <section class="component-section">
        <h2 class="section-title">1. HealthScoreCircle - å¥åº·è¯„åˆ†åœ†ç¯</h2>
        <div class="component-demo">
          <div class="demo-grid">
            <HealthScoreCircle
              :score="90"
              :size="120"
              status-text="çŠ¶æ€éå¸¸å¥½ï¼"
              subtitle="ğŸ”¥ è¿ç»­æ‰“å¡ 14 å¤©"
            />
            <HealthScoreCircle
              :score="75"
              :size="120"
              status-text="ä¿æŒå¾—ä¸é”™"
              subtitle="ç»§ç»­åŠ æ²¹"
            />
            <HealthScoreCircle
              :score="55"
              :size="120"
              status-text="ç»§ç»­åŠ æ²¹"
              subtitle="è·ç¦»ç›®æ ‡è¶Šæ¥è¶Šè¿‘"
            />
            <HealthScoreCircle
              :score="35"
              :size="120"
              status-text="éœ€è¦æ›´å¤šå…³æ³¨"
              subtitle="æ¯å¤©åšæŒå°±æœ‰æ”¶è·"
            />
          </div>
        </div>
        <div class="code-example">
          <pre><code>&lt;HealthScoreCircle
  :score="82"
  :size="140"
  status-text="ä¿æŒå¾—ä¸é”™"
  subtitle="ğŸ”¥ è¿ç»­æ‰“å¡ 7 å¤©"
/&gt;</code></pre>
        </div>
      </section>

      <!-- 2. TaskList -->
      <section class="component-section">
        <h2 class="section-title">2. TaskList - ä»»åŠ¡åˆ—è¡¨</h2>
        <div class="component-demo">
          <TaskList
            :tasks="demoTasks"
            title="âœ¨ ä»Šå¤©è¦åšçš„äº‹"
            :show-progress="true"
            :show-encouragement="true"
            @toggle="handleTaskToggle"
          />
        </div>
        <div class="code-example">
          <pre><code>&lt;TaskList
  :tasks="tasks"
  title="âœ¨ ä»Šå¤©è¦åšçš„äº‹"
  :show-progress="true"
  @toggle="handleToggle"
/&gt;</code></pre>
        </div>
      </section>

      <!-- 3. HealthMetricCard -->
      <section class="component-section">
        <h2 class="section-title">3. HealthMetricCard - å¥åº·æŒ‡æ ‡å¡ç‰‡</h2>
        <div class="component-demo">
          <div class="metrics-grid">
            <HealthMetricCard
              icon="ğŸ©¸"
              label="è¡€ç³–"
              value="6.5"
              status="good"
              status-text="æ­£å¸¸"
              trend="â†“ 0.3"
              theme="glucose"
            />
            <HealthMetricCard
              icon="âš–ï¸"
              label="ä½“é‡"
              value="72.5"
              status="good"
              trend="â†“ 0.5kg"
              theme="weight"
            />
            <HealthMetricCard
              icon="ğŸƒ"
              label="è¿åŠ¨"
              value="120"
              :progress="80"
              progress-text="æœ¬å‘¨ç›®æ ‡ 150 åˆ†é’Ÿ"
              :show-progress="true"
              theme="exercise"
            />
            <HealthMetricCard
              icon="ğŸ’Š"
              label="ç”¨è¯"
              value="2/3"
              badge="å·²æœç”¨"
              theme="medication"
            />
          </div>
        </div>
        <div class="code-example">
          <pre><code>&lt;HealthMetricCard
  icon="ğŸ©¸"
  label="è¡€ç³–"
  value="6.5"
  status="good"
  status-text="æ­£å¸¸"
  trend="â†“ 0.3"
  theme="glucose"
/&gt;</code></pre>
        </div>
      </section>

      <!-- 4. TrendChart - æŠ˜çº¿å›¾ -->
      <section class="component-section">
        <h2 class="section-title">4. TrendChart - è¶‹åŠ¿å›¾è¡¨ï¼ˆæŠ˜çº¿å›¾ï¼‰</h2>
        <div class="component-demo">
          <TrendChart
            type="line"
            :data="glucoseData"
            :labels="weekLabels"
            title="è¡€ç³–è¶‹åŠ¿"
            subtitle="è¿‘7å¤©"
            icon="ğŸ©¸"
            line-color="#ef4444"
            :show-area="true"
            :show-dots="true"
            :show-stats="true"
            trend-text="å¹³ç¨³ä¸‹é™"
            trend-direction="down"
          />
        </div>
        <div class="code-example">
          <pre><code>&lt;TrendChart
  type="line"
  :data="[6.8, 6.5, 6.3, 6.7, 6.4, 6.2, 6.5]"
  :labels="['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥']"
  title="è¡€ç³–è¶‹åŠ¿"
  icon="ğŸ©¸"
  line-color="#ef4444"
/&gt;</code></pre>
        </div>
      </section>

      <!-- 5. TrendChart - æŸ±çŠ¶å›¾ -->
      <section class="component-section">
        <h2 class="section-title">5. TrendChart - è¶‹åŠ¿å›¾è¡¨ï¼ˆæŸ±çŠ¶å›¾ï¼‰</h2>
        <div class="component-demo">
          <TrendChart
            type="bar"
            :data="exerciseData"
            :labels="weekLabels"
            title="æ¯æ—¥è¿åŠ¨"
            subtitle="åˆ†é’Ÿæ•°"
            icon="ğŸƒ"
            bar-color="#10b981"
            :show-values="true"
            :show-stats="true"
            trend-text="è¿åŠ¨é‡ç¨³æ­¥æå‡"
            trend-direction="up"
          />
        </div>
        <div class="code-example">
          <pre><code>&lt;TrendChart
  type="bar"
  :data="[30, 25, 35, 20, 30, 40, 0]"
  :labels="['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥']"
  title="æ¯æ—¥è¿åŠ¨"
  icon="ğŸƒ"
  bar-color="#10b981"
/&gt;</code></pre>
        </div>
      </section>

      <!-- 6. AchievementBadge -->
      <section class="component-section">
        <h2 class="section-title">6. AchievementBadge - æˆå°±å¾½ç« </h2>
        <div class="component-demo">
          <div class="badges-grid">
            <AchievementBadge
              icon="ğŸ…"
              name="7å¤©æ‰“å¡"
              description="è¿ç»­è®°å½•æ•°æ®7å¤©"
              :unlocked="true"
              unlocked-date="2026-01-20"
            />
            <AchievementBadge
              icon="ğŸ¯"
              name="è¡€ç³–è¾¾æ ‡"
              description="è¿ç»­7å¤©è¡€ç³–æ­£å¸¸"
              :unlocked="true"
              unlocked-date="2026-01-25"
            />
            <AchievementBadge
              icon="ğŸ’ª"
              name="è¿åŠ¨å¥å°†"
              description="å•å‘¨è¿åŠ¨è¶…150åˆ†é’Ÿ"
              :unlocked="false"
              :progress="78"
            />
            <AchievementBadge
              icon="â­"
              name="å‡é‡æˆåŠŸ"
              description="æˆåŠŸå‡é‡5kg"
              :unlocked="false"
              :progress="45"
            />
          </div>
        </div>
        <div class="code-example">
          <pre><code>&lt;AchievementBadge
  icon="ğŸ…"
  name="7å¤©æ‰“å¡"
  description="è¿ç»­è®°å½•æ•°æ®7å¤©"
  :unlocked="true"
  unlocked-date="2026-01-20"
/&gt;</code></pre>
        </div>
      </section>

      <!-- 7. BigNumberInput -->
      <section class="component-section">
        <h2 class="section-title">7. BigNumberInput - å¤§å·æ•°å­—è¾“å…¥</h2>
        <div class="component-demo">
          <BigNumberInput
            v-model="glucoseInput"
            label="è¡€ç³–å€¼"
            subtitle="è¾“å…¥æ‚¨çš„è¡€ç³–æµ‹é‡ç»“æœ"
            icon="ğŸ©¸"
            unit="mmol/L"
            :step="0.1"
            :hint="`æ‚¨è¿‘7å¤©çš„å¹³å‡å€¼æ˜¯ <strong>6.5</strong> mmol/L`"
            :historical-value="6.8"
            :quick-values="[5.0, 5.5, 6.0, 6.5, 7.0]"
          />
        </div>
        <div class="code-example">
          <pre><code>&lt;BigNumberInput
  v-model="glucoseValue"
  label="è¡€ç³–å€¼"
  icon="ğŸ©¸"
  unit="mmol/L"
  :step="0.1"
  :hint="\`æ‚¨è¿‘7å¤©çš„å¹³å‡å€¼æ˜¯ &lt;strong&gt;${average}&lt;/strong&gt; mmol/L\`"
  :historical-value="6.5"
/&gt;</code></pre>
        </div>
      </section>

      <!-- å°ºå¯¸å¯¹æ¯” -->
      <section class="component-section">
        <h2 class="section-title">8. å°ºå¯¸å¯¹æ¯”</h2>
        <div class="component-demo">
          <h3 class="demo-subtitle">HealthScoreCircle å°ºå¯¸</h3>
          <div class="size-demo">
            <HealthScoreCircle :score="82" :size="80" label="å°" />
            <HealthScoreCircle :score="82" :size="120" label="ä¸­" />
            <HealthScoreCircle :score="82" :size="160" label="å¤§" />
          </div>

          <h3 class="demo-subtitle">AchievementBadge å°ºå¯¸</h3>
          <div class="size-demo">
            <AchievementBadge
              icon="ğŸ…"
              name="å°å¾½ç« "
              :unlocked="true"
              size="small"
            />
            <AchievementBadge
              icon="ğŸ…"
              name="ä¸­å¾½ç« "
              :unlocked="true"
              size="medium"
            />
            <AchievementBadge
              icon="ğŸ…"
              name="å¤§å¾½ç« "
              :unlocked="true"
              size="large"
            />
          </div>
        </div>
      </section>

      <!-- ä¸»é¢˜å¯¹æ¯” -->
      <section class="component-section">
        <h2 class="section-title">9. ä¸»é¢˜å¯¹æ¯”</h2>
        <div class="component-demo">
          <div class="metrics-grid">
            <HealthMetricCard icon="ğŸ©¸" label="è¡€ç³–" value="6.5" theme="glucose" />
            <HealthMetricCard icon="âš–ï¸" label="ä½“é‡" value="72" theme="weight" />
            <HealthMetricCard icon="ğŸƒ" label="è¿åŠ¨" value="30" theme="exercise" />
            <HealthMetricCard icon="ğŸ’Š" label="ç”¨è¯" value="3" theme="medication" />
            <HealthMetricCard icon="ğŸ’“" label="è¡€å‹" value="120" theme="bp" />
            <HealthMetricCard icon="ğŸ˜Š" label="å¿ƒæƒ…" value="4.5" theme="mood" />
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { useRouter } from 'vue-router'
import { LeftOutlined } from '@ant-design/icons-vue'
import {
  HealthScoreCircle,
  TaskList,
  HealthMetricCard,
  TrendChart,
  AchievementBadge,
  BigNumberInput
} from '@/components/health'
import type { Task } from '@/components/health'

const router = useRouter()

const goBack = () => {
  router.back()
}

// ç¤ºä¾‹æ•°æ®
const demoTasks = ref<Task[]>([
  { id: 1, name: 'æ—©é¤åæµ‹è¡€ç³–', hint: 'å»ºè®®åœ¨é¤å2å°æ—¶æµ‹é‡', emoji: 'ğŸ©¸', completed: false },
  { id: 2, name: 'æ­¥è¡Œ30åˆ†é’Ÿ', hint: 'å¯ä»¥åˆ†æˆä¸¤æ¬¡å®Œæˆ', emoji: 'ğŸš¶', completed: false },
  { id: 3, name: 'æ™šä¸Š8ç‚¹ç”¨è¯', hint: 'è®°å¾—é¥­åæœç”¨', emoji: 'ğŸ’Š', completed: true }
])

const glucoseData = [6.8, 6.5, 6.3, 6.7, 6.4, 6.2, 6.5]
const exerciseData = [30, 25, 35, 20, 30, 40, 0]
const weekLabels = ['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥']

const glucoseInput = ref('6.5')

const handleTaskToggle = (task: Task) => {
  task.completed = !task.completed
}
</script>

<style scoped>
.component-showcase {
  min-height: 100vh;
  background: #f5f7fa;
  padding-bottom: 40px;
}

/* å¯¼èˆªæ  */
.showcase-header {
  background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
  padding: 16px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  color: #fff;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.header-back {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-radius: 50%;
  transition: background 0.2s;
}

.header-back:hover {
  background: rgba(255, 255, 255, 0.2);
}

.header-title {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
}

.header-right {
  width: 40px;
}

/* å†…å®¹åŒº */
.showcase-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 24px 16px;
}

.component-section {
  background: #fff;
  border-radius: 20px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.section-title {
  font-size: 20px;
  font-weight: 700;
  color: #1f2937;
  margin: 0 0 20px 0;
  padding-bottom: 12px;
  border-bottom: 2px solid #e5e7eb;
}

.demo-subtitle {
  font-size: 16px;
  font-weight: 600;
  color: #4b5563;
  margin: 24px 0 16px 0;
}

.component-demo {
  margin-bottom: 20px;
}

/* ç½‘æ ¼å¸ƒå±€ */
.demo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 20px;
  justify-items: center;
}

.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 16px;
}

.badges-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 16px;
}

.size-demo {
  display: flex;
  gap: 32px;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
}

/* ä»£ç ç¤ºä¾‹ */
.code-example {
  background: #1f2937;
  border-radius: 12px;
  padding: 16px;
  overflow-x: auto;
}

.code-example pre {
  margin: 0;
}

.code-example code {
  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
  font-size: 13px;
  line-height: 1.6;
  color: #10b981;
}

/* å“åº”å¼ */
@media (max-width: 768px) {
  .demo-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .metrics-grid,
  .badges-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .size-demo {
    gap: 20px;
  }
}
</style>
