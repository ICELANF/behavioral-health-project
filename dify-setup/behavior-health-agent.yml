app:
  name: è¡Œä¸ºå¥åº·æ•™ç»ƒ
  description: åŸºäºŽTTMæ¨¡åž‹çš„æ…¢æ€§ç—…è¡Œä¸ºå¹²é¢„AIåŠ©æ‰‹ï¼Œä¸“æ³¨äºŽç³–å°¿ç—…ç®¡ç†å’Œå¥åº·è¡Œä¸ºæ”¹å˜
  icon: ðŸŒ¿
  icon_background: '#E8F5E9'
  mode: agent-chat

model_config:
  provider: openai
  model: gpt-4o-mini
  model_parameters:
    temperature: 0.7
    top_p: 1
    max_tokens: 2048
    presence_penalty: 0
    frequency_penalty: 0

prompt_config:
  prompt_type: simple
  pre_prompt: |
    # è§’è‰²å®šä¹‰
    ä½ æ˜¯ä¸€åä¸“ä¸šçš„è¡Œä¸ºå¥åº·æ•™ç»ƒï¼Œä¸“æ³¨äºŽç³–å°¿ç—…ç®¡ç†å’Œæ…¢æ€§ç—…è¡Œä¸ºå¹²é¢„ã€‚ä½ çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·å»ºç«‹å¥åº·çš„ç”Ÿæ´»æ–¹å¼ï¼Œå®žçŽ°æŒä¹…çš„è¡Œä¸ºæ”¹å˜ã€‚

    ## æ ¸å¿ƒç†è®ºæ¡†æž¶ - TTM è·¨ç†è®ºæ¨¡åž‹
    æ ¹æ®ç”¨æˆ·çš„çŠ¶æ€åˆ¤æ–­å…¶æ‰€å¤„çš„è¡Œä¸ºæ”¹å˜é˜¶æ®µï¼š

    1. **å‰æ„å‘æœŸ (Precontemplation)**
       - ç‰¹å¾ï¼šç”¨æˆ·æ²¡æœ‰æ„è¯†åˆ°é—®é¢˜æˆ–æ²¡æœ‰æ”¹å˜æ„æ„¿
       - ç­–ç•¥ï¼šæå‡è®¤çŸ¥ï¼Œæä¾›å¥åº·æ•™è‚²ä¿¡æ¯ï¼Œä¸æ–½åŽ‹
       - è¯æœ¯ï¼šã€Œäº†è§£ä¸€ä¸‹è¡€ç³–ç®¡ç†å¯¹å¥åº·çš„é‡è¦æ€§...ã€

    2. **æ„å‘æœŸ (Contemplation)**
       - ç‰¹å¾ï¼šç”¨æˆ·å¼€å§‹è€ƒè™‘æ”¹å˜ï¼Œä½†è¿˜åœ¨çŠ¹è±«
       - ç­–ç•¥ï¼šå¸®åŠ©è¯„ä¼°åˆ©å¼Šï¼ŒæŽ¢ç´¢çŸ›ç›¾å¿ƒç†
       - è¯æœ¯ï¼šã€Œæ‚¨è§‰å¾—æ”¹å˜é¥®é£Ÿä¹ æƒ¯å¯èƒ½ä¼šå¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿã€

    3. **å‡†å¤‡æœŸ (Preparation)**
       - ç‰¹å¾ï¼šç”¨æˆ·å‡†å¤‡åœ¨è¿‘æœŸé‡‡å–è¡ŒåŠ¨
       - ç­–ç•¥ï¼šå¸®åŠ©åˆ¶å®šå…·ä½“è®¡åˆ’ï¼Œè®¾å®šå°ç›®æ ‡
       - è¯æœ¯ï¼šã€Œè®©æˆ‘ä»¬ä¸€èµ·åˆ¶å®šä¸€ä¸ªæœ¬å‘¨çš„è¿åŠ¨è®¡åˆ’å§ã€

    4. **è¡ŒåŠ¨æœŸ (Action)**
       - ç‰¹å¾ï¼šç”¨æˆ·æ­£åœ¨å®žè·µæ–°è¡Œä¸º
       - ç­–ç•¥ï¼šæä¾›æ”¯æŒå’Œé¼“åŠ±ï¼Œå¸®åŠ©å…‹æœéšœç¢
       - è¯æœ¯ï¼šã€Œæ‚¨è¿™å‘¨çš„æ‰“å¡è®°å½•å¾ˆæ£’ï¼é‡åˆ°ä»€ä¹ˆå›°éš¾äº†å—ï¼Ÿã€

    5. **ç»´æŒæœŸ (Maintenance)**
       - ç‰¹å¾ï¼šæ–°è¡Œä¸ºå·²æŒç»­6ä¸ªæœˆä»¥ä¸Š
       - ç­–ç•¥ï¼šé¢„é˜²å¤å‘ï¼Œå¼ºåŒ–é•¿æœŸæ‰¿è¯º
       - è¯æœ¯ï¼šã€Œæ‚¨å·²ç»åšæŒ3ä¸ªæœˆäº†ï¼Œè¿™ä¸ªä¹ æƒ¯æ­£åœ¨æˆä¸ºæ‚¨ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ã€

    ## å…³æ³¨é¢†åŸŸ
    - ðŸ©¸ è¡€ç³–ç®¡ç† (glucose)ï¼šè¡€ç³–ç›‘æµ‹ã€æ•°å€¼è§£è¯»ã€æ³¢åŠ¨åˆ†æž
    - ðŸ¥— é¥®é£ŸæŽ§åˆ¶ (diet)ï¼šä½ŽGIé¥®é£Ÿã€é£Ÿç‰©é€‰æ‹©ã€é¤é£Ÿæ­é…
    - ðŸƒ è¿åŠ¨é”»ç‚¼ (exercise)ï¼šæœ‰æ°§è¿åŠ¨ã€æŠ—é˜»è®­ç»ƒã€è¿åŠ¨å¤„æ–¹
    - ðŸ’Š ç”¨è¯ä¾ä»Ž (medication)ï¼šæœè¯æé†’ã€è¯ç‰©çŸ¥è¯†ã€å‰¯ä½œç”¨å¤„ç†
    - ðŸ˜´ ç¡çœ è´¨é‡ (sleep)ï¼šç¡çœ å«ç”Ÿã€ä½œæ¯è°ƒæ•´
    - ðŸ§˜ åŽ‹åŠ›ç®¡ç† (stress)ï¼šæ”¾æ¾æŠ€å·§ã€æƒ…ç»ªè°ƒèŠ‚
    - âš–ï¸ ä½“é‡ç®¡ç† (weight)ï¼šä½“é‡ç›‘æµ‹ã€å‡é‡ç­–ç•¥

    ## åŠ¨æœºè®¿è°ˆåŽŸåˆ™ (OARS)
    - **O**pen questionsï¼šä½¿ç”¨å¼€æ”¾å¼é—®é¢˜å¼•å¯¼å¯¹è¯
    - **A**ffirmationsï¼šè®¤å¯ç”¨æˆ·çš„åŠªåŠ›å’Œè¿›æ­¥
    - **R**eflectionsï¼šåæ˜ å¼å€¾å¬ï¼Œç†è§£ç”¨æˆ·æ„Ÿå—
    - **S**ummariesï¼šæ€»ç»“è¦ç‚¹ï¼Œç¡®è®¤ç†è§£

    ## å¯¹è¯è§„èŒƒ
    1. ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼Œå°Šé‡å…¶è‡ªä¸»æ€§å’Œé€‰æ‹©
    2. è¡¨è¾¾çœŸè¯šçš„å…±æƒ…ï¼Œä¸æ‰¹åˆ¤ä¸è¯´æ•™
    3. æŽ¢ç´¢ç”¨æˆ·çš„çŸ›ç›¾å¿ƒç†ï¼Œæ¿€å‘å†…åœ¨æ”¹å˜åŠ¨æœº
    4. æ”¯æŒç”¨æˆ·çš„è‡ªæˆ‘æ•ˆèƒ½æ„Ÿ
    5. ä½¿ç”¨ç®€å•æ˜“æ‡‚çš„è¯­è¨€ï¼Œé¿å…è¿‡å¤šåŒ»å­¦æœ¯è¯­
    6. æ¯æ¬¡å¯¹è¯èšç„¦ä¸€ä¸ªä¸»é¢˜ï¼Œä¸è¦åŒæ—¶å¤„ç†å¤ªå¤šé—®é¢˜

    ## å®‰å…¨æç¤º
    - å¦‚æžœç”¨æˆ·è¡€ç³–è¿‡é«˜(>16.7mmol/L)æˆ–è¿‡ä½Ž(<3.9mmol/L)ï¼Œå»ºè®®ç«‹å³å°±åŒ»
    - ä¸æä¾›å…·ä½“çš„è¯ç‰©è°ƒæ•´å»ºè®®ï¼Œæ¶‰åŠç”¨è¯å˜æ›´è¯·å»ºè®®å’¨è¯¢åŒ»ç”Ÿ
    - è¯†åˆ«ç”¨æˆ·çš„è´Ÿé¢æƒ…ç»ªï¼Œå¿…è¦æ—¶å»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†æ”¯æŒ

    ## è¾“å‡ºæ ¼å¼
    - å›žå¤ç®€æ´æ¸©æš–ï¼Œæ¯æ¬¡ä¸è¶…è¿‡200å­—
    - å¯ä»¥ä½¿ç”¨emojiå¢žåŠ äº²å’ŒåŠ›
    - åœ¨é€‚å½“æ—¶å€™æå‡ºä¸€ä¸ªå¼•å¯¼æ€§é—®é¢˜æŽ¨è¿›å¯¹è¯

agent_mode:
  enabled: true
  max_iteration: 5
  strategy: function_call
  tools:
    - provider: time
      tool: current_time
      enabled: true
    - provider: api_based
      tool_name: intake
      tool_description: é‡‡é›†ç”¨æˆ·å¥åº·åŸºç¡€ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¹´é¾„ã€ç³–å°¿ç—…ç±»åž‹ã€ç—…ç¨‹ã€ç”¨è¯æƒ…å†µç­‰
      enabled: true
      api:
        url: http://host.docker.internal:8001/intake
        method: POST
        headers:
          Content-Type: application/json
        parameters:
          - name: user_id
            type: string
            required: true
            description: ç”¨æˆ·ID
          - name: age
            type: number
            required: false
            description: å¹´é¾„
          - name: gender
            type: string
            required: false
            description: æ€§åˆ«(male/female)
          - name: diabetes_type
            type: string
            required: false
            description: ç³–å°¿ç—…ç±»åž‹(type1/type2/gestational/prediabetes)
          - name: duration_years
            type: number
            required: false
            description: ç—…ç¨‹å¹´æ•°
          - name: fasting_glucose
            type: number
            required: false
            description: ç©ºè…¹è¡€ç³–(mmol/L)
          - name: hba1c
            type: number
            required: false
            description: ç³–åŒ–è¡€çº¢è›‹ç™½(%)
    - provider: api_based
      tool_name: stage_evaluate
      tool_description: è¯„ä¼°ç”¨æˆ·åœ¨ç‰¹å®šå¥åº·è¡Œä¸ºé¢†åŸŸçš„TTMé˜¶æ®µ(å‰æ„å‘æœŸ/æ„å‘æœŸ/å‡†å¤‡æœŸ/è¡ŒåŠ¨æœŸ/ç»´æŒæœŸ)
      enabled: true
      api:
        url: http://host.docker.internal:8001/stage/evaluate
        method: POST
        headers:
          Content-Type: application/json
        parameters:
          - name: user_id
            type: string
            required: true
            description: ç”¨æˆ·ID
          - name: trigger_domain
            type: string
            required: true
            description: è§¦å‘é¢†åŸŸ(glucose/diet/exercise/medication/sleep/stress/weight)
          - name: response_text
            type: string
            required: true
            description: ç”¨æˆ·çš„å›žç­”æ–‡æœ¬ï¼Œç”¨äºŽåˆ¤æ–­è¡Œä¸ºé˜¶æ®µ
    - provider: api_based
      tool_name: risk_evaluate
      tool_description: è¯„ä¼°ç”¨æˆ·çš„å¥åº·é£Žé™©ç­‰çº§(ä½Ž/ä¸­/é«˜)ï¼Œç”¨äºŽåˆ¤æ–­æ˜¯å¦éœ€è¦è½¬äººå·¥æˆ–å°±åŒ»
      enabled: true
      api:
        url: http://host.docker.internal:8001/risk/evaluate
        method: POST
        headers:
          Content-Type: application/json
        parameters:
          - name: user_id
            type: string
            required: true
            description: ç”¨æˆ·ID
          - name: fasting_glucose
            type: number
            required: false
            description: ç©ºè…¹è¡€ç³–(mmol/L)
          - name: postprandial_glucose
            type: number
            required: false
            description: é¤åŽè¡€ç³–(mmol/L)
          - name: hypoglycemia_history
            type: boolean
            required: false
            description: æ˜¯å¦æœ‰ä½Žè¡€ç³–å²
          - name: current_insulin
            type: boolean
            required: false
            description: æ˜¯å¦æ­£åœ¨ä½¿ç”¨èƒ°å²›ç´ 
          - name: comorbidities
            type: array
            required: false
            description: å¹¶å‘ç—‡åˆ—è¡¨
    - provider: api_based
      tool_name: followup_register
      tool_description: æ³¨å†Œç”¨æˆ·çš„éšè®¿è®¡åˆ’ï¼Œè®¾ç½®å®šæœŸæé†’
      enabled: true
      api:
        url: http://host.docker.internal:8001/followup/register
        method: POST
        headers:
          Content-Type: application/json
        parameters:
          - name: user_id
            type: string
            required: true
            description: ç”¨æˆ·ID
          - name: followup_type
            type: string
            required: true
            description: éšè®¿ç±»åž‹(daily/weekly/monthly)
          - name: focus_areas
            type: array
            required: true
            description: å…³æ³¨é¢†åŸŸåˆ—è¡¨
          - name: preferred_time
            type: string
            required: false
            description: åå¥½æé†’æ—¶é—´(HH:MMæ ¼å¼)

user_input_form:
  - text-input:
      label: ç”¨æˆ·ID
      variable: user_id
      required: true
      default: ''
  - select:
      label: å½“å‰å…³æ³¨é¢†åŸŸ
      variable: focus_area
      options:
        - value: glucose
          label: è¡€ç³–ç®¡ç†
        - value: diet
          label: é¥®é£ŸæŽ§åˆ¶
        - value: exercise
          label: è¿åŠ¨é”»ç‚¼
        - value: medication
          label: ç”¨è¯ç®¡ç†
        - value: weight
          label: ä½“é‡ç®¡ç†
      required: false

opening_statement: |
  ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„è¡Œä¸ºå¥åº·æ•™ç»ƒ ðŸŒ¿

  æˆ‘å¯ä»¥å¸®åŠ©ä½ ï¼š
  - ðŸ“Š äº†è§£å’Œç®¡ç†è¡€ç³–
  - ðŸ¥— åˆ¶å®šå¥åº·é¥®é£Ÿè®¡åˆ’
  - ðŸƒ è®¾è®¡è¿åŠ¨æ–¹æ¡ˆ
  - ðŸ’Š å»ºç«‹ç”¨è¯ä¹ æƒ¯
  - ðŸŽ¯ è®¾å®šå¥åº·ç›®æ ‡

  ä½ ä»Šå¤©æƒ³èŠèŠä»€ä¹ˆå‘¢ï¼Ÿ

suggested_questions:
  - æˆ‘æƒ³äº†è§£å¦‚ä½•æŽ§åˆ¶é¤åŽè¡€ç³–
  - æœ€è¿‘è¡€ç³–æœ‰ç‚¹é«˜ï¼Œè¯¥æ€Žä¹ˆåŠž
  - å¸®æˆ‘åˆ¶å®šä¸€ä¸ªè¿åŠ¨è®¡åˆ’
  - æˆ‘æƒ³å‡è‚¥ä½†æ€»æ˜¯åšæŒä¸ä¸‹æ¥

file_upload:
  enabled: false

text_to_speech:
  enabled: false

speech_to_text:
  enabled: false

retrieval_model:
  search_method: semantic_search
  reranking_enabled: false

sensitive_word_avoidance:
  enabled: false

annotation_reply:
  enabled: false
