# H5患者应用启动指南

## 当前状态

###  服务器运行状态

1. **后端API服务器**: http://localhost:8000 ✅ 运行正常
2. **H5前端应用**: http://192.168.1.103:5176 ✅ 运行正常

## 访问方式

### 移动设备访问
在您的手机/平板浏览器中输入：
```
http://192.168.1.103:5176
```

### 电脑本地访问
```
http://localhost:5176
```

## 测试账号

数据库中有以下测试账号可用：

| 用户名 | 密码 | 角色 | 邮箱 |
|--------|------|------|------|
| patient_alice | password123 | 患者 | alice@example.com |
| patient_bob | password123 | 患者 | bob@example.com |
| coach_carol | password123 | 教练 | carol@behavioral-health.com |
| admin | password123 | 管理员 | admin@behavioral-health.com |

## 已知问题与临时解决方案

### 问题1: 登录API返回401错误

**状态**: 正在调试中

**临时解决方案**:
由于后端API认证系统还在调试，建议先测试前端页面布局和导航流程。

### 问题2: 注册功能未响应

**状态**: 需要修复API端点路径

**预期修复内容**:
- 修复 `/api/v1/auth/register` 端点
- 确保与前端数据格式匹配

## H5应用功能清单

### 已完成的页面组件 (24个文件)

#### 核心配置 (5个)
- ✅ vite.config.ts - Vite构建配置
- ✅ tsconfig.json - TypeScript配置
- ✅ package.json - 依赖管理
- ✅ index.html - HTML入口
- ✅ .env - 环境变量

#### 页面视图 (5个)
- ✅ LoginPage - 登录页面
- ✅ RegisterPage - 注册页面
- ✅ HomePage - 用户主页/仪表盘
- ✅ DataInputPage - 数据输入表单
- ✅ ResultPage - 评估结果显示

#### 组件 (3个)
- ✅ RiskCard - 风险等级卡片
- ✅ TriggerList - 风险信号列表
- ✅ DataInputForm - 数据输入表单组件

#### 状态管理 (2个)
- ✅ stores/user - 用户状态管理
- ✅ stores/assessment - 评估状态管理

#### API接口 (3个)
- ✅ api/request - Axios请求封装
- ✅ api/auth - 认证API
- ✅ api/assessment - 评估API

#### 工具与路由 (2个)
- ✅ router/index - Vue Router配置
- ✅ utils/storage - LocalStorage封装

## 技术栈

- **前端框架**: Vue 3.5 (Composition API)
- **UI组件库**: Vant 4.9 (移动端组件)
- **构建工具**: Vite 6.0
- **状态管理**: Pinia 3.0
- **路由**: Vue Router 4.4
- **HTTP客户端**: Axios 1.7
- **类型安全**: TypeScript 5.6

## 下一步工作

1. 修复后端认证API路径问题
2. 测试完整的登录→数据输入→结果查看流程
3. 验证移动端响应式布局
4. 添加错误处理和加载状态优化

## 开发命令

```bash
# 安装依赖
cd h5-patient-app
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 预览生产构建
npm run preview
```

## 故障排查

### 前端无法连接后端
1. 确认后端服务运行: `python __main__.py serve`
2. 检查端口8000是否被占用: `netstat -an | findstr 8000`
3. 检查Vite代理配置: `vite.config.ts`

### 页面样式异常
1. 确认Vant组件自动导入: 检查`unplugin-vue-components`
2. 清除缓存: `npm run dev -- --force`

### Token过期
1. Token有效期: 30分钟 (可在.env中配置)
2. 清除本地存储: 浏览器开发者工具 → Application → Local Storage

---

**文档生成时间**: 2026-01-28
**版本**: v0.1.0 (开发版本)
