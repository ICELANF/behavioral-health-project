# H5患者应用 - 前端页面展示

## 页面流程图

```
登录页 (LoginPage)
    ↓
首页 (HomePage)
    ↓
数据输入页 (DataInputPage)
    ↓
结果展示页 (ResultPage)
```

---

## 1. 登录页面 (LoginPage.vue)

### 功能特性
- ✅ 用户名/密码登录表单
- ✅ 表单验证（必填项）
- ✅ 记住登录状态
- ✅ 跳转注册页面链接
- ✅ 测试账号提示

### UI元素
```
┌─────────────────────────────┐
│   行为健康平台               │  ← 导航栏标题
├─────────────────────────────┤
│                             │
│   [图标/Logo区域]            │
│                             │
│   ┌─────────────────────┐  │
│   │ 用户名               │  │  ← 输入框
│   │ [输入框]             │  │
│   └─────────────────────┘  │
│                             │
│   ┌─────────────────────┐  │
│   │ 密码                 │  │
│   │ [密码输入框]         │  │
│   └─────────────────────┘  │
│                             │
│   ┌─────────────────────┐  │
│   │     登  录           │  │  ← 主按钮（蓝色）
│   └─────────────────────┘  │
│                             │
│   还没有账号？去注册 →       │  ← 链接
│                             │
│   ┌─────────────────────┐  │
│   │ 💡 测试账号          │  │  ← 提示框
│   │ patient_alice        │  │
│   │ password123          │  │
│   └─────────────────────┘  │
│                             │
└─────────────────────────────┘
```

### 关键代码
```typescript
// 表单验证规则
const usernameRules = [
  { required: true, message: '请输入用户名' }
]
const passwordRules = [
  { required: true, message: '请输入密码' }
]

// 登录提交
const onSubmit = async () => {
  await userStore.login(formData.value)
  router.replace(redirect || '/')
}
```

---

## 2. 注册页面 (RegisterPage.vue)

### 功能特性
- ✅ 用户名、邮箱、密码注册
- ✅ 密码确认验证
- ✅ 表单验证
- ✅ 跳转登录页面链接

### UI元素
```
┌─────────────────────────────┐
│  ← 用户注册                  │  ← 带返回按钮的导航栏
├─────────────────────────────┤
│                             │
│   ┌─────────────────────┐  │
│   │ 用户名               │  │
│   │ [输入框]             │  │
│   └─────────────────────┘  │
│                             │
│   ┌─────────────────────┐  │
│   │ 邮箱                 │  │
│   │ [邮箱输入框]         │  │
│   └─────────────────────┘  │
│                             │
│   ┌─────────────────────┐  │
│   │ 密码                 │  │
│   │ [密码输入框]         │  │
│   └─────────────────────┘  │
│                             │
│   ┌─────────────────────┐  │
│   │ 确认密码             │  │
│   │ [密码输入框]         │  │
│   └─────────────────────┘  │
│                             │
│   ┌─────────────────────┐  │
│   │     注  册           │  │  ← 主按钮
│   └─────────────────────┘  │
│                             │
│   已有账号？去登录 →         │
│                             │
└─────────────────────────────┘
```

---

## 3. 首页 (HomePage.vue)

### 功能特性
- ✅ 用户信息卡片展示
- ✅ 最近评估记录列表
- ✅ 快捷操作按钮
- ✅ 退出登录功能

### UI元素
```
┌─────────────────────────────┐
│  行为健康平台         [退出] │  ← 导航栏
├─────────────────────────────┤
│ ┌─────────────────────────┐ │
│ │ 👤 Alice Wang           │ │  ← 用户信息卡片
│ │ patient_alice           │ │
│ │ alice@example.com       │ │
│ └─────────────────────────┘ │
│                             │
│ 快捷操作                     │  ← 标题
│ ┌───────┐  ┌───────┐       │
│ │  📝   │  │  📊   │       │  ← 操作按钮
│ │新建评估│  │历史记录│       │
│ └───────┘  └───────┘       │
│                             │
│ 最近的评估                   │  ← 列表标题
│ ┌─────────────────────────┐ │
│ │ 2026-01-28 12:30        │ │  ← 评估记录
│ │ 风险等级: R2 (中度)      │ │
│ │ 风险分数: 45.3          │ │
│ │           查看详情 →     │ │
│ └─────────────────────────┘ │
│ ┌─────────────────────────┐ │
│ │ 2026-01-27 18:15        │ │
│ │ 风险等级: R1 (轻度)      │ │
│ │ 风险分数: 28.7          │ │
│ │           查看详情 →     │ │
│ └─────────────────────────┘ │
│                             │
└─────────────────────────────┘
```

### 关键代码
```typescript
// 加载最近评估
const loadRecentAssessments = async () => {
  if (userStore.user) {
    recentAssessments.value = await assessmentStore.fetchRecent(
      userStore.user.id,
      5
    )
  }
}

// 新建评估
const startNewAssessment = () => {
  router.push('/data-input')
}
```

---

## 4. 数据输入页 (DataInputPage.vue)

### 功能特性
- ✅ 文字日记输入（多行文本）
- ✅ 血糖值动态添加/删除
- ✅ HRV值动态添加/删除
- ✅ 数据验证
- ✅ 提交评估

### UI元素
```
┌─────────────────────────────┐
│  ← 数据输入                  │  ← 导航栏（带返回）
├─────────────────────────────┤
│ 文字日记                     │
│ ┌─────────────────────────┐ │
│ │                         │ │
│ │ [多行文本输入框]         │ │  ← 5行高度
│ │                         │ │
│ └─────────────────────────┘ │
│                             │
│ 血糖值 (mg/dL)               │
│ ┌─────────────────────────┐ │
│ │ [数值输入]  [添加] 按钮  │ │
│ └─────────────────────────┘ │
│                             │
│ 已添加的血糖值:              │
│ ┌─────────────────────────┐ │
│ │ 95.5 mg/dL      [删除]  │ │  ← 标签列表
│ │ 110.2 mg/dL     [删除]  │ │
│ └─────────────────────────┘ │
│                             │
│ HRV值 (ms)                   │
│ ┌─────────────────────────┐ │
│ │ [数值输入]  [添加] 按钮  │ │
│ └─────────────────────────┘ │
│                             │
│ 已添加的HRV值:               │
│ ┌─────────────────────────┐ │
│ │ 45 ms          [删除]   │ │
│ │ 52 ms          [删除]   │ │
│ └─────────────────────────┘ │
│                             │
│ ┌─────────────────────────┐ │
│ │     提交评估             │ │  ← 提交按钮（蓝色）
│ └─────────────────────────┘ │
│                             │
└─────────────────────────────┘
```

### 关键代码
```typescript
// 添加血糖值
const addGlucose = () => {
  if (glucoseInput.value && !isNaN(parseFloat(glucoseInput.value))) {
    formData.value.glucose_values!.push(parseFloat(glucoseInput.value))
    glucoseInput.value = ''
  }
}

// 删除血糖值
const removeGlucose = (index: number) => {
  formData.value.glucose_values!.splice(index, 1)
}

// 提交评估
const onSubmit = async () => {
  const result = await assessmentStore.submitAssessment(formData.value)
  router.push(`/result/${result.assessment_id}`)
}
```

---

## 5. 结果展示页 (ResultPage.vue)

### 功能特性
- ✅ 风险等级徽章（颜色编码）
- ✅ 风险分数可视化
- ✅ 识别的风险信号列表
- ✅ Agent专业建议
- ✅ 推荐行动清单
- ✅ 评估说明文本

### UI元素
```
┌─────────────────────────────┐
│  ← 评估结果                  │  ← 导航栏
├─────────────────────────────┤
│ 风险评估                     │
│ ┌─────────────────────────┐ │
│ │  ┌────────┐             │ │
│ │  │  R2    │    45.3     │ │  ← 风险徽章 + 分数
│ │  │ 中度   │  风险分数    │ │    （橙色背景）
│ │  └────────┘             │ │
│ └─────────────────────────┘ │
│                             │
│ 主要关注: 血糖波动           │
│ 紧急程度: 中等               │
│ 评估时间: 2026-01-28 12:30  │
│                             │
│ 识别的风险信号               │
│ ┌─────────────────────────┐ │
│ │ 血糖波动过大             │ │
│ │ [high] physiological    │ │  ← 标签
│ │ 置信度: 85%             │ │
│ └─────────────────────────┘ │
│ ┌─────────────────────────┐ │
│ │ 睡眠质量下降             │ │
│ │ [moderate] behavioral   │ │
│ │ 置信度: 72%             │ │
│ └─────────────────────────┘ │
│                             │
│ 专业建议                     │
│ 主要Agent: GlucoseAgent     │
│ 辅助Agent: SleepAgent       │
│ 优先级: P2                   │
│ 建议响应时间: 24小时内       │
│                             │
│ 推荐行动                     │
│ 1. 监测餐后血糖变化          │
│ 2. 调整饮食结构              │
│ 3. 保持规律作息              │
│                             │
│ 评估说明                     │
│ [详细的评估理由文本...]      │
│                             │
│ ┌─────────────────────────┐ │
│ │     继续评估             │ │  ← 操作按钮
│ └─────────────────────────┘ │
│ ┌─────────────────────────┐ │
│ │     返回首页             │ │
│ └─────────────────────────┘ │
│                             │
└─────────────────────────────┘
```

### 风险等级颜色方案
```typescript
const getRiskLevelColor = (level: string) => {
  const colorMap: Record<string, string> = {
    R0: '#52c41a',  // 绿色 - 正常
    R1: '#1890ff',  // 蓝色 - 轻度
    R2: '#fa8c16',  // 橙色 - 中度
    R3: '#ff4d4f',  // 红色 - 高度
    R4: '#a8071a'   // 深红 - 危机
  }
  return colorMap[level] || '#999'
}
```

---

## 6. 可复用组件

### RiskCard.vue - 风险卡片
```
┌─────────────────────┐
│  ┌────────┐         │
│  │  R2    │  45.3   │
│  │ 中度   │风险分数  │
│  └────────┘         │
└─────────────────────┘
```

### TriggerList.vue - 风险信号列表
```
┌─────────────────────────┐
│ 血糖波动过大             │
│ [high] 置信度: 85%      │
├─────────────────────────┤
│ 睡眠质量下降             │
│ [moderate] 置信度: 72%  │
└─────────────────────────┘
```

---

## UI设计规范

### 颜色主题
- **主色调**: #1989fa (Vant默认蓝)
- **成功**: #07c160
- **警告**: #ff976a
- **危险**: #ee0a24
- **文本**: #323233
- **次要文本**: #969799

### 字体大小
- **大标题**: 18px
- **标题**: 16px
- **正文**: 14px
- **辅助文字**: 12px

### 间距
- **页面边距**: 16px
- **组件间距**: 12px
- **元素间距**: 8px

### 圆角
- **按钮**: 999px (圆角按钮)
- **卡片**: 8px
- **标签**: 4px

---

## 响应式设计

### 移动端优化
- ✅ 触摸友好的按钮尺寸（最小44x44px）
- ✅ 大字体，易读性高
- ✅ 单列布局，避免横向滚动
- ✅ 底部导航栏（如需要）
- ✅ 下拉刷新支持
- ✅ 上拉加载更多

### 兼容性
- ✅ iOS Safari 12+
- ✅ Android Chrome 70+
- ✅ 微信内置浏览器
- ✅ 支付宝内置浏览器

---

## 交互动画

### 页面切换
- 使用Vue Router transition实现平滑过渡
- 从右向左滑入（前进）
- 从左向右滑出（返回）

### 按钮反馈
- 按下时缩放效果（scale: 0.95）
- Loading状态显示加载图标
- 成功/失败Toast提示

### 数据加载
- 骨架屏占位（Skeleton）
- 加载中显示Loading组件
- 空状态显示Empty组件

---

## 下一步优化建议

1. **添加页面过渡动画**
   ```vue
   <router-view v-slot="{ Component }">
     <transition name="slide-right">
       <component :is="Component" />
     </transition>
   </router-view>
   ```

2. **添加下拉刷新**
   ```vue
   <van-pull-refresh v-model="refreshing" @refresh="onRefresh">
     <!-- 内容 -->
   </van-pull-refresh>
   ```

3. **添加骨架屏**
   ```vue
   <van-skeleton v-if="loading" :row="3" />
   ```

4. **添加底部导航**
   ```vue
   <van-tabbar v-model="active">
     <van-tabbar-item icon="home-o">首页</van-tabbar-item>
     <van-tabbar-item icon="chart-trending-o">评估</van-tabbar-item>
     <van-tabbar-item icon="user-o">我的</van-tabbar-item>
   </van-tabbar>
   ```

---

**文档更新时间**: 2026-01-28
**H5应用版本**: v0.1.0
